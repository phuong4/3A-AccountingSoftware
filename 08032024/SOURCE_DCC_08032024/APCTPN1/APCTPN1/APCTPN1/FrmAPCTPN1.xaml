<smvc:FormTrans xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                xmlns:src="clr-namespace:APCTPN1"
                xmlns:igWindows="http://infragistics.com/Windows"
                xmlns:smc="http://Fast.com.vn/Sm/Windows/Controls"
                xmlns:smvc="clr-namespace:SmVoucherLib;assembly=SmVoucherLib"
                xmlns:System="clr-namespace:System;assembly=mscorlib"
                xmlns:igEditors="http://infragistics.com/Editors"
                xmlns:igDP="http://infragistics.com/DataPresenter"
                xmlns:diagnostics="clr-namespace:System.Diagnostics;assembly=WindowsBase"
                xmlns:igRibbon="http://infragistics.com/Ribbon"
                x:Class="APCTPN1.FrmAPCTPN1"
                LanguageID="APCTPN1_0"
                Height="680"
                Width="960"
                x:Name="FormMain"
                xmlns:sys="clr-namespace:System;assembly=mscorlib"
                Closed="FormMain_Closed"
                Cm_Moi="V_Moi"
                Cm_Sua="V_Sua"
                Cm_Nhan="V_Nhan"
                Cm_Xoa="V_Xoa"
                Cm_In="V_In"
                Cm_Huy="V_Huy"
                Cm_Xem="V_Xem"
                Cm_Copy="V_Copy"
                Cm_Truoc="V_Truoc"
                Cm_Sau="V_Sau"
                Cm_Dau="V_Dau"
                Cm_Cuoi="V_Cuoi"
                Cm_Tim="V_Tim"
                EditModeEnded="FormMain_EditModeEnded"
                AssignMaxLengthControlList = "txtSo_ct;txtDia_chi;txtOng_ba;txtDien_giai;txtghi_chu"
                Theme="Voucher"
                xmlns:igThemes="http://infragistics.com/Themes"
                xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
                xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
                mc:Ignorable="d">
    <smvc:FormTrans.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <smc:CachedResourceDictionary Source="pack://application:,,,/SmStyle;component/TextBlockStyles.xaml" />
                <smc:CachedResourceDictionary Source="pack://application:,,,/SmStyle;component/TextBoxStyles.xaml" />
                <smc:CachedResourceDictionary Source="pack://application:,,,/SmStyle;component/ButtonStyles.xaml" />
                <smc:CachedResourceDictionary Source="pack://application:,,,/SmStyle;component/GroupBoxStyles.xaml" />
                <smc:CachedResourceDictionary Source="pack://application:,,,/SmStyle;component/CheckBoxStyles.xaml" />
                <smc:CachedResourceDictionary Source="pack://application:,,,/SmStyle;component/DateTextBoxStyles.xaml" />
                <smc:CachedResourceDictionary Source="pack://application:,,,/SmStyle;component/NumericTextBoxStyles.xaml" />
                <smc:CachedResourceDictionary Source="pack://application:,,,/SmStyle;component/MaskedTextBoxStyles.xaml" />
                <smc:CachedResourceDictionary Source="pack://application:,,,/SmStyle;component/AutoCompleteTextBoxStyles.xaml" />
                <smc:CachedResourceDictionary Source="pack://application:,,,/SmStyle;component/XamComboEditorStyles.xaml" />
                <smc:CachedResourceDictionary Source="pack://application:,,,/SmStyle;component/ExRateTextBoxStyles.xaml" />
                <smc:CachedResourceDictionary Source="pack://application:,,,/SmStyle;component/TabItemExStyles.xaml" />
            </ResourceDictionary.MergedDictionaries>
            <smvc:BindingVisibility x:Key="VisibilityConverter"/>
            <smc:CheckBoxConverter x:Key="IsCheckedConverter" />    
            <src:BindingReadonly x:Key="ReadOnlyConverter" />
            
            <smvc:BindingStatusVoucher x:Key="StatusVoucher" />
            <smvc:FormatMaskNumberConverter x:Key="MaskNumeric" />
            <smc:BoolInverter x:Key="BoolInverter" />
            <smc:CodeValueBindingObject x:Key="IsInEditMode"
                                        Value="False" />
            <smc:CodeValueBindingObject x:Key="Voucher_Ma_nt0" />
            <smc:CodeValueBindingObject x:Key="Voucher_Lan0" />
            <smc:CodeValueBindingObject x:Key="IsCheckedSua_tien"
                                        Value="False" />
            <smc:CodeValueBindingObject x:Key="Ty_Gia_ValueChange"
                                        Value="False" />
            <Style x:Key="ReadOnlyVNDColumn"
                   TargetType="{x:Type TextBox}">
                <Setter Property="IsReadOnly"
                        Value="True" />
                <Style.Triggers>
                    <MultiDataTrigger>
                        <MultiDataTrigger.Conditions>
                            <Condition Binding="{Binding Path=IsChecked, ElementName=ChkSuaTien}"
                                       Value="True" />
                            <Condition Binding="{Binding Path=Value, Source={StaticResource IsInEditMode}}"
                                       Value="True" />
                        </MultiDataTrigger.Conditions>
                        <Setter Property="IsReadOnly"
                                Value="False" />
                    </MultiDataTrigger>
                </Style.Triggers>
            </Style>

            <Style  x:Key="ButtonEditModeDisable"
                    TargetType="{x:Type Button}">
                <Style.Triggers>

                    <DataTrigger Binding="{Binding Path=Value, Source={StaticResource IsInEditMode}}"
                                 Value="True">
                        <Setter Property="IsEnabled"
                                Value="False" />
                    </DataTrigger>
                </Style.Triggers>
            </Style>

            <Style x:Key="ButtonEditModeEnable"
                   TargetType="{x:Type Button}">
                <Style.Triggers>
                    <DataTrigger Binding="{Binding Path=Value, Source={StaticResource IsInEditMode}}"
                                 Value="False">
                        <Setter Property="IsEnabled"
                                Value="False" />
                    </DataTrigger>
                </Style.Triggers>
            </Style>
            <Style x:Key="TextBoxEditModeEnable"
                   BasedOn="{StaticResource TextBoxStyle}"
                   TargetType="{x:Type TextBox}">
                <Style.Triggers>
                    <DataTrigger Binding="{Binding Path=Value, Source={StaticResource IsInEditMode}}"
                                 Value="False">
                        <Setter Property="IsReadOnly"
                                Value="True" />
                    </DataTrigger>
                </Style.Triggers>
            </Style>

            <Style x:Key="ComboBoxEditModeEnable"
                   TargetType="{x:Type igEditors:XamComboEditor}"
                   BasedOn="{StaticResource XamComboEditorStyle}">
                <Setter Property="DisplayMemberPath"
                        Value="ten_act" />
                <Setter Property="IsEnabled"
                        Value="false"/>
                <Style.Triggers>
                    <!--<DataTrigger Binding="{Binding Path=Value, Source={StaticResource IsInEditMode}}"
                                 Value="False">
                        <Setter Property="IsEnabled"
                                Value="False" />
                        <Setter Property="BorderBrush"
                                Value="#FF7F9DB9" />
                    </DataTrigger>-->
                    <MultiDataTrigger>
                        <MultiDataTrigger.Conditions>
                            <Condition Binding="{Binding Path=Value, Source={StaticResource IsInEditMode},Mode=OneWay}"
                                       Value="False" />
                            <Condition Binding="{Binding Path=M_LAN, RelativeSource={RelativeSource AncestorType={x:Type smvc:FormTrans}}}"
                                       Value="E" />
                        </MultiDataTrigger.Conditions>
                        <Setter Property="DisplayMemberPath"
                                Value="ten_act2" />
                    </MultiDataTrigger>
                    <MultiDataTrigger>
                        <MultiDataTrigger.Conditions>
                            <Condition Binding="{Binding Path=Value, Source={StaticResource IsInEditMode},Mode=OneWay}"
                                       Value="True" />
                            <Condition Binding="{Binding Path=M_LAN, RelativeSource={RelativeSource AncestorType={x:Type smvc:FormTrans}}}"
                                       Value="V" />
                        </MultiDataTrigger.Conditions>
                        <Setter Property="DisplayMemberPath"
                                Value="ten_post" />
                    </MultiDataTrigger>
                    <MultiDataTrigger>
                        <MultiDataTrigger.Conditions>
                            <Condition Binding="{Binding Path=Value, Source={StaticResource IsInEditMode},Mode=OneWay}"
                                       Value="True" />
                            <Condition Binding="{Binding Path=M_LAN, RelativeSource={RelativeSource AncestorType={x:Type smvc:FormTrans}}}"
                                       Value="E" />
                        </MultiDataTrigger.Conditions>
                        <Setter Property="DisplayMemberPath"
                                Value="ten_post2" />
                    </MultiDataTrigger>

                    <DataTrigger Binding="{Binding Path=Value, Source={StaticResource IsInEditMode},Mode=OneWay}"
                                       Value="True">
                        <Setter Property="IsEnabled"
                                Value="true"/>
                    </DataTrigger>
                </Style.Triggers>
            </Style>
            <Style x:Key="AutoCompleteTextBoxEditModeEnable"
                   TargetType="{x:Type smc:AutoCompleteTextBox}">
                <Style.Triggers>
                    <DataTrigger Binding="{Binding Path=Value, Source={StaticResource IsInEditMode}}"
                                 Value="False">
                        <Setter Property="IsReadOnly"
                                Value="True" />
                    </DataTrigger>
                </Style.Triggers>
            </Style>
            <Style x:Key="TabItemFocusVisual">
                <Setter Property="Control.Template">
                    <Setter.Value>
                        <ControlTemplate>
                            <Rectangle SnapsToDevicePixels="true"
                                       Margin="3,3,3,1"
                                       Stroke="Black"
                                       StrokeDashArray="1 2"
                                       StrokeThickness="1" />
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Style>
            <Style x:Key="DateTextBoxEditModeEnable"
                   TargetType="{x:Type smc:DateTextBox}"
                   BasedOn="{StaticResource DateTextBoxStyle}">
                <Style.Triggers>
                    <DataTrigger Binding="{smc:BindingEx Path=Value, Source={StaticResource IsInEditMode}}"
                                 Value="False">
                        <Setter Property="IsReadOnly"
                                Value="True" />
                    </DataTrigger>
                </Style.Triggers>
            </Style>
            <Style x:Key="CheckBoxEditModeEnable"
                   TargetType="{x:Type CheckBox}"
                   BasedOn="{StaticResource CheckBoxStyle}">
                <Style.Triggers>
                    <DataTrigger Binding="{smc:BindingEx Path=Value, Source={StaticResource IsInEditMode}}"
                                 Value="False">
                        <Setter Property="IsEnabled"
                                Value="False" />
                        <Setter Property="Foreground"
                                Value="Black" />
                    </DataTrigger>
                </Style.Triggers>
            </Style>
        </ResourceDictionary>
    </smvc:FormTrans.Resources>

    <smc:GridLayout x:Name="GrdLayout00"
                    Margin="0"
                    RowCount="4"
                    RowHeights="35,194,65*,114">
        <smc:GridLayout Grid.Row="1"
                        RowCount="1"
                        RowHeights="*"
                        ColumnCount="5"
                        Name="GrdPH"
                        ColumnWidths="23*,10,45*,12,276"
                        Margin="12,4,12,12">
            <!--Thong tin chung -->
            <GroupBox Name="gbInfo"
                      Header="Thông tin chung"
                      Grid.Column="0"
                      Grid.ColumnSpan="3"
                      Grid.Row="0"
                      Margin="0">
                <smc:GridLayout Name="GrdLayout10"
                                RowCount="6"
                                ColumnCount="5"
                                HeightPerRow="25"
                                ColumnWidths="100,140,92*,70,140">

                    <TextBlock Text="Mã khách"
                               Name="tblma_kh"
                               Grid.Row="0"
                               Grid.Column="0"
                               Style="{StaticResource ContentTextStyle}" />
                    <!--ma khach hang-->
                    <smc:AutoCompleteTextBox Name="txtMa_kh"
                                             Grid.Column="1"
                                             Grid.Row="0"
                                             TabIndex="10"
                                             Text="{smc:BindingEx Path=ma_kh}"
                                             ParentControl="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType=smvc:FormTrans}}"
                                             SysObj="{Binding Path=BindingSysObj,RelativeSource={RelativeSource FindAncestor, AncestorType=smvc:FormTrans}}"
                                             AllowEmty="False"
                                             AllowWrong="False"
                                             ListID="dmkh"
                                             Style="{StaticResource AutoCompleteTextBoxEditModeEnable}"
                                             PreviewLostFocus="txtMa_kh_PreviewLostFocus">
                    </smc:AutoCompleteTextBox>

                    <TextBlock Name="txtTen_kh"
                               Grid.Row="0"
                               Grid.Column="2"
                               Grid.ColumnSpan="3"
                               Margin="12,0,0,0"
                               Style="{StaticResource ContentTextStyle}"
                               Text="{smc:BindingEx Path=ten_kh, Path2 = ten_kh2}" />
                    <!--dia chi-->
                    <TextBlock Text="Địa chỉ"
                               Name="tbldia_chi"
                               Grid.Row="1"
                               Grid.Column="0"
                               Style="{StaticResource ContentTextStyle}" />
                    <TextBox x:Name="txtDia_chi"
                             TabIndex="20"
                             Grid.Column="1"
                             Grid.Row="1"
                             Grid.ColumnSpan="2"
                             IsTabStop="True"
                             Text="{smc:BindingEx Path=dia_chi}"
                             GotFocus="txtDia_chi_GotFocus"
                             Height="20"
                             FontWeight="Normal">
                        <TextBox.Style>
                            <Style TargetType="{x:Type TextBox}"
                                   BasedOn="{StaticResource TextBoxEditModeEnable}">
                                <!--<Style.Triggers>
                                    <DataTrigger 
                                                 Binding="{Binding Path=RowResult[\'dia_chi\'], ElementName=txtMa_kh,Converter={StaticResource IsCheckedConverter}}"
                                                 Value="">
                                        <Setter Property="KeyboardNavigation.AcceptsReturn"
                                                Value="True" />
                                    </DataTrigger>
                                </Style.Triggers>-->
                            </Style>
                        </TextBox.Style>
                    </TextBox>
                    <!--ma so thue-->
                    <TextBlock Text="MST"
                               Name="tblma_so_thue"
                               Grid.Row="1"
                               Grid.Column="3"
                               Margin="10,0,0,0"
                               Style="{StaticResource ContentTextStyle}" />
                    <TextBox x:Name="txtMaSoThue"
                             Grid.Column="4"
                             Grid.Row="1"
                             Text="{smc:BindingEx Path=ma_so_thue}"
                             Style="{StaticResource TextBoxStyle}"
                             IsReadOnly="True" />
                    <!--Số dư khách hàng-->
                    <TextBlock Text="Số dư"
                               Name="tblSoDuKH"
                               Grid.Row="2"
                               Grid.Column="3"
                               Margin="10,0,0,0"
                               Style="{StaticResource ContentTextStyle}" />
                    <smc:NumericTextBox x:Name="txtSoDuKH"
                                        Grid.Column="4"
                                        Grid.Row="2"
                                        Format="{Binding Path=Text, Source={StaticResource Voucher_Ma_nt0}, Mode=OneWay, Converter={StaticResource MaskNumeric}, ConverterParameter=M_IP_TIEN}"
                                        Style="{StaticResource NumericTextBoxStyle}"
                                        IsTabStop="False"
                                        IsReadOnly="True" />
                    <!--nguoi giao hang-->
                    <TextBlock Text="Ng. giao hàng"
                               Name="tblong_ba"
                               Grid.Row="2"
                               Grid.Column="0"
                               Style="{StaticResource ContentTextStyle}" />
                    <TextBox x:Name="txtOng_ba"
                             Grid.Column="1"
                             Grid.Row="2"
                             Grid.ColumnSpan="2"
                             TabIndex="20"
                             Text="{smc:BindingEx Path=ong_ba}"
                             Height="20"
                             FontWeight="Normal">
                        <TextBox.Style>
                            <Style TargetType="{x:Type TextBox}"
                                   BasedOn="{StaticResource TextBoxStyle}">
                                <Setter Property="IsReadOnly">
                                    <Setter.Value>
                                        <MultiBinding Converter="{StaticResource ReadOnlyConverter}"
                                                 ConverterParameter="PH;ong_ba"
                                                 Mode="OneWay">
                                            <Binding Source="{StaticResource IsInEditMode}"
                                                     Path="Value"/>
                                        </MultiBinding>
                                    </Setter.Value>
                                </Setter>
                                <Setter Property="IsTabStop"
                                        Value="True" />
                                <Style.Triggers>
                                    <DataTrigger Binding="{Binding Path=IsReadOnly, ElementName=txtOng_ba}"
                                                 Value="True">
                                        <Setter Property="IsTabStop"
                                                Value="False" />
                                    </DataTrigger>
                                </Style.Triggers>
                            </Style>
                        </TextBox.Style>
                    </TextBox>
                    <!--dien giai-->
                    <TextBlock Text="Diễn giải"
                               Name="tbldien_giai"
                               Grid.Row="3"
                               Grid.Column="0"
                               Style="{StaticResource ContentTextStyle}" />
                    <TextBox Name="txtDien_giai"
                             TabIndex="30"
                             Text="{smc:BindingEx Path=dien_giai}"
                             Grid.Column="1"
                             Grid.Row="3"
                             Grid.ColumnSpan="4"
                             Height="20"
                             FontWeight="Normal"
                             Style="{StaticResource TextBoxEditModeEnable}" />
                    <!--ma nhap xuat-->
                    <TextBlock Text="Tk có"
                               Name="tblma_nx"
                               Grid.Row="4"
                               Grid.Column="0"
                               Style="{StaticResource ContentTextStyle}" />

                    <smc:AutoCompleteTextBox x:Name="txtMa_nx"
                                             Grid.Column="1"
                                             Grid.Row="4"
                                             TabIndex="40"
                                             Text="{smc:BindingEx Path=ma_nx}"
                                             ParentControl="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType=Window}}"
                                             SysObj="{Binding Path=BindingSysObj,RelativeSource={RelativeSource FindAncestor, AncestorType=Window}}"
                                             AllowEmty="False"
                                             AllowWrong="False"
                                             ListID="dmnx"
                                             Style="{StaticResource AutoCompleteTextBoxEditModeEnable}"
                                             PreviewLostFocus="txtMa_nx_PreviewLostFocus">
                    </smc:AutoCompleteTextBox>
                    <TextBlock Name="txtTenTK"
                               Grid.Row="4"
                               Grid.Column="2"
                               Grid.ColumnSpan="3"
                               Margin="12,0,0,0"
                               Style="{StaticResource ContentTextStyle}"
                               Text="{smc:BindingEx Path=ten_nx, Path2=ten_nx2}" />

                </smc:GridLayout>
            </GroupBox>
            <!--Chung tu-->
            <GroupBox Name="gbVoucher"
                      Header="Chứng từ"
                      Grid.Column="4"
                      Grid.Row="0">
                <smc:GridLayout ColumnCount="3"
                                ColumnWidths="5*,43,140"
                                HeightPerRow="25"
                                RowCount="6"
                                Name="GrdVoucher">
                    <!--ngay hoach toan-->
                    <TextBlock Name="tblngay_ct"
                               Text="Ngày ht"
                               Grid.Column="0"
                               Grid.Row="0"
                               Grid.ColumnSpan="2"
                               Style="{StaticResource ContentTextStyle}" />
                    <smc:DateTextBox x:Name="txtNgay_ct"
                                     Grid.Column="2"
                                     Grid.Row="0"
                                     TabIndex="50"
                                     Value="{smc:BindingEx Path=ngay_ct}"
                                     AllowEmpty="False"
                                     LostFocus="txtNgay_ct_LostFocus"
                                     Style="{StaticResource DateTextBoxEditModeEnable}" />
                    <!--ngay lap phieu-->
                    <TextBlock Grid.Column="0"
                               Grid.ColumnSpan="2"
                               Grid.Row="1"
                               Name="tblngay_lct"
                               Text="Ngày lập c.từ"
                               Style="{StaticResource ContentTextStyle}" />

                    <smc:DateTextBox x:Name="txtngay_lct"
                                     Grid.Column="2"
                                     Grid.Row="1"
                                     TabIndex="60"
                                     Value="{smc:BindingEx Path=ngay_lct}"
                                    LostFocus="txtngay_lct_LostFocus">
                        <smc:DateTextBox.Style>
                            <Style TargetType="{x:Type smc:DateTextBox}"
                                   BasedOn="{StaticResource DateTextBoxStyle}">
                                <Setter Property="IsReadOnly">
                                    <Setter.Value>
                                        <MultiBinding Converter="{StaticResource ReadOnlyConverter}"
                                                 ConverterParameter="PH;ngay_lct"
                                                 Mode="OneWay">
                                            <Binding Source="{StaticResource IsInEditMode}"
                                                     Path="Value"/>
                                        </MultiBinding>
                                    </Setter.Value>
                                </Setter>
                                <Setter Property="IsTabStop"
                                        Value="True" />
                                <Style.Triggers>
                                    <DataTrigger Binding="{Binding Path=IsReadOnly, ElementName=txtngay_lct}"
                                                 Value="True">
                                        <Setter Property="IsTabStop"
                                                Value="False" />
                                    </DataTrigger>
                                </Style.Triggers>
                            </Style>
                        </smc:DateTextBox.Style>
                    </smc:DateTextBox>
                    <!--quyen so-->
                    <TextBlock Grid.Row="2"
                               Grid.Column="0"
                               Grid.ColumnSpan="2"
                               Text="Quyển số"
                               Name="tblma_qs"
                               Style="{StaticResource ContentTextStyle}" />
                    <smc:AutoCompleteTextBox x:Name="txtMa_qs"
                                             Grid.Column="2"
                                             Grid.Row="2"
                                             Text="{smc:BindingEx Path=ma_qs}"
                                             TabIndex="70"
                                             ParentControl="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType=Window}}"
                                             SysObj="{Binding Path=BindingSysObj,RelativeSource={RelativeSource FindAncestor, AncestorType=Window}}"
                                             AllowEmty="False"
                                             AllowWrong="False"
                                             Filter="ma_cts like '%PN1%' and status =1"
                                             Style="{StaticResource AutoCompleteTextBoxEditModeEnable}"
                                             PreviewLostFocus="txtMa_qs_PreviewLostFocus"
                                             ListID="dmqs">
                    </smc:AutoCompleteTextBox>
                    <!--so pn-->
                    <TextBlock Grid.Row="3"
                               Grid.Column="0"
                               Grid.ColumnSpan="2"
                               Name="tblso_ct"
                               Text="Số c.từ"
                               Style="{StaticResource ContentTextStyle}" />
                    <TextBox x:Name="txtSo_ct"
                             Grid.Column="2"
                             Grid.Row="3"
                             Height="20"
                             TabIndex="80"
                             Text="{smc:BindingEx Path=so_ct}"
                             CharacterCasing="Upper">
                        <TextBox.Style>
                            <smc:MergedStyles BasedOn="{StaticResource TextBoxStyle}"
                                              MergeStyle="{StaticResource TextBoxEditModeEnable}" />
                        </TextBox.Style>
                    </TextBox>
                    <smc:GridLayout x:Name="GrNT"
                                    Grid.Row="4"
                                    Grid.Column="0"
                                    ColumnCount="3"
                                    ColumnWidths="52*,43,140"
                                    Grid.ColumnSpan="3">
                        <TextBlock Grid.Row="4"
                                   Grid.Column="0"
                                   Name="tblTy_gia"
                                   Text="Tỷ giá"
                                   Style="{StaticResource ContentTextStyle}" />

                        <smc:AutoCompleteTextBox Name="cbMa_nt"
                                                 Grid.Column="1"
                                                 Grid.Row="4"
                                                 Margin="0,0,5,0"
                                                 Text="{smc:BindingEx Path=ma_nt}"
                                                 ParentControl="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType=Window}}"
                                                 SysObj="{Binding Path=BindingSysObj,RelativeSource={RelativeSource FindAncestor, AncestorType=Window}}"
                                                 AllowEmty="False"
                                                 AllowWrong="False"
                                                 ListID="dmnt"
                                                 TabIndex="81"
                                                 IsTabStop="False"
                                                 Style="{StaticResource AutoCompleteTextBoxEditModeEnable}"
                                                 PreviewLostFocus="cbMa_nt_PreviewLostFocus">
                        </smc:AutoCompleteTextBox>
                        <smc:ExRateTextBox x:Name="txtTy_gia"
                                           Grid.Row="4"
                                           Margin="0"
                                           Grid.Column="2"
                                           RateF="{smc:BindingEx Path=ty_giaf}"
                                           Rate="{smc:BindingEx Path=ty_gia}"
                                           KindRate="{smc:BindingEx Path=loai_tg}"
                                           TabIndex="82"
                                           Format="{Binding Path=Text, Source={StaticResource Voucher_Ma_nt0}, Mode=OneWay, Converter={StaticResource MaskNumeric}, ConverterParameter=M_IP_TY_GIA}"
                                           GotFocus="txtTy_gia_GotFocus"
                                           LostFocus="txtTy_gia_LostFocus">
                            <smc:ExRateTextBox.Style>
                                <Style TargetType="{x:Type smc:ExRateTextBox}"
                                       BasedOn="{StaticResource ExRateTextBoxStyle}">
                                    <Setter Property="IsReadOnly"
                                            Value="True" />
                                    <Style.Triggers>
                                        <MultiDataTrigger>
                                            <MultiDataTrigger.Conditions>
                                                <Condition Binding="{Binding Path=Value, Source={StaticResource IsInEditMode},Mode=OneWay}"
                                                           Value="True" />
                                                <Condition Binding="{Binding Path=Value, Source={StaticResource Voucher_Ma_nt0},Mode=OneWay}"
                                                           Value="False" />
                                            </MultiDataTrigger.Conditions>
                                            <Setter Property="IsReadOnly"
                                                    Value="False" />

                                        </MultiDataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </smc:ExRateTextBox.Style>
                        </smc:ExRateTextBox>
                    </smc:GridLayout>
                    <smc:GridLayout Grid.Row="5"
                                    Grid.Column="0"
                                    Grid.ColumnSpan="3"
                                    ColumnCount="2"
                                    ColumnWidths="*,140"
                                    KeyboardNavigation.TabNavigation="None"
                                    Name="GrdLayoutStatus">
                        <TextBlock Grid.Column="0"
                                   Grid.ColumnSpan="1"
                                   Name="tblStatus">
                           <TextBlock.Style>
                               <Style TargetType="TextBlock"
                                      BasedOn="{StaticResource ContentTextStyle}">
                                   <Setter Property="Text"
                                           Value="Trạng thái" />
                                   <Style.Triggers>
                                       <MultiDataTrigger>
                                            <MultiDataTrigger.Conditions>
                                                <Condition Binding="{Binding Path=Value, Source={StaticResource IsInEditMode}}"
                                                           Value="True" />
                                                <Condition Binding="{Binding Path=M_LAN, RelativeSource={RelativeSource AncestorType={x:Type smvc:FormTrans}}}"
                                                           Value="V" />
                                            </MultiDataTrigger.Conditions>
                                                <Setter Property="Text"
                                                        Value="Xử lý" />
                                       </MultiDataTrigger>
                                   </Style.Triggers>
                               </Style>
                           </TextBlock.Style>
                        </TextBlock>
                        <igEditors:XamComboEditor Style="{StaticResource ComboBoxEditModeEnable}"
                                                  SelectedIndex="{smc:BindingEx Path=status,Converter={StaticResource StatusVoucher}}"
                                                  ValuePath="ma_post"
                                                  Grid.Column="1"
                                                  Height="20"
                                                  Margin="0"
                                                  Grid.Row="0"
                                                  TabIndex="83"
                                                  Name="txtStatus" />
                    </smc:GridLayout>
                </smc:GridLayout>
            </GroupBox>
        </smc:GridLayout>

        <smc:GridLayout Margin="12,0,12,4"
              Name="GrdLayout30"
              Grid.Row="2"
              Grid.Column="0"
              KeyboardNavigation.TabNavigation="Local"
              KeyboardNavigation.TabIndex="120">

            <igWindows:XamTabControl x:Name="TabInfo"
                                     Grid.Row="0"
                                     Grid.Column="0"
                                     Theme="Generic"
                                     Background="{x:Null}">
                <igWindows:XamTabControl.BorderBrush>
                    <SolidColorBrush Color="#FFD0D0BF"
                                     igThemes:ResourceWasher.WashGroup="Selected" />
                </igWindows:XamTabControl.BorderBrush>
                <igWindows:XamTabControl.Resources>
                    <Style TargetType="{x:Type igWindows:TabItemEx}"
                           BasedOn="{StaticResource TabItemStyle}">
                    </Style>
                </igWindows:XamTabControl.Resources>
                <igWindows:TabItemEx Header="_1. Hạch toán"
                                     x:Name="tiHT"
                                     TabIndex="120"
                                     Background="{x:Null}">
                    <igWindows:TabItemEx.BorderBrush>
                        <SolidColorBrush Color="#FFD0D0BF"
                                         igThemes:ResourceWasher.WashGroup="BaseColor" />
                    </igWindows:TabItemEx.BorderBrush>
                    <smc:GridLayout Name="GrdLayout40">
                            <smc:DataGridView x:Name="GrdCt"
                                          PreviewEditModeEnded="GrdCt_EditModeEnded"
                                              PreviewGotKeyboardFocus="GrdCt_PreviewGotKeyboardFocus"
                                          AddNewRecord="GrdCt_AddNewRecord"
                                          RecordDelete="GrdCt_RecordDelete"
                                          KeyDown="GrdCt_KeyDown"
                                          KeyUp="GrdCt_KeyUp"
                                          TabIndex="120"
                                              Tag="{Binding Path=Value, Source={StaticResource IsInEditMode}}"
                                          IsVoucher="True">
                                <smc:DataGridView.Resources>
                                    <DataTemplate x:Key="ControlSearchAccount">
                                        <smc:AutoCompleteTextBox AllowEmty="False"
                                                             AllowWrong="False"
                                                             LookupMode="True"
                                                             Style="{StaticResource AutoCompleteTextBoxEditModeEnable}"
                                                             IsBorderTextBox="False"
                                                             ParentControl="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type Window}}}"
                                                             SysObj="{Binding Path=BindingSysObj, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type Window}}}"
                                                             Text="{smc:BindingEx Path=Value, RelativeSource={RelativeSource AncestorType={x:Type igDP:CellValuePresenter}, Mode=FindAncestor}}"
                                                             ListID="dmtk1" />
                                    </DataTemplate>
                                </smc:DataGridView.Resources>
                                <smc:DataGridView.FieldSettings>
                                    <igDP:FieldSettings SummaryDisplayArea="BottomFixed"
                                                    SummaryUIType="MultiSelect"
                                                    AllowEdit="True" />
                                </smc:DataGridView.FieldSettings>
                                <smc:DataGridView.FieldLayoutSettings>
                                    <igDP:FieldLayoutSettings HeaderPrefixAreaStyle="{StaticResource StyleHeaderPrefixArea}"
                                                          RecordSelectorStyle="{StaticResource StyleRecordSelector}"
                                                          AllowDelete="False"
                                                          
                                                          AutoGenerateFields="False" />
                                </smc:DataGridView.FieldLayoutSettings>
                                <smc:DataGridView.FieldLayouts>
                                    <igDP:FieldLayout>
                                        <igDP:FieldLayout.SummaryDefinitions>
                                            <smc:ExSummaryDefinition SourceFieldName="tien_nt"
                                                                 Calculator="Sum"
                                                                 Format="{Binding Path=Text, Source={StaticResource Voucher_Ma_nt0}, Mode=OneWay, Converter={StaticResource MaskNumeric}, ConverterParameter=M_IP_TIEN_NT}">
                                            </smc:ExSummaryDefinition>
                                            <smc:ExSummaryDefinition SourceFieldName="tien"
                                                                 Format="{Binding Path=Text, Source={StaticResource Voucher_Ma_nt0}, Mode=OneWay, Converter={StaticResource MaskNumeric}, ConverterParameter=M_IP_TIEN}"
                                                                 Calculator="Sum" >
                                            </smc:ExSummaryDefinition>
                                        </igDP:FieldLayout.SummaryDefinitions>
                                        <smc:NotEmptyField Label="Tk nợ"
                                                       Width="100"
                                                       Name="tk_vt"
                                                       FixedLocation="FixedToNearEdge">
                                            <igDP:Field.Settings>
                                                <igDP:FieldSettings LabelTextAlignment="Center"
                                                                AllowEdit="True">
                                                    <igDP:FieldSettings.EditorStyle>
                                                        <Style TargetType="{x:Type smc:ControlHostEditor}">
                                                            <Setter Property="EditDataTemplate"
                                                                Value="{StaticResource ControlSearchAccount}" />
                                                            <Setter Property="Template"
                                                                Value="{Binding Path=EditTemplate, RelativeSource={RelativeSource Self}}" />
                                                        </Style>
                                                    </igDP:FieldSettings.EditorStyle>
                                                </igDP:FieldSettings>
                                            </igDP:Field.Settings>
                                        </smc:NotEmptyField>
                                        <igDP:Field Label="Tên tài khoản"
                                                Name="ten_tk"
                                                Width="180"
                                                FixedLocation="FixedToNearEdge">
                                            <igDP:Field.Visibility>
                                                <MultiBinding Converter="{StaticResource VisibilityConverter}"
                                                              ConverterParameter="LANV">
                                                    <Binding Path="Value" Source="{StaticResource Voucher_Lan0}"/>
                                                </MultiBinding>
                                            </igDP:Field.Visibility>
                                            <igDP:Field.Settings>
                                                <igDP:FieldSettings LabelTextAlignment="Center"
                                                                AllowEdit="False"
                                                                EditAsType="{x:Type System:String}" />
                                            </igDP:Field.Settings>
                                        </igDP:Field>
                                        <igDP:Field Label="Tên tài khoản"
                                                Name="ten_tk2"
                                                Width="180"
                                                FixedLocation="FixedToNearEdge">
                                            <igDP:Field.Visibility>
                                                <MultiBinding Converter="{StaticResource VisibilityConverter}"
                                                              ConverterParameter="LANE">
                                                    <Binding Path="Value" Source="{StaticResource Voucher_Lan0}"/>
                                                </MultiBinding>
                                            </igDP:Field.Visibility>
                                            <igDP:Field.Settings>
                                                <igDP:FieldSettings LabelTextAlignment="Center"
                                                                AllowEdit="False"
                                                                EditAsType="{x:Type System:String}" />
                                            </igDP:Field.Settings>
                                        </igDP:Field>
                                        <igDP:Field Label="Tiền hàng"
                                                Name="tien_nt"
                                                Width="130">
                                            <igDP:Field.Settings>
                                                <igDP:FieldSettings AllowSummaries="True"
                                                                LabelTextAlignment="Center">
                                                    <igDP:FieldSettings.EditorStyle>
                                                        <Style TargetType="{x:Type smc:NumericTextBox}">
                                                            <Setter Property="Format"
                                                                Value="{Binding Path=Text, Source={StaticResource Voucher_Ma_nt0}, Mode=OneWay, Converter={StaticResource MaskNumeric}, ConverterParameter=M_IP_TIEN_NT}" />
                                                            <Setter Property="IsReadOnly"
                                                                Value="{smc:BindingEx Path=Value, Source={StaticResource IsInEditMode}, Converter={StaticResource BoolInverter}}" />
                                                        </Style>
                                                    </igDP:FieldSettings.EditorStyle>
                                                </igDP:FieldSettings>
                                            </igDP:Field.Settings>
                                        </igDP:Field>
                                        <igDP:Field Label="Diễn giải"
                                                Name="dien_giaii"
                                                Width="225">
                                            <igDP:Field.Settings>
                                                <igDP:FieldSettings EditAsType="{x:Type System:String}"
                                                                    AllowEdit="{smc:BindingEx Path=Value, Source={StaticResource IsInEditMode}}"
                                                                LabelTextAlignment="Center" />
                                            </igDP:Field.Settings>
                                        </igDP:Field>
                                        <igDP:Field Label="Tiền hàng"
                                                Name="tien"
                                                Width="130">
                                            <igDP:Field.Visibility>
                                                <MultiBinding Converter="{StaticResource VisibilityConverter}"
                                                              ConverterParameter="NotMaNt0">
                                                    <Binding Path="Value" Source="{StaticResource Voucher_Ma_nt0}"/>
                                                </MultiBinding>
                                            </igDP:Field.Visibility>
                                            <igDP:Field.Settings>
                                                <igDP:FieldSettings AllowSummaries="True"
                                                                    LabelTextAlignment="Center">
                                                    <igDP:FieldSettings.EditorStyle>
                                                        <Style TargetType="{x:Type smc:NumericTextBox}">
                                                            <Setter Property="IsReadOnly">
                                                                <Setter.Value>
                                                                    <MultiBinding Converter="{StaticResource ReadOnlyConverter}"
                                                                              ConverterParameter="CT;tien">
                                                                        <Binding  RelativeSource="{RelativeSource AncestorType={x:Type igDP:CellValuePresenter} , Mode=FindAncestor}"
                                                                              Path="Record.Cells[tien_nt].Value"
                                                                              Mode="OneWay" />
                                                                        <Binding Path="Value"
                                                                             Source="{StaticResource Ty_Gia_ValueChange}"
                                                                             Mode="OneWay" />
                                                                        <Binding Path="Value"
                                                                             Source="{StaticResource IsCheckedSua_tien}"
                                                                             Mode="OneWay" />
                                                                        <Binding Path="Value"
                                                                               Source="{StaticResource IsInEditMode}"
                                                                               Mode="OneWay" />
                                                                    </MultiBinding>
                                                                </Setter.Value>
                                                            </Setter>
                                                            <Setter Property="Format"
                                                                Value="{Binding Path=Text, Source={StaticResource Voucher_Ma_nt0}, Mode=OneWay, Converter={StaticResource MaskNumeric}, ConverterParameter=M_IP_TIEN}" />
                                                        </Style>
                                                    </igDP:FieldSettings.EditorStyle>
                                                </igDP:FieldSettings>
                                            </igDP:Field.Settings>
                                        </igDP:Field>
                                    </igDP:FieldLayout>
                                </smc:DataGridView.FieldLayouts>
                            </smc:DataGridView>
                    </smc:GridLayout>
                </igWindows:TabItemEx>

                <igWindows:TabItemEx Header="_2. Hđ thuế"
                                     x:Name="tabItem3"
                                     TabIndex="130">
                    <igWindows:TabItemEx.BorderBrush>
                        <SolidColorBrush Color="#FFD0D0BF"
                                         igThemes:ResourceWasher.WashGroup="BaseColor" />
                    </igWindows:TabItemEx.BorderBrush>
                    <smc:GridLayout Name="GrdLayoutThue">
                        <!--EditModeEnded="GrdCtgt_EditModeEnded"-->
                        <smc:DataGridView Margin="0,0,0,0"
                                          x:Name="GrdCtgt"
                                          TabIndex="130"
                                          KeyboardNavigation.TabNavigation="Continue"
                                          PreviewEditModeEnded="GrdCtgt_EditModeEnded"
                                          AddNewRecord="GrdCtgt_AddNewRecord"
                                          KeyDown="GrdCtgt_KeyDown"
                                          KeyUp="GrdCtgt_KeyUp"
                                          Tag="{Binding Path=Value, Source={StaticResource IsInEditMode}}"
                                          RecordDelete="GrdCtgt_RecordDelete"
                                          IsVoucher="True">
                            <smc:DataGridView.Resources>
                                <DataTemplate x:Key="ControlSearchKhachHang">
                                    <smc:AutoCompleteTextBox LookupMode="True"
                                                             AllowEmty="True"
                                                             AllowWrong="False"
                                                             IsBorderTextBox="False"
                                                             Style="{StaticResource AutoCompleteTextBoxEditModeEnable}"
                                                             ParentControl="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type Window}}}"
                                                             SysObj="{Binding Path=BindingSysObj, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type Window}}}"
                                                             Text="{smc:BindingEx Path=Value, RelativeSource={RelativeSource AncestorType={x:Type igDP:CellValuePresenter}, Mode=FindAncestor}}"
                                                             ListID="dmkh_thue" />
                                </DataTemplate>
                                <DataTemplate x:Key="ControlSearchMaSo">
                                    <smc:AutoCompleteTextBox LookupMode="True"
                                                             AllowEmty="False"
                                                             AllowWrong="False"
                                                             Style="{StaticResource AutoCompleteTextBoxEditModeEnable}"
                                                             IsBorderTextBox="False"
                                                             ParentControl="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type Window}}}"
                                                             SysObj="{Binding Path=BindingSysObj, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type Window}}}"
                                                             Text="{smc:BindingEx Path=Value, RelativeSource={RelativeSource AncestorType={x:Type igDP:CellValuePresenter}, Mode=FindAncestor}}"
                                                             ListID="dmms" />
                                </DataTemplate>
                                <DataTemplate x:Key="ControlSearchMaThue">
                                    <smc:AutoCompleteTextBox LookupMode="True"
                                                             AllowEmty="False"
                                                             AllowWrong="False"
                                                             Style="{StaticResource AutoCompleteTextBoxEditModeEnable}"
                                                             IsBorderTextBox="False"
                                                             ParentControl="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type Window}}}"
                                                             SysObj="{Binding Path=BindingSysObj, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type Window}}}"
                                                             Text="{smc:BindingEx Path=Value, RelativeSource={RelativeSource AncestorType={x:Type igDP:CellValuePresenter}, Mode=FindAncestor}}"
                                                             ListID="dmthue30" />
                                </DataTemplate>
                                <DataTemplate x:Key="ControlSearchTKThue">
                                    <smc:AutoCompleteTextBox LookupMode="True"
                                                             AllowEmty="True"
                                                             AllowWrong="False"
                                                             Style="{StaticResource AutoCompleteTextBoxEditModeEnable}"
                                                             IsBorderTextBox="False"
                                                             ParentControl="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type Window}}}"
                                                             SysObj="{Binding Path=BindingSysObj, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type Window}}}"
                                                             Text="{smc:BindingEx Path=Value, RelativeSource={RelativeSource AncestorType={x:Type igDP:CellValuePresenter}, Mode=FindAncestor}}"
                                                             ListID="dmtk1" />
                                </DataTemplate>
                                <DataTemplate x:Key="ControlSearchTKKH2">
                                    <smc:AutoCompleteTextBox LookupMode="True"
                                                             AllowEmty="False"
                                                             AllowWrong="False"
                                                             Style="{StaticResource AutoCompleteTextBoxEditModeEnable}"
                                                             IsBorderTextBox="False"
                                                             ParentControl="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type Window}}}"
                                                             SysObj="{Binding Path=BindingSysObj, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type Window}}}"
                                                             Text="{smc:BindingEx Path=Value, RelativeSource={RelativeSource AncestorType={x:Type igDP:CellValuePresenter}, Mode=FindAncestor}}"
                                                             ListID="dmkh">
                                        <smc:AutoCompleteTextBox.IsReadOnly>
                                            <MultiBinding Converter="{StaticResource ReadOnlyConverter}"
                                                          ConverterParameter="GT;ma_kh2">
                                                <Binding RelativeSource="{RelativeSource AncestorType={x:Type igDP:CellValuePresenter}, Mode=FindAncestor}"
                                                         Path="Record.Cells[tk_thue_cn].Value"
                                                         Mode="OneWay" />
                                                <Binding Path="Value"
                                                           Source="{StaticResource IsInEditMode}"
                                                           Mode="OneWay" />
                                            </MultiBinding>
                                        </smc:AutoCompleteTextBox.IsReadOnly>
                                    </smc:AutoCompleteTextBox>
                                </DataTemplate>
                                <DataTemplate x:Key="ControlFirst">
                                    <igEditors:XamTextEditor Text="{smc:BindingEx Path=Value, RelativeSource={RelativeSource AncestorType={x:Type igDP:CellValuePresenter}, Mode=FindAncestor}}">

                                    </igEditors:XamTextEditor>
                                </DataTemplate>
                            </smc:DataGridView.Resources>
                            <smc:DataGridView.FieldSettings>
                                <igDP:FieldSettings SummaryDisplayArea="BottomFixed"
                                                    SummaryUIType="MultiSelect"
                                                    AllowEdit="True" />
                            </smc:DataGridView.FieldSettings>
                            <smc:DataGridView.FieldLayoutSettings>
                                <igDP:FieldLayoutSettings AllowDelete="False"
                                                          AutoGenerateFields="False"
                                                          HeaderPrefixAreaStyle="{StaticResource StyleHeaderPrefixArea}"
                                                          RecordSelectorStyle="{StaticResource StyleRecordSelector}" />
                            </smc:DataGridView.FieldLayoutSettings>
                            <smc:DataGridView.FieldLayouts>
                                <igDP:FieldLayout>

                                    <igDP:FieldLayout.SummaryDefinitions>
                                        <smc:ExSummaryDefinition SourceFieldName="t_tien_nt"
                                                                 Format="{Binding Path=Text, Source={StaticResource Voucher_Ma_nt0}, Mode=OneWay, Converter={StaticResource MaskNumeric}, ConverterParameter=M_IP_TIEN_NT}"
                                                                 Calculator="Sum" />
                                        <smc:ExSummaryDefinition SourceFieldName="t_tien"
                                                                 Format="{Binding Path=Text, Source={StaticResource Voucher_Ma_nt0}, Mode=OneWay, Converter={StaticResource MaskNumeric}, ConverterParameter=M_IP_TIEN}"
                                                                 Calculator="Sum" />
                                        <smc:ExSummaryDefinition SourceFieldName="t_thue_nt"
                                                                 Format="{Binding Path=Text, Source={StaticResource Voucher_Ma_nt0}, Mode=OneWay, Converter={StaticResource MaskNumeric}, ConverterParameter=M_IP_TIEN_NT}"
                                                                 Calculator="Sum" />
                                        <smc:ExSummaryDefinition SourceFieldName="t_thue"
                                                                 Format="{Binding Path=Text, Source={StaticResource Voucher_Ma_nt0}, Mode=OneWay, Converter={StaticResource MaskNumeric}, ConverterParameter=M_IP_TIEN}"
                                                                 Calculator="Sum" />
                                    </igDP:FieldLayout.SummaryDefinitions>

                                    <igDP:Field Label="Nhóm"
                                                Name="ma_ms"
                                                FixedLocation="FixedToNearEdge"
                                                Width="60">
                                        <igDP:Field.Settings>
                                            <igDP:FieldSettings LabelTextAlignment="Center">
                                                <igDP:FieldSettings.EditorStyle>
                                                    <Style TargetType="{x:Type smc:ControlHostEditor}">
                                                        <Setter Property="EditDataTemplate"
                                                                Value="{StaticResource ControlSearchMaSo}" />
                                                        <Setter Property="Template"
                                                                Value="{Binding Path=EditTemplate, RelativeSource={RelativeSource Self}}" />
                                                    </Style>
                                                </igDP:FieldSettings.EditorStyle>
                                            </igDP:FieldSettings>
                                        </igDP:Field.Settings>
                                    </igDP:Field>
                                    <smc:NotEmptyField Label="Số c.từ"
                                                       Name="so_ct0"
                                                       FixedLocation="FixedToNearEdge"
                                                       Width="70">
                                        <igDP:Field.Settings>
                                            <igDP:FieldSettings EditAsType="{x:Type System:String}"
                                                                AllowEdit="{smc:BindingEx Path=Value, Source={StaticResource IsInEditMode}}"
                                                                LabelTextAlignment="Center" />
                                        </igDP:Field.Settings>
                                    </smc:NotEmptyField>
                                    <igDP:Field Label="Số seri"
                                                Name="so_seri0"
                                                Width="70">
                                        <igDP:Field.Settings>
                                            <igDP:FieldSettings EditAsType="{x:Type System:String}"
                                                                LabelTextAlignment="Center">
                                                <igDP:FieldSettings.EditorStyle>
                                                    <Style TargetType="{x:Type smc:ExTextEditor}">
                                                        <Setter Property="CharacterCasing"
                                                                Value="Upper" />
                                                        <Setter Property="IsReadOnly"
                                                                Value="{smc:BindingEx Path=Value, Source={StaticResource IsInEditMode}, Converter={StaticResource BoolInverter}}" />
                                                    </Style>
                                                </igDP:FieldSettings.EditorStyle>
                                            </igDP:FieldSettings>
                                        </igDP:Field.Settings>
                                    </igDP:Field>
                                    <igDP:Field Label="Ngày c.từ"
                                                Name="ngay_ct0"
                                                Width="100">
                                        <igDP:Field.Settings>
                                            <igDP:FieldSettings EditorType="{x:Type smc:DateTextBox}"
                                                                AllowEdit="{smc:BindingEx Path=Value, Source={StaticResource IsInEditMode}}"
                                                                LabelTextAlignment="Center" />
                                        </igDP:Field.Settings>
                                    </igDP:Field>
                                    <igDP:Field Label="Mã khách"
                                                Name="ma_kh"
                                                Width="100">
                                        <igDP:Field.Settings>
                                            <igDP:FieldSettings LabelTextAlignment="Center">
                                                <igDP:FieldSettings.EditorStyle>
                                                    <Style TargetType="{x:Type smc:ControlHostEditor}">
                                                        <Setter Property="EditDataTemplate"
                                                                Value="{StaticResource ControlSearchKhachHang}" />
                                                        <Setter Property="Template"
                                                                Value="{Binding Path=EditTemplate, RelativeSource={RelativeSource Self}}" />
                                                    </Style>
                                                </igDP:FieldSettings.EditorStyle>
                                            </igDP:FieldSettings>
                                        </igDP:Field.Settings>

                                    </igDP:Field>
                                    <igDP:Field Label="Tên khách"
                                                Name="ten_kh"
                                                Width="180">
                                        <igDP:Field.Settings>
                                            <igDP:FieldSettings LabelTextAlignment="Center"
                                                                
                                                                EditAsType="{x:Type System:String}" >
                                                <igDP:FieldSettings.EditorStyle>
                                                    <Style TargetType="{x:Type igEditors:XamTextEditor}">
                                                        <Setter Property="IsReadOnly">
                                                            <Setter.Value>
                                                                <MultiBinding Converter="{StaticResource ReadOnlyConverter}"
                                                                              ConverterParameter="GT;ten_kh">
                                                                    <Binding RelativeSource="{RelativeSource AncestorType={x:Type igDP:CellValuePresenter}, Mode=FindAncestor}"
                                                                             Path="Record.Cells[ma_kh].Value"
                                                                             Mode="OneWay" />
                                                                    <Binding Path="Value"
                                                                               Source="{StaticResource IsInEditMode}"
                                                                               Mode="OneWay" />
                                                                </MultiBinding>
                                                            </Setter.Value>
                                                        </Setter>
                                                    </Style>
                                                </igDP:FieldSettings.EditorStyle>

                                            </igDP:FieldSettings>
                                        </igDP:Field.Settings>
                                    </igDP:Field>
                                    <igDP:Field Label="Địa chỉ"
                                                Name="dia_chi"
                                                Width="180">
                                        <igDP:Field.Settings>
                                            <igDP:FieldSettings LabelTextAlignment="Center"
                                                                EditAsType="{x:Type System:String}"
                                                                >
                                                <igDP:FieldSettings.EditorStyle>
                                                    <Style TargetType="{x:Type igEditors:XamTextEditor}">
                                                        <Setter Property="IsReadOnly">
                                                            <Setter.Value>
                                                                <MultiBinding Converter="{StaticResource ReadOnlyConverter}"
                                                                              ConverterParameter="GT;dia_chi">
                                                                    <Binding RelativeSource="{RelativeSource AncestorType={x:Type igDP:CellValuePresenter}, Mode=FindAncestor}"
                                                                             Path="Record.Cells[dia_chi_dmkh].Value"
                                                                             Mode="OneWay" />
                                                                    <Binding Path="Value" Source="{StaticResource IsInEditMode}"/>
                                                                    <Binding RelativeSource="{RelativeSource AncestorType={x:Type igDP:CellValuePresenter}, Mode=FindAncestor}"
                                                                             Path="Record.Cells[ma_kh].Value"
                                                                             Mode="OneWay" />
                                                                    <Binding Path="Value"
                                                                               Source="{StaticResource IsInEditMode}"
                                                                               Mode="OneWay" />
                                                                </MultiBinding>
                                                            </Setter.Value>
                                                        </Setter>

                                                    </Style>
                                                </igDP:FieldSettings.EditorStyle>


                                            </igDP:FieldSettings>
                                        </igDP:Field.Settings>
                                    </igDP:Field>
                                    <igDP:Field Label="Mã số thuế"
                                                Name="ma_so_thue"
                                                Width="100">
                                        <igDP:Field.Settings>
                                            <igDP:FieldSettings LabelTextAlignment="Center"
                                                                
                                                                EditAsType="{x:Type System:String}" >
                                                <igDP:FieldSettings.EditorStyle>
                                                    <Style TargetType="{x:Type igEditors:XamTextEditor}">
                                                        <Setter Property="IsReadOnly">
                                                            <Setter.Value>
                                                                <MultiBinding Converter="{StaticResource ReadOnlyConverter}"
                                                                              ConverterParameter="GT;ma_so_thue">
                                                                    <Binding RelativeSource="{RelativeSource AncestorType={x:Type igDP:CellValuePresenter}, Mode=FindAncestor}"
                                                                             Path="Record.Cells[ma_so_thue_dmkh].Value"
                                                                             Mode="OneWay" />
                                                                    <Binding Path="Value" Source="{StaticResource IsInEditMode}"/>
                                                                    <Binding RelativeSource="{RelativeSource AncestorType={x:Type igDP:CellValuePresenter}, Mode=FindAncestor}"
                                                                             Path="Record.Cells[ma_kh].Value"
                                                                             Mode="OneWay" />
                                                                    <Binding Path="Value"
                                                                               Source="{StaticResource IsInEditMode}"
                                                                               Mode="OneWay" />
                                                                </MultiBinding>
                                                            </Setter.Value>
                                                        </Setter>
                                                    </Style>
                                                </igDP:FieldSettings.EditorStyle>
                                            </igDP:FieldSettings>
                                        </igDP:Field.Settings>
                                    </igDP:Field>
                                    <igDP:Field Label="Hàng hóa, dịch vụ"
                                                Name="ten_vt"
                                                Width="270">
                                        <igDP:Field.Settings>
                                            <igDP:FieldSettings EditAsType="{x:Type System:String}"
                                                                AllowEdit="{smc:BindingEx Path=Value, Source={StaticResource IsInEditMode}}"
                                                                LabelTextAlignment="Center" />
                                        </igDP:Field.Settings>
                                    </igDP:Field>
                                    <igDP:Field Name="t_tien_nt"
                                                Width="130">
                                        <igDP:Field.Settings>
                                            <igDP:FieldSettings AllowSummaries="True"
                                                                LabelTextAlignment="Center"
                                                                EditAsType="{x:Type System:Double}">
                                                <igDP:FieldSettings.EditorStyle>
                                                    <Style TargetType="{x:Type smc:NumericTextBox}">
                                                        <Setter Property="Format"
                                                                Value="{Binding Path=Text, Source={StaticResource Voucher_Ma_nt0}, Mode=OneWay, Converter={StaticResource MaskNumeric}, ConverterParameter=M_IP_TIEN_NT}" />
                                                        <Setter Property="IsReadOnly"
                                                                Value="{smc:BindingEx Path=Value, Source={StaticResource IsInEditMode}, Converter={StaticResource BoolInverter}}" />
                                                    </Style>
                                                </igDP:FieldSettings.EditorStyle>
                                            </igDP:FieldSettings>
                                        </igDP:Field.Settings>
                                    </igDP:Field>
                                    <igDP:Field Name="t_tien"
                                                Width="130">
                                        <igDP:Field.Visibility>
                                            <MultiBinding Converter="{StaticResource VisibilityConverter}"
                                                              ConverterParameter="NotMaNt0">
                                                <Binding Path="Value" Source="{StaticResource Voucher_Ma_nt0}"/>
                                            </MultiBinding>
                                        </igDP:Field.Visibility>
                                        <igDP:Field.Settings>
                                            <igDP:FieldSettings AllowSummaries="True"
                                                                LabelTextAlignment="Center"
                                                                EditAsType="{x:Type System:Double}">
                                                <igDP:FieldSettings.EditorStyle>
                                                    <Style TargetType="{x:Type smc:NumericTextBox}">
                                                        <Setter Property="Format"
                                                                Value="{Binding Path=Text, Source={StaticResource Voucher_Ma_nt0}, Mode=OneWay, Converter={StaticResource MaskNumeric}, ConverterParameter=M_IP_TIEN}" />
                                                        <Setter Property="IsReadOnly"
                                                                Value="{smc:BindingEx Path=Value, Source={StaticResource IsInEditMode}, Converter={StaticResource BoolInverter}}" />
                                                    </Style>
                                                </igDP:FieldSettings.EditorStyle>
                                            </igDP:FieldSettings>
                                        </igDP:Field.Settings>
                                    </igDP:Field>
                                    <igDP:Field Label="Mã thuế"
                                                Name="ma_thue"
                                                Width="70">
                                        <igDP:Field.Settings>
                                            <igDP:FieldSettings LabelTextAlignment="Center">
                                                <igDP:FieldSettings.EditorStyle>
                                                    <Style TargetType="{x:Type smc:ControlHostEditor}">
                                                        <Setter Property="EditDataTemplate"
                                                                Value="{StaticResource ControlSearchMaThue}" />
                                                        <Setter Property="Template"
                                                                Value="{Binding Path=EditTemplate, RelativeSource={RelativeSource Self}}" />
                                                    </Style>
                                                </igDP:FieldSettings.EditorStyle>
                                            </igDP:FieldSettings>
                                        </igDP:Field.Settings>
                                    </igDP:Field>
                                    <igDP:Field Label="T.suất (%)"
                                                Name="thue_suat"
                                                Width="80">
                                        <igDP:Field.Settings>
                                            <igDP:FieldSettings AllowEdit="False"
                                                                LabelTextAlignment="Center"
                                                                EditAsType="{x:Type System:Double}">
                                                <igDP:FieldSettings.EditorStyle>
                                                    <Style TargetType="{x:Type smc:NumericTextBox}">
                                                    </Style>
                                                </igDP:FieldSettings.EditorStyle>
                                            </igDP:FieldSettings>
                                        </igDP:Field.Settings>
                                    </igDP:Field>
                                    <igDP:Field  Name="t_thue_nt"
                                                 Width="130">
                                        <igDP:Field.Settings>
                                            <igDP:FieldSettings AllowSummaries="True"
                                                                LabelTextAlignment="Center"
                                                                EditAsType="{x:Type System:Double}">
                                                <igDP:FieldSettings.EditorStyle>
                                                    <Style TargetType="{x:Type smc:NumericTextBox}">
                                                        <Setter Property="Format"
                                                                Value="{Binding Path=Text, Source={StaticResource Voucher_Ma_nt0}, Mode=OneWay, Converter={StaticResource MaskNumeric}, ConverterParameter=M_IP_TIEN_NT}" />
                                                        <Setter Property="IsReadOnly"
                                                                Value="{smc:BindingEx Path=Value, Source={StaticResource IsInEditMode}, Converter={StaticResource BoolInverter}}" />
                                                    </Style>
                                                </igDP:FieldSettings.EditorStyle>
                                            </igDP:FieldSettings>
                                        </igDP:Field.Settings>
                                    </igDP:Field>
                                    <igDP:Field Name="t_thue"
                                                Width="130">
                                        <igDP:Field.Visibility>
                                            <MultiBinding Converter="{StaticResource VisibilityConverter}"
                                                              ConverterParameter="NotMaNt0">
                                                <Binding Path="Value" Source="{StaticResource Voucher_Ma_nt0}"/>
                                            </MultiBinding>
                                        </igDP:Field.Visibility>
                                        <igDP:Field.Settings>
                                            <igDP:FieldSettings AllowSummaries="True"
                                                                LabelTextAlignment="Center">
                                                <igDP:FieldSettings.EditorStyle>
                                                    <Style TargetType="{x:Type smc:NumericTextBox}">
                                                        <!--<Setter Property="IsReadOnly">
                                                            <Setter.Value>
                                                                <MultiBinding Converter="{StaticResource ReadOnlyCT}"
                                                                              ConverterParameter="t_thue">
                                                                    <Binding  RelativeSource="{RelativeSource AncestorType={x:Type igDP:CellValuePresenter} , Mode=FindAncestor}"
                                                                              Path="Record.Cells.[t_tien].Value"
                                                                              Mode="OneWay" />
                                                                    <Binding  RelativeSource="{RelativeSource AncestorType={x:Type igDP:CellValuePresenter} , Mode=FindAncestor}"
                                                                              Path="Record.Cells[thue_suat].Value"
                                                                              Mode="OneWay" />
                                                                    <Binding Path="Value"
                                                                             Source="{StaticResource IsCheckedSua_tien}"
                                                                             Mode="OneWay" />
                                                                </MultiBinding>
                                                            </Setter.Value>
                                                        </Setter>-->
                                                        <Setter Property="Format"
                                                                Value="{Binding Path=Text, Source={StaticResource Voucher_Ma_nt0}, Mode=OneWay, Converter={StaticResource MaskNumeric}, ConverterParameter=M_IP_TIEN}" />
                                                        <Setter Property="IsReadOnly"
                                                                Value="{smc:BindingEx Path=Value, Source={StaticResource IsInEditMode}, Converter={StaticResource BoolInverter}}" />
                                                    </Style>
                                                </igDP:FieldSettings.EditorStyle>
                                            </igDP:FieldSettings>
                                        </igDP:Field.Settings>
                                    </igDP:Field>
                                    <igDP:Field Label="Hạn tt"
                                                Name="han_tt"
                                                Width="60">
                                        <igDP:Field.Settings>
                                            <igDP:FieldSettings LabelTextAlignment="Center">
                                                <igDP:FieldSettings.EditorStyle>
                                                    <Style TargetType="{x:Type smc:NumericTextBox}">
                                                        <Setter Property="Format"
                                                                Value="#,0" />
                                                        <Setter Property="IsReadOnly"
                                                                Value="{smc:BindingEx Path=Value, Source={StaticResource IsInEditMode}, Converter={StaticResource BoolInverter}}" />
                                                    </Style>
                                                </igDP:FieldSettings.EditorStyle>
                                            </igDP:FieldSettings>
                                        </igDP:Field.Settings>
                                    </igDP:Field>

                                    <!--cột dùng để biết tk_thue_no có là tk công nợ hay không?-->
                                    <igDP:Field Name="tk_thue_cn"
                                                Width="0"
                                                Visibility="Hidden">
                                        <igDP:Field.Settings>
                                            <igDP:FieldSettings CellMaxWidth="0"
                                                                EditAsType="{x:Type System:Decimal}"
                                                                EditorType="{x:Type smc:NumericTextBox}" />
                                        </igDP:Field.Settings>
                                    </igDP:Field>
                                    
                                    <igDP:Field Name="dia_chi_dmkh"
                                                Width="0"
                                                Visibility="Hidden">
                                        <igDP:Field.Settings>
                                            <igDP:FieldSettings CellMaxWidth="0"
                                                                EditAsType="{x:Type System:Decimal}"
                                                                EditorType="{x:Type smc:NumericTextBox}" />
                                        </igDP:Field.Settings>
                                    </igDP:Field>

                                    <igDP:Field Name="ma_so_thue_dmkh"
                                                Width="0"
                                                Visibility="Hidden">
                                        <igDP:Field.Settings>
                                            <igDP:FieldSettings CellMaxWidth="0"
                                                                EditAsType="{x:Type System:Decimal}"
                                                                EditorType="{x:Type smc:NumericTextBox}" />
                                        </igDP:Field.Settings>
                                    </igDP:Field>

                                    <igDP:Field Label="Tk thuế"
                                                Name="tk_thue_no"
                                                Width="100">
                                        <igDP:Field.Settings>
                                            <igDP:FieldSettings LabelTextAlignment="Center">
                                                <igDP:FieldSettings.EditorStyle>
                                                    <Style TargetType="{x:Type smc:ControlHostEditor}">
                                                        <Setter Property="EditDataTemplate"
                                                                Value="{StaticResource ControlSearchTKThue}" />
                                                        <Setter Property="Template"
                                                                Value="{Binding Path=EditTemplate, RelativeSource={RelativeSource Self}}" />
                                                    </Style>
                                                </igDP:FieldSettings.EditorStyle>
                                            </igDP:FieldSettings>
                                        </igDP:Field.Settings>
                                    </igDP:Field>
                                    <igDP:Field Label="Cục thuế"
                                                Name="ma_kh2"
                                                Width="100">
                                        <igDP:Field.Settings>
                                            <igDP:FieldSettings LabelTextAlignment="Center">
                                                <igDP:FieldSettings.EditorStyle>
                                                    <Style TargetType="{x:Type smc:ControlHostEditor}">
                                                        <Setter Property="EditDataTemplate"
                                                                Value="{StaticResource ControlSearchTKKH2}" />
                                                        <Setter Property="Template"
                                                                Value="{Binding Path=EditTemplate, RelativeSource={RelativeSource Self}}" />
                                                    </Style>
                                                </igDP:FieldSettings.EditorStyle>
                                            </igDP:FieldSettings>
                                        </igDP:Field.Settings>
                                    </igDP:Field>
                                    <igDP:Field Label="Ghi chú"
                                                Name="ghi_chu"
                                                Width="180">
                                        <igDP:Field.Settings>
                                            <igDP:FieldSettings EditAsType="{x:Type System:String}"
                                                                AllowEdit="{smc:BindingEx Path=Value, Source={StaticResource IsInEditMode}}"
                                                                LabelTextAlignment="Center" />
                                        </igDP:Field.Settings>
                                    </igDP:Field>

                                </igDP:FieldLayout>
                            </smc:DataGridView.FieldLayouts>
                        </smc:DataGridView>
                    </smc:GridLayout>
                </igWindows:TabItemEx>
            </igWindows:XamTabControl>
            <StackPanel HorizontalAlignment="Right"
                        VerticalAlignment="Top"
                        Name="GrdIsChecked"
                        Orientation="Horizontal">
                <CheckBox Name="ChkSuaTien"
                          Content="Sửa trường tiền"
                          IsTabStop="False"
                          Click="ChkSuaTien_Click"
                          Margin="0,0,12,0"
                          IsChecked="{smc:BindingEx sua_tien, Converter={StaticResource IsCheckedConverter}}"
                          Style="{StaticResource CheckBoxEditModeEnable}" />
                <TextBlock Height="19"
                           Text="Ctrl+Tab - Ra khỏi chi tiết"
                           Name="textBlock2"
                           Style="{StaticResource ContentTextStyle}"
                           Margin="0,4,0,0" />
            </StackPanel>
        </smc:GridLayout>
        <GroupBox Header="Tổng cộng"
                  Name="GroupTotal"
                  Margin="12,0,12,12"
                  Grid.Column="0"
                  Grid.Row="3">
            <smc:GridLayout Name="GridLayoutTotalPH">
                <smc:GridLayout x:Name="GrdLayout20"
                                Grid.Row="0"
                                RowCount="3"
                                ColumnCount="6"
                                ColumnWidths="210*,240,110,140,12,140"
                                HeightPerRow="25"
                                Grid.RowSpan="1">
                    <smc:GridLayout.Visibility>
                        <MultiBinding Converter="{StaticResource VisibilityConverter}"
                                      ConverterParameter="MaNt0">
                            <Binding Path="Value" Source="{StaticResource Voucher_Ma_nt0}"/>
                        </MultiBinding>
                    </smc:GridLayout.Visibility>
                    <TextBlock Text="Tiền hàng"
                               x:Name="lblT_Tien"
                               Grid.Column="2"
                               Grid.Row="0"
                               Margin="12,0" />
                    <smc:NumericTextBox x:Name="txtT_Tien"
                                        IsEnabled="False"
                                        Value="{smc:BindingEx Path=t_tien_nt}"
                                        Grid.Row="0"
                                        Format="{Binding Path=Text, Source={StaticResource Voucher_Ma_nt0}, Mode=OneWay, Converter={StaticResource MaskNumeric}, ConverterParameter=M_IP_TIEN}"
                                        Grid.Column="3" />
                    <TextBlock Text="Tiền thuế"
                               Grid.Column="2"
                               x:Name="lblT_Thue"
                               Grid.Row="1"
                               Margin="12,0" />
                    <smc:NumericTextBox x:Name="txtT_thue"
                                        IsEnabled="False"
                                        Grid.Row="1"
                                        Value="{smc:BindingEx Path=t_thue_nt}"
                                        Format="{Binding Path=Text, Source={StaticResource Voucher_Ma_nt0}, Mode=OneWay, Converter={StaticResource MaskNumeric}, ConverterParameter=M_IP_TIEN}"
                                        Grid.Column="3" />
                    <TextBlock Text="Tổng tt"
                               x:Name="lblT_TT"
                               Grid.Column="2"
                               Grid.Row="2"
                               Margin="12,0" />
                    <smc:NumericTextBox x:Name="txtT_tt"
                                        IsEnabled="False"
                                        Value="{smc:BindingEx Path=t_tt_nt}"
                                        Format="{Binding Path=Text, Source={StaticResource Voucher_Ma_nt0}, Mode=OneWay, Converter={StaticResource MaskNumeric}, ConverterParameter=M_IP_TIEN}"
                                        Grid.Row="2"
                                        Grid.Column="3" />
                </smc:GridLayout>
                <smc:GridLayout x:Name="GrdLayout21"
                                Grid.Row="0"
                                RowCount="3"
                                ColumnCount="6"
                                ColumnWidths="120*,240,110,140,12,140"
                                HeightPerRow="25"
                                Grid.RowSpan="1">
                    <smc:GridLayout.Visibility>
                        <MultiBinding Converter="{StaticResource VisibilityConverter}"
                                      ConverterParameter="NotMaNt0">
                            <Binding Path="Value" Source="{StaticResource Voucher_Ma_nt0}"/>
                        </MultiBinding>
                    </smc:GridLayout.Visibility>
                    
                    <TextBlock Text="Tiền hàng"
                               Grid.Column="2"
                               x:Name="lblT_Tien_NT"
                               Grid.Row="0"
                               Margin="12,0" />
                    <smc:NumericTextBox x:Name="txtT_Tien_nt"
                                        IsEnabled="False"
                                        Value="{smc:BindingEx Path=t_tien_nt}"
                                        Grid.Column="3"
                                        Format="{Binding Path=Text, Source={StaticResource Voucher_Ma_nt0}, Mode=OneWay, Converter={StaticResource MaskNumeric}, ConverterParameter=M_IP_TIEN_NT}"
                                        Grid.Row="0" />

                    <TextBlock Text="Tiền thuế"
                               Grid.Column="2"
                               x:Name="lblT_Thue_NT"
                               Grid.Row="1"
                               Margin="12,0" />
                    <smc:NumericTextBox x:Name="txtT_thue_nt"
                                        IsEnabled="False"
                                        Grid.Row="1"
                                        Format="{Binding Path=Text, Source={StaticResource Voucher_Ma_nt0}, Mode=OneWay, Converter={StaticResource MaskNumeric}, ConverterParameter=M_IP_TIEN_NT}"
                                        Value="{smc:BindingEx Path=t_thue_nt}"
                                        Grid.Column="3" />
                    <TextBlock Text="Tổng tt"
                               Grid.Column="2"
                               x:Name="lblT_Tt_NT"
                               Grid.Row="2"
                               Margin="12,0" />
                    <smc:NumericTextBox x:Name="txtT_tt_nt"
                                        IsEnabled="False"
                                        Format="{Binding Path=Text, Source={StaticResource Voucher_Ma_nt0}, Mode=OneWay, Converter={StaticResource MaskNumeric}, ConverterParameter=M_IP_TIEN_NT}"
                                        Value="{smc:BindingEx Path=t_tt_nt}"
                                        Grid.Row="2"
                                        Grid.Column="3" />
                    <smc:NumericTextBox x:Name="txtT_Tien_Nt0"
                                        IsEnabled="False"
                                        Format="{Binding Path=Text, Source={StaticResource Voucher_Ma_nt0}, Mode=OneWay, Converter={StaticResource MaskNumeric}, ConverterParameter=M_IP_TIEN}"
                                        Value="{smc:BindingEx Path=t_tien}"
                                        Grid.Row="0"
                                        Grid.Column="5" />
                    <smc:NumericTextBox x:Name="txtT_thue_Nt0"
                                        IsEnabled="False"
                                        Format="{Binding Path=Text, Source={StaticResource Voucher_Ma_nt0}, Mode=OneWay, Converter={StaticResource MaskNumeric}, ConverterParameter=M_IP_TIEN}"
                                        Grid.Row="1"
                                        Value="{smc:BindingEx Path=t_thue}"
                                        Grid.Column="6" />
                    <smc:NumericTextBox x:Name="txtT_tt_Nt0"
                                        IsEnabled="False"
                                        Format="{Binding Path=Text, Source={StaticResource Voucher_Ma_nt0}, Mode=OneWay, Converter={StaticResource MaskNumeric}, ConverterParameter=M_IP_TIEN}"
                                        Value="{smc:BindingEx Path=t_tt}"
                                        Grid.Row="2"
                                        Grid.Column="6" />

                </smc:GridLayout>
                <smc:GridLayout                         Grid.Row="0"
                                                        Name="GridLayoutTotal"
                                                        RowCount="3"
                                                        ColumnCount="6"
                                                        ColumnWidths="120*,240,110,140,12,140"
                                                        HeightPerRow="25"
                                                        Grid.RowSpan="1">
                    <smc:GridLayout   Grid.Row="0"
                                      Grid.RowSpan="3"
                                      Margin="0,0,12,0"
                                      ColumnCount="2"
                                      ColumnWidths="25,210"
                                      Name="GridLayoutGhiChu">
                        <!--Style="{StaticResource ContentTextStyle}"-->
                        <smc:ExTextBox Grid.Column="0"
                                 Grid.Row="0"
                                 x:Name="tblGhi_chu"
                                 Text="Ghi chú"
                                       Text2="Note"
                                 Height="25"
                                 Width="70"
                                 IsReadOnly="True"
                                 TextAlignment="Right"
                                 VerticalAlignment="Center">
                            <smc:ExTextBox.LayoutTransform>
                                <RotateTransform Angle="-90" />
                            </smc:ExTextBox.LayoutTransform>
                        </smc:ExTextBox>
                        <TextBox x:Name="txtghi_chu"
                                 Grid.Column="1"
                                 Grid.Row="0"
                                 Height="Auto"
                                 Margin="0,2.5,0,2.5"
                                 IsTabStop="False"
                                 TabIndex="140"
                                 VerticalScrollBarVisibility="Auto"
                                 TextWrapping="Wrap"
                                 Text="{smc:BindingEx ghi_chu0}"
                                 Style="{StaticResource TextBoxEditModeEnable}"
                                 PreviewKeyDown="txtghi_chu_PreviewKeyDown" />
                    </smc:GridLayout>
                    <smc:GridLayout ColumnCount="2"
                                    ColumnWidths="100,140"
                                    x:Name="GrdLayout22"
                                    RowCount="3"
                                    Grid.RowSpan="3"
                                    Grid.Column="1"
                                    d:LayoutOverrides="GridBox">
                        <TextBlock Grid.Column="0"
                                   Grid.Row="2"
                                   x:Name="tblHan_ck"
                                   Style="{StaticResource ContentTextStyle}"
                                   Text="Mã đ.khoản tt" />
                        
                        <smc:AutoCompleteTextBox Name="txtHan_ck"
                                             Grid.Column="1"
                                             Grid.Row="2"
                                             Text="{smc:BindingEx Path=ma_thck}"
                                             ParentControl="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType=smvc:FormTrans}}"
                                             SysObj="{Binding Path=BindingSysObj,RelativeSource={RelativeSource FindAncestor, AncestorType=smvc:FormTrans}}"
                                             AllowEmty="True"
                                             AllowWrong="False"
                                             ListID="dmthck"
                                             Style="{StaticResource AutoCompleteTextBoxEditModeEnable}"
                                             PreviewLostFocus="txtHan_ck_PreviewLostFocus">
                        </smc:AutoCompleteTextBox>
                        
                        <TextBlock Grid.Column="0"
                                   Grid.Row="1"
                                   x:Name="tbltk_thue_no"
                                   Style="{StaticResource ContentTextStyle}"
                                   Text="Tk thuế" />
                        <TextBox Grid.Column="1"
                                 Grid.Row="1"
                                 IsReadOnly="True"
                                 IsTabStop="False"
                                 x:Name="txttk_thue_no"
                                 Style="{StaticResource TextBoxStyle}"
                                 Text="{smc:BindingEx Path=tk_thue_no}"
                                 Margin="0,2,0,0" />
                    </smc:GridLayout>
                </smc:GridLayout>
            </smc:GridLayout>
        </GroupBox>
    </smc:GridLayout>
</smvc:FormTrans>
