<smvc:FormTrans x:Class="SOCTPNF.FrmSOCTPNF"
                xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                xmlns:src="clr-namespace:SOCTPNF"
                xmlns:igWindows="http://infragistics.com/Windows"
                xmlns:smc="http://Fast.com.vn/Sm/Windows/Controls"
                xmlns:smvc="clr-namespace:SmVoucherLib;assembly=SmVoucherLib"
                xmlns:System="clr-namespace:System;assembly=mscorlib"
                xmlns:igEditors="http://infragistics.com/Editors"
                xmlns:igDP="http://infragistics.com/DataPresenter"
                xmlns:diagnostics="clr-namespace:System.Diagnostics;assembly=WindowsBase"
                Title="Phieu nhap hang ban bi tra lai"
                LanguageID="SOCTPNF_3"
                Height="700"
                Width="960"
                Theme="Voucher"
                x:Name="FormMain"
                xmlns:sys="clr-namespace:System;assembly=mscorlib"
                WindowStartupLocation="CenterScreen"
                xmlns:igThemes="http://infragistics.com/Themes"
                xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
                xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
                AssignMaxLengthControlList = "txtSo_ct;txtDia_chi;txtOng_ba;txtDien_giai;txtghi_chu"
                mc:Ignorable="d"
                Cm_Dau="V_Dau"
                Cm_Truoc="V_Truoc"
                Cm_Sau="V_Sau"
                Cm_Cuoi="V_Cuoi"
                Cm_Moi="V_Moi"
                Cm_Sua="V_Sua"
                Cm_Copy="V_Copy"
                Cm_Nhan="V_Nhan"
                Cm_Huy="V_Huy"
                Cm_Xoa="V_Xoa"
                Cm_Xem="V_Xem"
                Cm_Tim="V_Tim"
                Cm_In="V_In"
                EditModeEnded="FormMain_EditModeEnded">
    <smvc:FormTrans.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <smc:CachedResourceDictionary Source="pack://application:,,,/SmStyle;component/TextBlockStyles.xaml" />
                <smc:CachedResourceDictionary Source="pack://application:,,,/SmStyle;component/TextBoxStyles.xaml" />
                <smc:CachedResourceDictionary Source="pack://application:,,,/SmStyle;component/ButtonStyles.xaml" />
                <smc:CachedResourceDictionary Source="pack://application:,,,/SmStyle;component/DataGridViewStyles.xaml" />
                <smc:CachedResourceDictionary Source="pack://application:,,,/SmStyle;component/GroupBoxStyles.xaml" />
                <smc:CachedResourceDictionary Source="pack://application:,,,/SmStyle;component/CheckBoxStyles.xaml" />
                <smc:CachedResourceDictionary Source="pack://application:,,,/SmStyle;component/NumericTextBoxStyles.xaml" />
                <smc:CachedResourceDictionary Source="pack://application:,,,/SmStyle;component/MaskedTextBoxStyles.xaml" />
                <smc:CachedResourceDictionary Source="pack://application:,,,/SmStyle;component/AutoCompleteTextBoxStyles.xaml" />
                <smc:CachedResourceDictionary Source="pack://application:,,,/SmStyle;component/XamComboEditorStyles.xaml" />
                <smc:CachedResourceDictionary Source="pack://application:,,,/SmStyle;component/ExRateTextBoxStyles.xaml" />
                <smc:CachedResourceDictionary Source="pack://application:,,,/SmStyle;component/DateTextBoxStyles.xaml" />
                <smc:CachedResourceDictionary Source="pack://application:,,,/SmStyle;component/TabItemExStyles.xaml" />
            </ResourceDictionary.MergedDictionaries>
            <smc:BoolInverter x:Key="BoolInverter"/>
            <smvc:BindingVisibility x:Key="VisibilityConverter"/>
            <!--<src:NotMaNt0Converter x:Key="NotMaNt0Voucher" />-->

            <smvc:BindingStatusVoucher x:Key="StatusVoucher" />
            <!--<src:BindingStatusVoucher x:Key="StatusVoucher" />-->
            
            <smc:CheckBoxConverter x:Key="IsCheckedConverter" />
            <!--<src:CheckBoxConverter x:Key="IsCheckedConverter" />
            <src:SuaThueConverter x:Key="IsSuaThueConverter" />-->

            <src:BindingReadonly x:Key="ReadOnlyConverter" />
            <!--<src:IsReadOnlyPh x:Key="ReadOnlyPH" />
            <src:BindingReadOnly x:Key="IsReadOnlyField" />
            <src:IsEnablePh x:Key="EnablePH" />-->

            <src:BindingTextStatus x:Key="TextStatus" />

            <smvc:FormatMaskNumberConverter x:Key="MaskNumeric" />
            <smc:CodeValueBindingObject x:Key="Voucher_Ma_nt0" />
            <smc:CodeValueBindingObject x:Key="Voucher_Lan0" />
            <smc:CodeValueBindingObject x:Key="IsInEditMode"
                                        Value="False" />
            <smc:CodeValueBindingObject x:Key="IsCheckedSua_tien"
                                    Value="False" />
            <smc:CodeValueBindingObject x:Key="IsCheckedPn_gia_tb"
                                    Value="False" />

            <!--ButtonEditModeEnable-->
            <Style x:Key="ButtonEditModeEnable"
                   TargetType="{x:Type Button}"
                   BasedOn="{StaticResource ButtonStyle}">
                <Style.Triggers>

                    <DataTrigger Binding="{smc:BindingEx Path=Value, Source={StaticResource IsInEditMode}}"
                                 Value="False">
                        <Setter Property="Button.IsEnabled"
                                Value="False" />
                    </DataTrigger>
                </Style.Triggers>
            </Style>

            <!--TextBoxEditModeEnable-->
            <Style x:Key="TextBoxEditModeEnable"
                   TargetType="{x:Type TextBox}"
                   BasedOn="{StaticResource TextBoxStyle}">
                <Style.Triggers>

                    <DataTrigger Binding="{smc:BindingEx Path=Value, Source={StaticResource IsInEditMode}}"
                                 Value="False">
                        <Setter Property="IsReadOnly"
                                Value="True" />
                    </DataTrigger>
                </Style.Triggers>
            </Style>
            <!--AutoCompleteTextBoxEditModeEnable-->
            <Style x:Key="AutoCompleteTextBoxEditModeEnable"
                   TargetType="{x:Type smc:AutoCompleteTextBox}"
                   BasedOn="{StaticResource AutoCompleteTextBoxStyle}">
                <Style.Triggers>
                    <DataTrigger Binding="{smc:BindingEx Path=Value, Source={StaticResource IsInEditMode}}"
                                 Value="False">
                        <Setter Property="IsReadOnly"
                                Value="True" />
                    </DataTrigger>
                </Style.Triggers>
            </Style>
            <!--NumericTextBoxrEditModeEnable-->
            <Style x:Key="NumericTextBoxrEditModeEnable"
                   TargetType="{x:Type smc:NumericTextBox}"
                   BasedOn="{StaticResource NumericTextBoxStyle}">
                <Style.Triggers>
                    <DataTrigger Binding="{smc:BindingEx Path=Value, Source={StaticResource IsInEditMode}}"
                                 Value="False">
                        <Setter Property="IsReadOnly"
                                Value="True" />
                    </DataTrigger>
                </Style.Triggers>
            </Style>

            <!--CheckBoxEditModeEnable-->
            <Style x:Key="CheckBoxEditModeEnable"
               TargetType="{x:Type CheckBox}"
               BasedOn="{StaticResource CheckBoxStyle}">
                <Style.Triggers>
                    <DataTrigger Binding="{smc:BindingEx Path=Value, Source={StaticResource IsInEditMode}}"
                             Value="False">
                        <Setter Property="IsEnabled"
                            Value="False" />
                    </DataTrigger>
                </Style.Triggers>
            </Style>

            <!--DateTextBoxEditModeEnable-->
            <Style x:Key="DateTextBoxEditModeEnable"
               TargetType="{x:Type smc:DateTextBox}"
               BasedOn="{StaticResource DateTextBoxStyle}">
                <Style.Triggers>
                    <DataTrigger Binding="{smc:BindingEx Path=Value, Source={StaticResource IsInEditMode}, Mode=OneWay}"
                             Value="False">
                        <Setter Property="IsReadOnly"
                            Value="True" />
                    </DataTrigger>
                </Style.Triggers>
            </Style>
            <!--ComboBoxEditModeEnable-->
            <Style x:Key="ComboBoxEditModeEnable"
               TargetType="{x:Type igEditors:XamComboEditor}"
               BasedOn="{StaticResource XamComboEditorStyle}">
                <Setter Property="DisplayMemberPath"
                        Value="ten_act" />
                <Setter Property="IsEnabled"
                        Value="false"/>
                <Style.Triggers>
                    <MultiDataTrigger>
                        <MultiDataTrigger.Conditions>
                            <Condition Binding="{Binding Path=Value, Source={StaticResource IsInEditMode},Mode=OneWay}"
                                       Value="False" />
                            <Condition Binding="{Binding Path=M_LAN, ElementName=FormMain}"
                                       Value="E" />
                        </MultiDataTrigger.Conditions>
                        <Setter Property="DisplayMemberPath"
                                Value="ten_act2" />
                    </MultiDataTrigger>
                    <MultiDataTrigger>
                        <MultiDataTrigger.Conditions>
                            <Condition Binding="{Binding Path=Value, Source={StaticResource IsInEditMode},Mode=OneWay}"
                                       Value="True" />
                            <Condition Binding="{Binding Path=M_LAN, ElementName=FormMain}"
                                       Value="V" />
                        </MultiDataTrigger.Conditions>
                        <Setter Property="DisplayMemberPath"
                                Value="ten_post" />
                    </MultiDataTrigger>
                    <MultiDataTrigger>
                        <MultiDataTrigger.Conditions>
                            <Condition Binding="{Binding Path=Value, Source={StaticResource IsInEditMode},Mode=OneWay}"
                                       Value="True" />
                            <Condition Binding="{Binding Path=M_LAN, ElementName=FormMain}"
                                       Value="E" />
                        </MultiDataTrigger.Conditions>
                        <Setter Property="DisplayMemberPath"
                                Value="ten_post2" />
                    </MultiDataTrigger>
                    <DataTrigger Binding="{Binding Path=Value, Source={StaticResource IsInEditMode},Mode=OneWay}"
                                       Value="True">
                        <Setter Property="IsEnabled"
                                Value="true"/>
                    </DataTrigger>
                </Style.Triggers>
            </Style>
            <!--MaskedTextBoxEditModeEnable-->
            <Style x:Key="MaskedTextBoxEditModeEnable"
                   TargetType="{x:Type smc:MaskedTextBox}"
                   BasedOn="{StaticResource MaskedTextBoxStyle}">
                <Style.Triggers>
                    <DataTrigger Binding="{smc:BindingEx Path=Value, Source={StaticResource IsInEditMode}}"
                                 Value="False">
                        <Setter Property="IsReadOnly"
                                Value="True" />
                    </DataTrigger>
                </Style.Triggers>
            </Style>

        </ResourceDictionary>
    </smvc:FormTrans.Resources>
    <smc:GridLayout x:Name="GrdLayout00"
                    Margin="0"
                    RowCount="6"
                    RowHeights="35,185,66,*,25,165">
        <smc:GridLayout Name="GrdLayout10"
                        Grid.Row="1"
                        RowCount="1"
                        RowHeights="*"
                        ColumnCount="5"
                        ColumnWidths="23*,10,45*,12,276"
                        Margin="12,4,12,4">
            <!--Thong tin chung -->
            <GroupBox Name="gbInfo"
                      Header="Thông tin chung"
                      Grid.Column="0"
                      Grid.ColumnSpan="3"
                      Grid.Row="0"
                      Margin="0">
                <smc:GridLayout RowCount="6"
                                ColumnCount="5"
                                HeightPerRow="25"
                                Name="GrdLayout25"
                                ColumnWidths="100,140,*,100,140"
                                Margin="0">
                    <TextBlock Text="Mã khách"
                               Name="tblma_kh"
                               Grid.Row="0"
                               Grid.Column="0"
                               Style="{StaticResource ContentTextStyle}" />
                    <!--ma khach hang -->
                    <smc:AutoCompleteTextBox Name="txtMa_kh"
                                             Grid.Column="1"
                                             Grid.Row="0"
                                             TabIndex="10"
                                             Text="{smc:BindingEx Path=ma_kh}"
                                             ParentControl="{Binding ElementName=FormMain}"
                                             SysObj="{Binding Path=BindingSysObj, ElementName=FormMain}"
                                             AllowEmty="False"
                                             AllowWrong="False"
                                             ListID="dmkh"
                                             PreviewLostFocus="txtMa_kh_PreviewLostFocus"
                                             Style="{StaticResource AutoCompleteTextBoxEditModeEnable}"
                                             >
                    </smc:AutoCompleteTextBox>

                    <TextBlock Name="tblTen_kh"
                               Grid.Row="0"
                               Grid.Column="2"
                               Grid.ColumnSpan="3"
                               Margin="12,0,0,0"
                               Style="{StaticResource ContentTextStyle}"
                               Text="{smc:BindingEx Path=ten_kh, Path2 = ten_kh2}" />
                    <!--dia chi-->
                    <TextBlock Text="Địa chỉ"
                               Name="tbldia_chi"
                               Grid.Row="1"
                               Grid.Column="0"
                               Style="{StaticResource ContentTextStyle}" />
                    <TextBox x:Name="txtDia_chi"
                             Grid.Column="1"
                             Grid.Row="1"
                             Grid.ColumnSpan="2"
                             TabIndex="15"
                             Text="{smc:BindingEx Path=dia_chi}"
                             Style="{StaticResource TextBoxEditModeEnable}" 
                             GotFocus="txtDia_chi_GotFocus"/>
                    <!--ma so thue-->
                    <TextBlock Text="MST"
                               Name="tblma_so_thue"
                               Grid.Row="1"
                               Grid.Column="3"
                               Margin="12,0,0,0"
                               />
                    <TextBox x:Name="txtMaSoThue"
                             Grid.Column="4"
                             Grid.Row="1"
                             Text="{smc:BindingEx Path=ma_so_thue}"
                             Style="{StaticResource TextBoxStyle}"
                             IsReadOnly="True" />
                    
                    <!--nguoi giao hang-->
                    <TextBlock Text="Ng. giao hàng"
                               Name="tblong_ba"
                               Grid.Row="2"
                               Grid.Column="0"
                               Style="{StaticResource ContentTextStyle}" />
                    <TextBox x:Name="txtOng_ba"
                             Grid.Column="1"
                             Grid.Row="2"
                             Grid.ColumnSpan="2"
                             TabIndex="20"
                             Text="{smc:BindingEx Path=ong_ba}"
                             Height="20"
                             FontWeight="Normal">
                        <TextBox.Style>
                            <Style BasedOn="{StaticResource TextBoxStyle}"
                                   TargetType="{x:Type TextBox}">
                                <Setter Property="IsReadOnly">
                                    <Setter.Value>
                                        <MultiBinding Converter="{StaticResource ReadOnlyConverter}"
                                                 ConverterParameter="PH;ong_ba"
                                                 Mode="OneWay">
                                            <Binding Source="{StaticResource IsInEditMode}"
                                                     Path="Value"/>
                                        </MultiBinding>
                                    </Setter.Value>
                                </Setter>
                                <Setter Property="IsTabStop"
                                        Value="true">
                                </Setter>
                                <Style.Triggers>
                                    <DataTrigger Binding="{Binding Path=IsReadOnly, ElementName=txtOng_ba}"
                                                 Value="True">
                                        <Setter Property="IsTabStop"
                                                Value="False" />
                                    </DataTrigger>
                                </Style.Triggers>
                            </Style>
                        </TextBox.Style>
                    </TextBox>
                    
                    <!--Số dư-->
                    <TextBlock Text="Số dư"
                               Name="tblso_du_kh"
                               Grid.Row="2"
                               Grid.Column="3"
                               Margin="12,0,0,0" />
                    <smc:NumericTextBox Name="txtso_du_kh"
                             Grid.Row="2"
                             Grid.Column="4"
                             IsReadOnly="True"
                             Format="{Binding Path=Text, Source={StaticResource Voucher_Ma_nt0}, Mode=OneWay, Converter={StaticResource MaskNumeric}, ConverterParameter=M_IP_TIEN}"           
                             />

                    <!--dien giai-->
                    <TextBlock Text="Diễn giải"
                               Name="tbldien_giai"
                               Grid.Row="3"
                               Grid.Column="0"
                               Style="{StaticResource ContentTextStyle}" />
                    <TextBox Name="txtDien_giai"
                             TabIndex="25"
                             Text="{smc:BindingEx Path=dien_giai}"
                             Grid.Column="1"
                             Grid.Row="3"
                             Grid.ColumnSpan="4"
                             Height="20"
                             FontWeight="Normal"
                             Style="{StaticResource TextBoxEditModeEnable}"
                             />
                    <!--ma nhap xuat-->
                    <TextBlock Text="Mã nx (tk có)"
                               Name="tblma_nx"
                               Grid.Row="4"
                               Grid.Column="0"
                               Style="{StaticResource ContentTextStyle}" />

                    <smc:AutoCompleteTextBox x:Name="txtMa_nx"
                                             Grid.Column="1"
                                             Grid.Row="4"
                                             TabIndex="30"
                                             Text="{smc:BindingEx Path=ma_nx}"
                                             ParentControl="{Binding ElementName=FormMain}"
                                             SysObj="{Binding Path=BindingSysObj,ElementName=FormMain}"
                                             AllowEmty="False"
                                             AllowWrong="False"
                                             ListID="dmnx"
                                             PreviewLostFocus="txtMa_nx_PreviewLostFocus"
                                             Style="{StaticResource AutoCompleteTextBoxEditModeEnable}"
                                             >
                    </smc:AutoCompleteTextBox>
                    <TextBlock Name="tblTenTK"
                               Grid.Row="4"
                               Grid.Column="2"
                               Grid.ColumnSpan="3"
                               Margin="12,0,0,0"
                               Style="{StaticResource ContentTextStyle}"
                               Text="{smc:BindingEx Path=ten_tk, Path2=ten_tk2}" />
                    
                    <!--NVBH-->
                    <TextBlock Text="NVBH"
                               Name="tblNVBH"
                               Grid.Row="5"
                               Grid.Column="0"
                               Style="{StaticResource ContentTextStyle}" />

                    <smc:AutoCompleteTextBox x:Name="txtMa_bp"
                                             Grid.Column="1"
                                             Grid.Row="5"
                                             TabIndex="33"
                                             Text="{smc:BindingEx Path=ma_bp}"
                                             ParentControl="{Binding ElementName=FormMain}"
                                             SysObj="{Binding Path=BindingSysObj,ElementName=FormMain}"
                                             AllowEmty="True"
                                             AllowWrong="False"
                                             PreviewLostFocus="txtMa_bp_PreviewLostFocus"
                                             ListID="dmbp"
                                             >
                        <smc:AutoCompleteTextBox.Style>
                            <Style BasedOn="{StaticResource AutoCompleteTextBoxStyle}"
                                   TargetType="{x:Type smc:AutoCompleteTextBox}">
                                <Setter Property="IsReadOnly">
                                    <Setter.Value>
                                        <MultiBinding Converter="{StaticResource ReadOnlyConverter}"
                                                 ConverterParameter="PH;ma_bp"
                                                 Mode="OneWay">
                                            <Binding Source="{StaticResource IsInEditMode}"
                                                     Path="Value"/>
                                        </MultiBinding>
                                    </Setter.Value>
                                </Setter>
                                <Setter Property="IsTabStop"
                                        Value="true">
                                </Setter>
                                <Style.Triggers>
                                    <DataTrigger Binding="{Binding Path=IsReadOnly, ElementName=txtMa_bp}"
                                                 Value="True">
                                        <Setter Property="IsTabStop"
                                                Value="False" />
                                    </DataTrigger>
                                </Style.Triggers>
                            </Style>
                        </smc:AutoCompleteTextBox.Style>
                    </smc:AutoCompleteTextBox>
                    <TextBlock Name="txtTen_bp"
                               Grid.Row="6"
                               Grid.Column="2"
                               Grid.ColumnSpan="3"
                               Margin="12,0,0,0"
                               Style="{StaticResource ContentTextStyle}"
                               Text="{smc:BindingEx Path=ten_bp, Path2=ten_bp2}" />
                </smc:GridLayout>
            </GroupBox>

            <!--Chung tu-->
            <GroupBox Name="gbVoucher"
                      Header="Chứng từ"
                      Grid.Column="4"
                      Grid.Row="0">
                <smc:GridLayout ColumnCount="3"
                                ColumnWidths="5*,43,140"
                                HeightPerRow="25"
                                RowCount="6"
                                Margin="0"
                                Name="GrdVoucher">
                    <!--ngay hoach toan-->
                    <TextBlock Name="tblngay_ct"
                               Text="Ngày ht"
                               Grid.Column="0"
                               Grid.Row="0"
                               Grid.ColumnSpan="2"
                               Style="{StaticResource ContentTextStyle}" />

                    <smc:DateTextBox x:Name="txtNgay_ct"
                                     Grid.Column="2"
                                     Grid.Row="0"
                                     AllowEmpty="False"
                                     TabIndex="35"
                                     Value="{smc:BindingEx Path=ngay_ct}"
                                     LostFocus="txtNgay_ct_LostFocus"
                                     Style="{StaticResource DateTextBoxEditModeEnable}" />
                    <!--ngay lap phieu-->
                    <TextBlock Grid.Column="0"
                               Grid.ColumnSpan="2"
                               Grid.Row="1"
                               Name="tblngay_lct"
                               Text="Ngày lập pn"
                               Style="{StaticResource ContentTextStyle}" />

                    <smc:DateTextBox x:Name="txtngay_lct"
                                     Grid.Column="2"
                                     Grid.Row="1"
                                     TabIndex="40"
                                     Value="{smc:BindingEx Path=ngay_lct}"
                                     GotFocus="txtngay_lct_GotFocus"
                                     LostFocus="txtngay_lct_LostFocus">
                        <smc:DateTextBox.Style>
                            <Style TargetType="{x:Type smc:DateTextBox}"
                                   BasedOn="{StaticResource DateTextBoxStyle}">
                                <Setter Property="IsReadOnly">
                                    <Setter.Value>
                                        <MultiBinding Converter="{StaticResource ReadOnlyConverter}"
                                                 ConverterParameter="PH;ngay_lct"
                                                 Mode="OneWay">
                                            <Binding Source="{StaticResource IsInEditMode}"
                                                     Path="Value"/>
                                        </MultiBinding>
                                    </Setter.Value>
                                </Setter>
                                <Setter Property="IsTabStop"
                                        Value="True" />
                                <Style.Triggers>
                                    <DataTrigger Binding="{Binding Path=IsReadOnly, ElementName=txtngay_lct}"
                                                 Value="True">
                                        <Setter Property="IsTabStop"
                                                Value="False" />
                                    </DataTrigger>
                                </Style.Triggers>
                            </Style>
                        </smc:DateTextBox.Style>
                    </smc:DateTextBox>
                    <!--quyen so-->
                    <TextBlock Grid.Row="2"
                               Grid.Column="0"
                               Grid.ColumnSpan="2"
                               Text="Quyển sổ"
                               Name="tblma_qs"
                               Style="{StaticResource ContentTextStyle}" />

                    <smc:AutoCompleteTextBox x:Name="txtMa_qs"
                                             Grid.Column="2"
                                             Grid.Row="2"
                                             Text="{smc:BindingEx Path=ma_qs}"
                                             TabIndex="45"
                                             ParentControl="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType=Window}}"
                                             SysObj="{Binding Path=BindingSysObj,RelativeSource={RelativeSource FindAncestor, AncestorType=Window}}"
                                             AllowEmty="False"
                                             AllowWrong="False"
                                             ListID="dmqs"
                                             Filter="ma_cts like '%PNF%' and status = 1"
                                             Style="{StaticResource AutoCompleteTextBoxEditModeEnable}"
                                             PreviewLostFocus="txtMa_qs_PreviewLostFocus">

                        

                    </smc:AutoCompleteTextBox>
                    <!--so pn-->
                    <TextBlock Grid.Row="3"
                               Grid.Column="0"
                               Grid.ColumnSpan="2"
                               Name="tblso_ct"
                               Text="Số pn"
                               Style="{StaticResource ContentTextStyle}" />
                    <TextBox x:Name="txtSo_ct"
                             Grid.Column="2"
                             Grid.Row="3"
                             TabIndex="50"
                             Text="{smc:BindingEx Path=so_ct}"
                             CharacterCasing="Upper"
                             Style="{StaticResource TextBoxEditModeEnable}"
                             GotFocus="txtSo_ct_GotFocus">
                    </TextBox>

                    <smc:GridLayout Name="GrdLayoutNT"
                                    Grid.Row="4"
                                    Grid.Column="0"
                                    Grid.ColumnSpan="3"
                                    ColumnCount="3"
                                    ColumnWidths="52*,43,140"
                                    >
                        <TextBlock Grid.Row="4"
                                   Grid.Column="0"
                                   Name="tblTy_gia"
                                   Text="Tỷ giá"
                                   Style="{StaticResource ContentTextStyle}" />
                        <smc:AutoCompleteTextBox Name="cbMa_nt"
                                                 Grid.Column="1"
                                                 Grid.Row="4"
                                                 Margin="0,0,5,0"
                                                 Text="{smc:BindingEx Path=ma_nt}"
                                                 ParentControl="{Binding ElementName=FormMain}"
                                                 SysObj="{Binding Path=BindingSysObj, ElementName=FormMain}"
                                                 AllowEmty="False"
                                                 AllowWrong="False"
                                                 ListID="dmnt"
                                                 IsTabStop="False"
                                                 Style="{StaticResource AutoCompleteTextBoxEditModeEnable}"
                                                 PreviewLostFocus="cbMa_nt_PreviewLostFocus"
                                                 TabIndex="55">
                        </smc:AutoCompleteTextBox>

                        <smc:ExRateTextBox x:Name="txtTy_gia"
                                           Grid.Row="4"
                                           Grid.Column="2"
                                           FontWeight="Normal"
                                           IsAlwaysInEditMode="True"
                                           RateF="{smc:BindingEx Path=ty_giaf}"
                                           Rate="{smc:BindingEx Path=ty_gia}"
                                           KindRate="{smc:BindingEx Path=loai_tg}"
                                           TabIndex="60"
                                           Format="{Binding Path=Text, Source={StaticResource Voucher_Ma_nt0}, Mode=OneWay, Converter={StaticResource MaskNumeric}, ConverterParameter=M_IP_TY_GIA}"
                                           GotFocus="txtTy_gia_GotFocus"
                                           LostFocus="txtTy_gia_LostFocus">
                            <smc:ExRateTextBox.Style>
                                <Style  TargetType="{x:Type smc:ExRateTextBox}"
                                        BasedOn="{StaticResource ExRateTextBoxStyle}">
                                    <Setter Property="smc:ExRateTextBox.IsReadOnly"
                                            Value="True" />
                                    <Style.Triggers>
                                        <MultiDataTrigger>
                                            <MultiDataTrigger.Conditions>
                                                <Condition Binding="{smc:BindingEx Path=Value, Source={StaticResource IsInEditMode}}"
                                                           Value="True" />
                                                <Condition Binding="{smc:BindingEx Path=Value, Source={StaticResource Voucher_Ma_nt0}}"
                                                           Value="False" />
                                            </MultiDataTrigger.Conditions>
                                            <Setter Property="smc:ExRateTextBox.IsReadOnly"
                                                    Value="False" />

                                        </MultiDataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </smc:ExRateTextBox.Style>
                        </smc:ExRateTextBox>
                    </smc:GridLayout>

                    <!--Trạng thái-->
                    <smc:GridLayout Name="GrdLayoutStatus"
                                    Grid.Column="0"
                                    Grid.Row="5"
                                    Grid.ColumnSpan="3"
                                    ColumnCount="2"
                                    ColumnWidths="*,140"
                                    KeyboardNavigation.TabNavigation="None">
                        <TextBlock Grid.Column="0"
                                   Grid.Row="0"
                                   Width="60"
                                   Name="tblStatus"
                                   Style="{StaticResource ContentTextStyle}"
                                   Text="{Binding Path=Value, Source={StaticResource IsInEditMode}, Converter={StaticResource TextStatus}}" />
                        <igEditors:XamComboEditor Style="{StaticResource ComboBoxEditModeEnable}"
                                                  SelectedIndex="{smc:BindingEx Path=status,Converter={StaticResource StatusVoucher}}"
                                                  ValuePath="ma_post"
                                                  Grid.Column="1"
                                                  Grid.Row="0"
                                                  Height="20"
                                                  Name="txtStatus"
                                                  TabIndex="61"/>
                    </smc:GridLayout>
                </smc:GridLayout>
            </GroupBox>
        </smc:GridLayout>

        <!--GridLayout Hd thue-->
        <smc:GridLayout Name="GrdLayout11"
                        Grid.Row="2"
                        RowCount="1"
                        RowHeights="*"
                        >
            <!--Group box Hd thue-->
            <GroupBox Name="gbTax"
                      Header="Hđ thuế"
                      Grid.Column="0"
                      Grid.ColumnSpan="8"
                      Grid.Row="0"
                      
                      Margin="12,0,12,12">
                <smc:GridLayout Grid.Row="0"
                                RowCount="1"
                                Name="GrdLayout27"
                                RowHeights="*"
                                ColumnCount="12"
                                KeyboardNavigation.IsTabStop="True"
                                ColumnWidths="100,100,12,100,100,12,100,100,12,100,100,*">
                    <!--So hd-->
                    <TextBlock Text="Số hđ"
                               Name="tblso_ct0"
                               Style="{StaticResource ContentTextStyle}" />
                    <TextBox x:Name="txtSo_ct0"
                             Grid.Column="1"
                             TabIndex="65"
                             CharacterCasing="Upper"
                             Text="{smc:BindingEx Path=so_ct0}"
                             Style="{StaticResource TextBoxEditModeEnable}" 
                             />
                    <!--So seri-->
                    <TextBlock Text="Số seri"
                               Grid.Column="3"
                               Name="tblSo_seri0"
                               Style="{StaticResource ContentTextStyle}" />
                    <TextBox x:Name="txtSo_seri0"
                             Grid.Column="4"
                             TabIndex="70"
                             CharacterCasing="Upper"
                             Text="{smc:BindingEx Path=so_seri0}"
                             Style="{StaticResource TextBoxEditModeEnable}" 
                             />
                    <!--Ngay hd-->
                    <TextBlock Text="Ngày hđ"
                               Grid.Column="6"
                               Name="tblNgay_ct0"
                               Style="{StaticResource ContentTextStyle}" />
                    <smc:DateTextBox x:Name="txtNgay_ct0"
                                     Grid.Column="7"
                                     TabIndex="75"
                                     Value="{smc:BindingEx Path=ngay_ct0}"
                                     Style="{StaticResource DateTextBoxEditModeEnable}" />
                    <TextBlock Text="Mẫu hóa đơn"
                               Name="tblkh_mau_hd"
                               Grid.Column="9"
                               Style="{StaticResource ContentTextStyle}" />
                    <smc:AutoCompleteTextBox x:Name="txtkh_mau_hd"
                                             Grid.Column="10"
                                             TabIndex="76"
                                             Text="{smc:BindingEx Path=kh_mau_hd}"
                                             ParentControl="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType=Window}}"
                                             SysObj="{Binding Path=BindingSysObj,RelativeSource={RelativeSource FindAncestor, AncestorType=Window}}"
                                             AllowEmty="True"
                                             AllowWrong="False"
                                             Style="{StaticResource AutoCompleteTextBoxEditModeEnable}"
                                             ListID="dmmauhd30"/>
                </smc:GridLayout>
            </GroupBox>
        </smc:GridLayout>

        <smc:GridLayout Grid.Row="3"
                        Grid.Column="0"
                        Margin="12,0,12,4"
                        Name="GrdLayout40"
                        KeyboardNavigation.TabIndex="84"
                        KeyboardNavigation.TabNavigation="Local">
            <igWindows:XamTabControl x:Name="TabInfo"
                                     Grid.Row="0"
                                     Grid.Column="0"
                                     Theme="Generic"
                                     Background="{x:Null}">
                <igWindows:XamTabControl.BorderBrush>
                    <SolidColorBrush Color="#FFD0D0BF"
                                     igThemes:ResourceWasher.WashGroup="Selected" />
                </igWindows:XamTabControl.BorderBrush>
                <igWindows:XamTabControl.Resources>
                    <Style TargetType="{x:Type igWindows:TabItemEx}"
                           BasedOn="{StaticResource TabItemStyle}">
                    </Style>
                </igWindows:XamTabControl.Resources>
                <!--Hạch toán-->
                <igWindows:TabItemEx Header="_1. Hàng hóa"
                                     Name="tabItemHT"
                                     TabIndex="84">
                    <igWindows:TabItemEx.BorderBrush>
                        <SolidColorBrush Color="#FFD0D0BF"
                                         igThemes:ResourceWasher.WashGroup="BaseColor" />
                    </igWindows:TabItemEx.BorderBrush>
                    
                    <smc:GridLayout Margin="0" Name="GrdLayoutCT">
                        <smc:DataGridView x:Name="GrdCt"
                                          TabIndex="85"
                                          IsVoucher="True"
                                          PreviewEditModeEnded="GrdCt_EditModeEnded"
                                          EditModeStarting="GrdCt_EditModeStarting"
                                          EditModeStarted="GrdCt_EditModeStarted"
                                          AddNewRecord="GrdCt_AddNewRecord"
                                          RecordDelete="GrdCt_RecordDelete"
                                          KeyUp="GrdCt_KeyUp"
                                          Tag="{Binding Path=Value, Source={StaticResource IsInEditMode}}"
                                          KeyDown="GrdCt_KeyDown">
                            <smc:DataGridView.Resources>
                                <!--ControlSearchMaVatTu-->
                                <DataTemplate x:Key="ControlSearchMaVatTu">
                                    <smc:AutoCompleteTextBox nRow="6"
                                                             IsBorderTextBox="False"
                                                             AllowEmty="False"
                                                             AllowWrong="False"
                                                             Style="{StaticResource AutoCompleteTextBoxEditModeEnable}"
                                                             ParentControl="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType=Window}}"
                                                             SysObj="{Binding BindingSysObj,RelativeSource={RelativeSource FindAncestor, AncestorType=Window}}"
                                                             Text="{smc:BindingEx RelativeSource={RelativeSource AncestorType={x:Type igDP:CellValuePresenter}, Mode=FindAncestor}, 
                                                                Path=Value, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                                             ListID="dmvt" />
                                </DataTemplate>
                                
                                <!--ControlSearchTk_tl-->
                                <DataTemplate x:Key="ControlSearchTk_tl">
                                    <smc:AutoCompleteTextBox nRow="6"
                                                             AllowEmty="False"
                                                             AllowWrong="False"
                                                             Style="{StaticResource AutoCompleteTextBoxEditModeEnable}"
                                                             IsBorderTextBox="False"
                                                             ParentControl="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type Window}}}"
                                                             SysObj="{Binding BindingSysObj,RelativeSource={RelativeSource FindAncestor, AncestorType=Window}}"
                                                             Text="{smc:BindingEx Path=Value, RelativeSource={RelativeSource AncestorType={x:Type igDP:CellValuePresenter}, Mode=FindAncestor}}" 
                                                             ListID="dmtk1">
                                    </smc:AutoCompleteTextBox>
                                </DataTemplate>
                                
                                <!--ControlSearchTk_vt-->
                                <DataTemplate x:Key="ControlSearchTk_vt">
                                    <smc:AutoCompleteTextBox nRow="6"
                                                             AllowEmty="False"
                                                             AllowWrong="False"
                                                             Style="{StaticResource AutoCompleteTextBoxEditModeEnable}"
                                                             IsBorderTextBox="False"
                                                             ParentControl="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type Window}}}"
                                                             SysObj="{Binding BindingSysObj,RelativeSource={RelativeSource FindAncestor, AncestorType=Window}}"
                                                             Text="{smc:BindingEx Path=Value, RelativeSource={RelativeSource AncestorType={x:Type igDP:CellValuePresenter}, Mode=FindAncestor}}" 
                                                             ListID="dmtk1">
                                        <smc:AutoCompleteTextBox.IsReadOnly>
                                            <MultiBinding Converter="{StaticResource ReadOnlyConverter}"
                                                              ConverterParameter="CT;tk_vt">
                                                <Binding RelativeSource="{RelativeSource AncestorType={x:Type igDP:CellValuePresenter}, Mode=FindAncestor}"
                                                             Path="Record.Cells[sua_tk_vt].Value"
                                                             Mode="OneWay" />
                                                <Binding Path="Value"
                                                         Source="{StaticResource IsInEditMode}"
                                                         Mode="OneWay"/>
                                                <Binding RelativeSource="{RelativeSource AncestorType={x:Type igDP:CellValuePresenter}, Mode=FindAncestor}"
                                                     Path="Record.DataItem.vt_ton_kho"
                                                     Mode="OneWay" />
                                            </MultiBinding>
                                        </smc:AutoCompleteTextBox.IsReadOnly>
                                    </smc:AutoCompleteTextBox>
                                </DataTemplate>
                                
                                <!--ControlSearchTk_gv-->
                                <DataTemplate x:Key="ControlSearchTk_gv">
                                    <smc:AutoCompleteTextBox nRow="6"
                                                             AllowEmty="False"
                                                             AllowWrong="False"
                                                             Style="{StaticResource AutoCompleteTextBoxEditModeEnable}"
                                                             IsBorderTextBox="False"
                                                             ParentControl="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type Window}}}"
                                                             SysObj="{Binding BindingSysObj,RelativeSource={RelativeSource FindAncestor, AncestorType=Window}}"
                                                             Text="{smc:BindingEx Path=Value, RelativeSource={RelativeSource AncestorType={x:Type igDP:CellValuePresenter}, Mode=FindAncestor}}" 
                                                             ListID="dmtk1">
                                    </smc:AutoCompleteTextBox>
                                </DataTemplate>
                                
                                <!--ControlSearchTk_km_i-->
                                <DataTemplate x:Key="ControlSearchTk_km_i">
                                    <smc:AutoCompleteTextBox nRow="6"
                                                             AllowEmty="True"
                                                             AllowWrong="False"
                                                             Style="{StaticResource AutoCompleteTextBoxEditModeEnable}"
                                                             IsBorderTextBox="False"
                                                             ParentControl="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type Window}}}"
                                                             SysObj="{Binding BindingSysObj,RelativeSource={RelativeSource FindAncestor, AncestorType=Window}}"
                                                             Text="{smc:BindingEx Path=Value, RelativeSource={RelativeSource AncestorType={x:Type igDP:CellValuePresenter}, Mode=FindAncestor}}" 
                                                             ListID="dmtk1">
                                        <smc:AutoCompleteTextBox.IsReadOnly>
                                            <MultiBinding Converter="{StaticResource ReadOnlyConverter}"
                                                              ConverterParameter="CT;tk_km_i">
                                                <Binding RelativeSource="{RelativeSource AncestorType={x:Type igDP:CellValuePresenter}, Mode=FindAncestor}"
                                                             Path="Record.Cells[km_ck].Value"
                                                             Mode="OneWay" />
                                                <Binding Path="Value"
                                                         Source="{StaticResource IsInEditMode}"
                                                         Mode="OneWay"/>
                                            </MultiBinding>
                                        </smc:AutoCompleteTextBox.IsReadOnly>
                                    </smc:AutoCompleteTextBox>
                                </DataTemplate>
                                
                                <!--ControlSearchTk_ck-->
                                <DataTemplate x:Key="ControlSearchTk_ck">
                                    <smc:AutoCompleteTextBox nRow="6"
                                                             AllowEmty="False"
                                                             AllowWrong="False"
                                                             Style="{StaticResource AutoCompleteTextBoxEditModeEnable}"
                                                             IsBorderTextBox="False"
                                                             ParentControl="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type Window}}}"
                                                             SysObj="{Binding BindingSysObj,RelativeSource={RelativeSource FindAncestor, AncestorType=Window}}"
                                                             Text="{smc:BindingEx Path=Value, RelativeSource={RelativeSource AncestorType={x:Type igDP:CellValuePresenter}, Mode=FindAncestor}}" 
                                                             ListID="dmtk1">
                                        <smc:AutoCompleteTextBox.IsReadOnly>
                                            <MultiBinding Converter="{StaticResource ReadOnlyConverter}"
                                                              ConverterParameter="CT;tk_ck">
                                                <Binding RelativeSource="{RelativeSource AncestorType={x:Type igDP:CellValuePresenter}, Mode=FindAncestor}"
                                                             Path="Record.Cells[tl_ck].Value"
                                                             Mode="OneWay" />
                                                <Binding Path="Value"
                                                         Source="{StaticResource IsInEditMode}"
                                                         Mode="OneWay"/>
                                            </MultiBinding>
                                        </smc:AutoCompleteTextBox.IsReadOnly>
                                    </smc:AutoCompleteTextBox>
                                </DataTemplate>
                                
                                <!--ControlSearchKhoHang-->
                                <DataTemplate x:Key="ControlSearchKhoHang">
                                    <smc:AutoCompleteTextBox nRow="6"
                                                             AllowEmty="False"
                                                             AllowWrong="False"
                                                             IsBorderTextBox="False"
                                                             Style="{StaticResource AutoCompleteTextBoxEditModeEnable}"
                                                             ParentControl="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType=Window}}"
                                                             SysObj="{Binding BindingSysObj,RelativeSource={RelativeSource FindAncestor, AncestorType=Window}}"
                                                             Text="{smc:BindingEx Path=Value, RelativeSource={RelativeSource AncestorType={x:Type igDP:CellValuePresenter}, Mode=FindAncestor}}" 
                                                             Filter="{Binding DK_MA_DVCS,RelativeSource={RelativeSource FindAncestor, AncestorType=Window}}"
                                                             ListID="dmkho" />
                                </DataTemplate>
                                <!--ControlSearchVuViec-->
                                <DataTemplate x:Key="ControlSearchVuViec">
                                    <smc:AutoCompleteTextBox nRow="6"
                                                             AllowEmty="True"
                                                             IsBorderTextBox="False"
                                                             Style="{StaticResource AutoCompleteTextBoxEditModeEnable}"
                                                             ParentControl="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type Window}}}"
                                                             SysObj="{Binding BindingSysObj,RelativeSource={RelativeSource FindAncestor, AncestorType=Window}}"
                                                             Text="{smc:BindingEx Path=Value, RelativeSource={RelativeSource AncestorType={x:Type igDP:CellValuePresenter}, Mode=FindAncestor}}"
                                                             ListID="dmvv" />
                                </DataTemplate>
                                
                                <!--ControlSearchMaPhi-->
                                <DataTemplate x:Key="ControlSearchMaPhi">
                                    <smc:AutoCompleteTextBox nRow="6"
                                                             AllowEmty="True"
                                                             IsBorderTextBox="False"
                                                             Style="{StaticResource AutoCompleteTextBoxEditModeEnable}"
                                                             ParentControl="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type Window}}}"
                                                             SysObj="{Binding BindingSysObj,RelativeSource={RelativeSource FindAncestor, AncestorType=Window}}"
                                                             Text="{smc:BindingEx Path=Value, RelativeSource={RelativeSource AncestorType={x:Type igDP:CellValuePresenter}, Mode=FindAncestor}}"
                                                             ListID="dmphi" />
                                </DataTemplate>
                                
                                <!--ControlMaskTextboxKm_ck-->
                                <DataTemplate x:Key="ControlMaskTextboxKm_ck">
                                    <smc:MaskedTextBox Text="{smc:BindingEx Path=Value, RelativeSource={RelativeSource AncestorType={x:Type igDP:CellValuePresenter}, Mode=FindAncestor}}"
                                                       Format="M"
                                                       InputMask="0,1"
                                                       BorderThickness="0"
                                                       Style="{StaticResource MaskedTextBoxEditModeEnable}">
                                        
                                    </smc:MaskedTextBox>
                                </DataTemplate>
                            </smc:DataGridView.Resources>

                            <smc:DataGridView.FieldSettings>
                                <igDP:FieldSettings  SummaryDisplayArea="BottomFixed"
                                                     SummaryUIType="MultiSelect"
                                                     Height="23"
                                                     AllowEdit="True"/>

                            </smc:DataGridView.FieldSettings>
                            <smc:DataGridView.FieldLayoutSettings>
                                <igDP:FieldLayoutSettings HeaderPrefixAreaStyle="{StaticResource StyleHeaderPrefixArea}"
                                                          RecordSelectorStyle="{StaticResource StyleRecordSelector}"
                                                          AutoGenerateFields="False"
                                                          AllowDelete="False" />
                            </smc:DataGridView.FieldLayoutSettings>
                            
                            <smc:DataGridView.FieldLayouts>
                                <igDP:FieldLayout>
                                    <igDP:FieldLayout.SummaryDefinitions>

                                        <smc:ExSummaryDefinition SourceFieldName="ton13"
                                                                     Calculator="Sum"
                                                                     Format="{Binding Path=Text, Source={StaticResource Voucher_Ma_nt0}, Mode=OneWay, Converter={StaticResource MaskNumeric}, ConverterParameter=M_IP_SL}" />

                                        <smc:ExSummaryDefinition SourceFieldName="so_luong"
                                                                     Calculator="Sum"
                                                                     Format="{Binding Path=Text, Source={StaticResource Voucher_Ma_nt0}, Mode=OneWay, Converter={StaticResource MaskNumeric}, ConverterParameter=M_IP_SL}" />

                                        <smc:ExSummaryDefinition SourceFieldName="tien_nt2"
                                                                     Calculator="Sum"
                                                                     Format="{Binding Path=Text, Source={StaticResource Voucher_Ma_nt0}, Mode=OneWay, Converter={StaticResource MaskNumeric}, ConverterParameter=M_IP_TIEN_NT}" />

                                        <smc:ExSummaryDefinition SourceFieldName="tien_nt"
                                                                     Calculator="Sum"
                                                                     Format="{Binding Path=Text, Source={StaticResource Voucher_Ma_nt0}, Mode=OneWay, Converter={StaticResource MaskNumeric}, ConverterParameter=M_IP_TIEN_NT}" />
                                        
                                        <smc:ExSummaryDefinition SourceFieldName="ck_nt"
                                                                     Calculator="Sum"
                                                                     Format="{Binding Path=Text, Source={StaticResource Voucher_Ma_nt0}, Mode=OneWay, Converter={StaticResource MaskNumeric}, ConverterParameter=M_IP_TIEN_NT}" />
                                        
                                        <smc:ExSummaryDefinition SourceFieldName="tien2"
                                                                     Calculator="Sum"
                                                                     Format="{Binding Path=Text, Source={StaticResource Voucher_Ma_nt0}, Mode=OneWay, Converter={StaticResource MaskNumeric}, ConverterParameter=M_IP_TIEN}" />
                                        
                                        <smc:ExSummaryDefinition SourceFieldName="tien"
                                                                     Calculator="Sum"
                                                                     Format="{Binding Path=Text, Source={StaticResource Voucher_Ma_nt0}, Mode=OneWay, Converter={StaticResource MaskNumeric}, ConverterParameter=M_IP_TIEN}" />

                                        <smc:ExSummaryDefinition SourceFieldName="ck"
                                                                     Calculator="Sum"
                                                                     Format="{Binding Path=Text, Source={StaticResource Voucher_Ma_nt0}, Mode=OneWay, Converter={StaticResource MaskNumeric}, ConverterParameter=M_IP_TIEN}" />

                                    </igDP:FieldLayout.SummaryDefinitions>

                                    <!--Mã vật tư-->
                                    <smc:NotEmptyField Name="ma_vt"
                                                       Label="Mã vật tư"
                                                       FixedLocation="FixedToNearEdge"
                                                       Width="100">
                                        <igDP:Field.Settings>
                                            <igDP:FieldSettings LabelTextAlignment="Center"
                                                                >
                                                <igDP:FieldSettings.EditorStyle>
                                                    <Style TargetType="{x:Type smc:ControlHostEditor}">
                                                        <Setter Property="EditDataTemplate"
                                                                    Value="{StaticResource ControlSearchMaVatTu}" />
                                                        <Setter Property="Template"
                                                                    Value="{Binding Path=EditTemplate, RelativeSource={RelativeSource Self}}" />
                                                    </Style>
                                                </igDP:FieldSettings.EditorStyle>
                                            </igDP:FieldSettings>
                                        </igDP:Field.Settings>
                                    </smc:NotEmptyField>
                                    
                                    <!--Tên vật tư-->
                                    <igDP:Field Label="Tên vật tư"
                                            Name="ten_vt"
                                            FixedLocation="FixedToNearEdge"
                                            Width="180">
                                        <igDP:Field.Visibility>
                                            <MultiBinding Converter="{StaticResource VisibilityConverter}"
                                                              ConverterParameter="LANV">
                                                <Binding Path="Value" Source="{StaticResource Voucher_Lan0}"/>
                                            </MultiBinding>
                                        </igDP:Field.Visibility>
                                        <igDP:Field.Settings>
                                            <igDP:FieldSettings AllowEdit="False"
                                                            LabelTextAlignment="Center"
                                                            EditAsType="{x:Type System:String}" />
                                        </igDP:Field.Settings>
                                    </igDP:Field>
                                    <igDP:Field Label="Tên vật tư"
                                            Name="ten_vt2"
                                            FixedLocation="FixedToNearEdge"
                                            Width="180">
                                        <igDP:Field.Visibility>
                                            <MultiBinding Converter="{StaticResource VisibilityConverter}"
                                                              ConverterParameter="LANE">
                                                <Binding Path="Value" Source="{StaticResource Voucher_Lan0}"/>
                                            </MultiBinding>
                                        </igDP:Field.Visibility>
                                        <igDP:Field.Settings>
                                            <igDP:FieldSettings AllowEdit="False"
                                                            LabelTextAlignment="Center"
                                                            EditAsType="{x:Type System:String}" />
                                        </igDP:Field.Settings>
                                    </igDP:Field>

                                    <!--Đvt-->
                                    <igDP:Field Label="Đvt"
                                                Name="dvt"
                                                Width="50">
                                        <igDP:Field.Settings>
                                            <igDP:FieldSettings AllowEdit="False"
                                                                LabelTextAlignment="Center"
                                                                EditAsType="{x:Type System:String}" />
                                        </igDP:Field.Settings>
                                    </igDP:Field>
                                    
                                    <!--Khuyem mai (km)-->
                                    <igDP:Field Label="Km"
                                            Name="km_ck"
                                            Width="45">
                                        <igDP:Field.Settings>
                                            <igDP:FieldSettings AllowEdit="True"
                                                                LabelTextAlignment="Center">
                                                <igDP:FieldSettings.EditorStyle>
                                                    <Style TargetType="{x:Type smc:MaskedTextBox}">
                                                        <Setter Property="Format"
                                                            Value="M" />
                                                        <Setter Property="InputMask"
                                                            Value="0,1" />
                                                        <Style.Triggers>
                                                            <DataTrigger Binding="{smc:BindingEx Path=Value, Source={StaticResource IsInEditMode}}"
                                                                         Value="False">
                                                                <Setter Property="IsReadOnly"
                                                                        Value="True" />
                                                            </DataTrigger>
                                                        </Style.Triggers>

                                                    </Style>
                                                </igDP:FieldSettings.EditorStyle>
                                            </igDP:FieldSettings>
                                        </igDP:Field.Settings>
                                    </igDP:Field>

                                    <!--Mã kho-->
                                    <igDP:Field Label="Mã kho"
                                                    Name="ma_kho_i"
                                                    Width="70">
                                        <igDP:Field.Settings>
                                            <igDP:FieldSettings AllowEdit="True"
                                                                LabelTextAlignment="Center"
                                                                >
                                                <igDP:FieldSettings.EditorStyle>
                                                    <Style TargetType="{x:Type smc:ControlHostEditor}">
                                                        <Setter Property="EditDataTemplate"
                                                                    Value="{StaticResource ControlSearchKhoHang}" />
                                                        <Setter Property="Template"
                                                                    Value="{Binding Path=EditTemplate, RelativeSource={RelativeSource Self}}" />
                                                    </Style>
                                                </igDP:FieldSettings.EditorStyle>
                                            </igDP:FieldSettings>
                                        </igDP:Field.Settings>
                                    </igDP:Field>
                                    
                                    <!--Tồn kho-->
                                    <igDP:Field Label="Tồn kho"
                                                    Name="ton13"
                                                    Width="130">
                                        <igDP:Field.Settings>
                                            <igDP:FieldSettings AllowEdit="False"
                                                                LabelTextAlignment="Center"
                                                                AllowSummaries="True"
                                                                >
                                                <igDP:FieldSettings.EditorStyle>
                                                    <Style TargetType="{x:Type smc:NumericTextBox}">
                                                        <Setter Property="Format"
                                                                Value="{Binding Path=Text, Source={StaticResource Voucher_Ma_nt0}, Mode=OneWay, Converter={StaticResource MaskNumeric}, ConverterParameter=M_IP_SL}" />
                                                    </Style>
                                                </igDP:FieldSettings.EditorStyle>
                                            </igDP:FieldSettings>
                                        </igDP:Field.Settings>
                                    </igDP:Field>
                                    
                                    <!--Số lượng-->
                                    <igDP:Field Label="Số lượng"
                                                    Name="so_luong"
                                                    Width="130">
                                        <igDP:Field.Settings>
                                            <igDP:FieldSettings LabelTextAlignment="Center"
                                                                AllowSummaries="True">
                                                <igDP:FieldSettings.EditorStyle>
                                                    <Style TargetType="{x:Type smc:NumericTextBox}">
                                                        <Setter Property="Format"
                                                                Value="{Binding Path=Text, Source={StaticResource Voucher_Ma_nt0}, Mode=OneWay, Converter={StaticResource MaskNumeric}, ConverterParameter=M_IP_SL}" />
                                                        <Setter Property="IsReadOnly"
                                                            Value="{smc:BindingEx Path=Value, Source={StaticResource IsInEditMode}, Converter={StaticResource BoolInverter}}" />
                                                    </Style>
                                                </igDP:FieldSettings.EditorStyle>
                                            </igDP:FieldSettings>
                                        </igDP:Field.Settings>
                                    </igDP:Field>

                                    <!--Giá bán USD-->
                                    <igDP:Field Label="Giá bán USD"
                                                    Name="gia_nt2"
                                                    Width="130">
                                        <igDP:Field.Settings>
                                            <igDP:FieldSettings LabelTextAlignment="Center"
                                                                >
                                                <igDP:FieldSettings.EditorStyle>
                                                    <Style TargetType="{x:Type smc:NumericTextBox}">
                                                        <Setter Property="IsReadOnly">
                                                            <Setter.Value>
                                                                <MultiBinding Converter="{StaticResource ReadOnlyConverter}"
                                                                                  ConverterParameter="CT;gia_nt2">
                                                                    <Binding RelativeSource="{RelativeSource AncestorType={x:Type igDP:CellValuePresenter}, Mode=FindAncestor}"
                                                                                 Path="Record.Cells[so_luong].Value"
                                                                                 Mode="OneWay" />
                                                                    <Binding Path="Value"
                                                                         Source="{StaticResource IsInEditMode}"
                                                                         Mode="OneWay" />

                                                                </MultiBinding>
                                                            </Setter.Value>
                                                        </Setter>
                                                        <Setter Property="Format"
                                                                Value="{Binding Path=Text, Source={StaticResource Voucher_Ma_nt0}, Mode=OneWay, Converter={StaticResource MaskNumeric}, ConverterParameter=M_IP_GIA_NT}" />
                                                    </Style>
                                                </igDP:FieldSettings.EditorStyle>
                                            </igDP:FieldSettings>
                                        </igDP:Field.Settings>
                                    </igDP:Field>

                                    <!--Tiền bán USD-->
                                    <igDP:Field Label="Tiền hàng USD"
                                                    Name="tien_nt2"
                                                    Width="130">
                                        <igDP:Field.Settings>
                                            <igDP:FieldSettings LabelTextAlignment="Center"
                                                                AllowSummaries="True"
                                                                >
                                                <igDP:FieldSettings.EditorStyle>
                                                    <Style TargetType="{x:Type smc:NumericTextBox}">
                                                        <Setter Property="IsReadOnly">
                                                            <Setter.Value>
                                                                <MultiBinding Converter="{StaticResource ReadOnlyConverter}"
                                                                                  ConverterParameter="CT;tien_nt2">
                                                                    <Binding RelativeSource="{RelativeSource AncestorType={x:Type igDP:CellValuePresenter}, Mode=FindAncestor}"
                                                                                 Path="Record.Cells[so_luong].Value"
                                                                                 Mode="OneWay" />
                                                                    <Binding RelativeSource="{RelativeSource AncestorType={x:Type igDP:CellValuePresenter}, Mode=FindAncestor}"
                                                                                 Path="Record.Cells[gia_nt2].Value"
                                                                                 Mode="OneWay" />
                                                                    <Binding Path="Value"
                                                                                 Source="{StaticResource IsCheckedSua_tien}"
                                                                                 Mode="OneWay" />
                                                                    <Binding Path="Value"
                                                                         Source="{StaticResource IsInEditMode}"
                                                                         Mode="OneWay" />
                                                                </MultiBinding>
                                                            </Setter.Value>
                                                        </Setter>
                                                        <Setter Property="Format"
                                                                Value="{Binding Path=Text, Source={StaticResource Voucher_Ma_nt0}, Converter={StaticResource MaskNumeric}, ConverterParameter=M_IP_TIEN_NT}" />
                                                    </Style>
                                                </igDP:FieldSettings.EditorStyle>
                                            </igDP:FieldSettings>
                                        </igDP:Field.Settings>
                                    </igDP:Field>

                                    <!--Tỷ lệ ck-->
                                    <igDP:Field Label="Tỷ lệ ck (%)"
                                                    Name="tl_ck"
                                                    Width="130">
                                        <igDP:Field.Settings>
                                            <igDP:FieldSettings LabelTextAlignment="Center"
                                                                >
                                                <igDP:FieldSettings.EditorStyle>
                                                    <Style TargetType="{x:Type smc:NumericTextBox}">
                                                        <Setter Property="IsReadOnly"
                                                            Value="{smc:BindingEx Path=Value, Source={StaticResource IsInEditMode}, Converter={StaticResource BoolInverter}}" />
                                                    </Style>
                                                </igDP:FieldSettings.EditorStyle>
                                            </igDP:FieldSettings>
                                        </igDP:Field.Settings>
                                    </igDP:Field>
                                    
                                    <!--Ck USD-->
                                    <igDP:Field Label="Ck USD"
                                                Name="ck_nt"
                                                Width="130">
                                        <igDP:Field.Settings>
                                            <igDP:FieldSettings LabelTextAlignment="Center"
                                                                AllowSummaries="True"
                                                                >
                                                <igDP:FieldSettings.EditorStyle>
                                                    <Style TargetType="{x:Type smc:NumericTextBox}">
                                                        <Setter Property="IsReadOnly">
                                                            <Setter.Value>
                                                                <MultiBinding Converter="{StaticResource ReadOnlyConverter}"
                                                                                  ConverterParameter="CT;ck_nt">
                                                                    <Binding RelativeSource="{RelativeSource AncestorType={x:Type igDP:CellValuePresenter}, Mode=FindAncestor}"
                                                                                 Path="Record.Cells[tl_ck].Value"
                                                                                 Mode="OneWay" />
                                                                    <Binding Path="Value"
                                                                         Source="{StaticResource IsInEditMode}"
                                                                         Mode="OneWay" />
                                                                </MultiBinding>
                                                            </Setter.Value>
                                                        </Setter>
                                                        
                                                        <Setter Property="Format"
                                                                Value="{Binding Path=Text, Source={StaticResource Voucher_Ma_nt0}, Mode=OneWay, Converter={StaticResource MaskNumeric}, ConverterParameter=M_IP_TIEN_NT}" />
                                                    </Style>
                                                </igDP:FieldSettings.EditorStyle>
                                            </igDP:FieldSettings>
                                        </igDP:Field.Settings>
                                    </igDP:Field>

                                    <!--Tk hbtl-->
                                    <igDP:Field Label="Tk hbtl"
                                                    Name="tk_tl"
                                                    Width="80"
                                                 >
                                        <igDP:Field.Settings>
                                            <igDP:FieldSettings LabelTextAlignment="Center"
                                                                >
                                                <igDP:FieldSettings.EditorStyle>
                                                    <Style TargetType="{x:Type smc:ControlHostEditor}">
                                                        <Setter Property="EditDataTemplate"
                                                                    Value="{StaticResource ControlSearchTk_tl}" />
                                                        <Setter Property="Template"
                                                                    Value="{Binding Path=EditTemplate, RelativeSource={RelativeSource Self}}" />
                                                    </Style>
                                                </igDP:FieldSettings.EditorStyle>
                                            </igDP:FieldSettings>
                                        </igDP:Field.Settings>
                                    </igDP:Field>
                                    
                                    <!--cot dk de binding readonly gia von-->
                                    <igDP:Field Name="gia_ton"
                                            Visibility="Hidden">
                                        <igDP:Field.Settings>
                                            <igDP:FieldSettings CellMaxWidth="0" />
                                        </igDP:Field.Settings>
                                    </igDP:Field>
                                    
                                    <!--Giá vốn USD-->
                                    <igDP:Field Label="Giá vốn USD"
                                                    Name="gia_nt"
                                                    Width="130">
                                        <igDP:Field.Settings>
                                            <igDP:FieldSettings AllowEdit="{Binding Path=Value, Source={StaticResource IsInEditMode}}"
                                                                LabelTextAlignment="Center"
                                                                >
                                                <igDP:FieldSettings.EditorStyle>
                                                    <Style TargetType="{x:Type smc:NumericTextBox}">
                                                        <Setter Property="IsReadOnly">
                                                            <Setter.Value>
                                                                <MultiBinding Converter="{StaticResource ReadOnlyConverter}"
                                                                                  ConverterParameter="CT;gia_nt">
                                                                    <Binding RelativeSource="{RelativeSource AncestorType={x:Type igDP:CellValuePresenter}, Mode=FindAncestor}"
                                                                                 Path="Record.Cells[so_luong].Value"
                                                                                 Mode="OneWay" />
                                                                    <!--<Binding Path="Value"
                                                                                 Source="{StaticResource IsCheckedSua_tien}"
                                                                                 Mode="OneWay" />-->
                                                                    <Binding Path="Value"
                                                                                 Source="{StaticResource IsCheckedPn_gia_tb}"
                                                                                 Mode="OneWay" />
                                                                    <Binding RelativeSource="{RelativeSource AncestorType={x:Type igDP:CellValuePresenter}, Mode=FindAncestor}"
                                                                                 Path="Record.Cells[gia_ton].Value"
                                                                                 Mode="OneWay" />
                                                                    <Binding Path="Value"
                                                                         Source="{StaticResource IsInEditMode}"
                                                                         Mode="OneWay" />
                                                                </MultiBinding>
                                                            </Setter.Value>
                                                        </Setter>
                                                        <Setter Property="Format"
                                                                Value="{Binding Path=Text, Source={StaticResource Voucher_Ma_nt0}, Mode=OneWay, Converter={StaticResource MaskNumeric}, ConverterParameter=M_IP_GIA_NT}" />
                                                    </Style>
                                                </igDP:FieldSettings.EditorStyle>
                                            </igDP:FieldSettings>
                                        </igDP:Field.Settings>
                                    </igDP:Field>

                                    <!--Tiền vốn USD-->
                                    <igDP:Field Label="Tiền vốn USD"
                                                    Name="tien_nt"
                                                    Width="130">
                                        <igDP:Field.Settings>
                                            <igDP:FieldSettings LabelTextAlignment="Center"
                                                                AllowSummaries="True"
                                                                >
                                                <igDP:FieldSettings.EditorStyle>
                                                    <Style TargetType="{x:Type smc:NumericTextBox}">
                                                        <Setter Property="IsReadOnly">
                                                            <Setter.Value>
                                                                <MultiBinding Converter="{StaticResource ReadOnlyConverter}"
                                                                                  ConverterParameter="CT;tien_nt">
                                                                    <Binding RelativeSource="{RelativeSource AncestorType={x:Type igDP:CellValuePresenter}, Mode=FindAncestor}"
                                                                                 Path="Record.Cells[so_luong].Value"
                                                                                 Mode="OneWay" />
                                                                    <Binding RelativeSource="{RelativeSource AncestorType={x:Type igDP:CellValuePresenter}, Mode=FindAncestor}"
                                                                                 Path="Record.Cells[gia_nt].Value"
                                                                                 Mode="OneWay" />
                                                                    <Binding Path="Value"
                                                                                 Source="{StaticResource IsCheckedSua_tien}"
                                                                                 Mode="OneWay" />
                                                                    <Binding Path="Value"
                                                                                 Source="{StaticResource IsCheckedPn_gia_tb}"
                                                                                 Mode="OneWay" />
                                                                    <Binding RelativeSource="{RelativeSource AncestorType={x:Type igDP:CellValuePresenter}, Mode=FindAncestor}"
                                                                                 Path="Record.Cells[gia_ton].Value"
                                                                                 Mode="OneWay" />
                                                                    <Binding Path="Value"
                                                                         Source="{StaticResource IsInEditMode}"
                                                                         Mode="OneWay" />
                                                                </MultiBinding>
                                                            </Setter.Value>
                                                        </Setter>
                                                        <Setter Property="Format"
                                                                Value="{Binding Path=Text, Source={StaticResource Voucher_Ma_nt0}, Converter={StaticResource MaskNumeric}, ConverterParameter=M_IP_TIEN_NT}" />
                                                    </Style>
                                                </igDP:FieldSettings.EditorStyle>
                                            </igDP:FieldSettings>
                                        </igDP:Field.Settings>
                                    </igDP:Field>
                                    
                                    <!--Tk kho (tk vật tư)-->
                                    <igDP:Field Label="Tk kho"
                                                    Name="tk_vt"
                                                    Width="80">
                                        <igDP:Field.Settings>
                                            <igDP:FieldSettings LabelTextAlignment="Center"
                                                                >
                                                <igDP:FieldSettings.EditorStyle>
                                                    <Style TargetType="{x:Type smc:ControlHostEditor}">
                                                        <Setter Property="EditDataTemplate"
                                                                    Value="{StaticResource ControlSearchTk_vt}" />
                                                        <Setter Property="Template"
                                                                    Value="{Binding Path=EditTemplate, RelativeSource={RelativeSource Self}}" />
                                                    </Style>
                                                </igDP:FieldSettings.EditorStyle>
                                            </igDP:FieldSettings>
                                        </igDP:Field.Settings>
                                    </igDP:Field>
                                    
                                    <!--Tk gíá vốn-->
                                    <igDP:Field Label="Tk gv"
                                                    Name="tk_gv"
                                                    Width="80">
                                        <igDP:Field.Settings>
                                            <igDP:FieldSettings LabelTextAlignment="Center"
                                                                >
                                                <igDP:FieldSettings.EditorStyle>
                                                    <Style TargetType="{x:Type smc:ControlHostEditor}">
                                                        <Setter Property="EditDataTemplate"
                                                                    Value="{StaticResource ControlSearchTk_gv}" />
                                                        <Setter Property="Template"
                                                                    Value="{Binding Path=EditTemplate, RelativeSource={RelativeSource Self}}" />
                                                    </Style>
                                                </igDP:FieldSettings.EditorStyle>
                                            </igDP:FieldSettings>
                                        </igDP:Field.Settings>
                                    </igDP:Field>
                                    
                                    <!--Tk cp khuyen mai-->
                                    <igDP:Field Label="Tk cp km"
                                                    Name="tk_km_i"
                                                    Width="80">
                                        <igDP:Field.Settings>
                                            <igDP:FieldSettings LabelTextAlignment="Center"
                                                                AllowEdit="True">
                                                <igDP:FieldSettings.EditorStyle>
                                                    <Style TargetType="{x:Type smc:ControlHostEditor}">
                                                        <Setter Property="EditDataTemplate"
                                                                    Value="{StaticResource ControlSearchTk_km_i}" />
                                                        <Setter Property="Template"
                                                                    Value="{Binding Path=EditTemplate, RelativeSource={RelativeSource Self}}" />
                                                    </Style>
                                                </igDP:FieldSettings.EditorStyle>
                                            </igDP:FieldSettings>
                                        </igDP:Field.Settings>
                                    </igDP:Field>
                                    
                                    <!--Tk chiet khau-->
                                    <igDP:Field Label="Tk ck"
                                                    Name="tk_ck"
                                                    Width="80">
                                        <igDP:Field.Settings>
                                            <igDP:FieldSettings LabelTextAlignment="Center"
                                                                >
                                                <igDP:FieldSettings.EditorStyle>
                                                    <Style TargetType="{x:Type smc:ControlHostEditor}">
                                                        <Setter Property="EditDataTemplate"
                                                                    Value="{StaticResource ControlSearchTk_ck}" />
                                                        <Setter Property="Template"
                                                                    Value="{Binding Path=EditTemplate, RelativeSource={RelativeSource Self}}" />
                                                    </Style>
                                                </igDP:FieldSettings.EditorStyle>
                                            </igDP:FieldSettings>
                                        </igDP:Field.Settings>
                                    </igDP:Field>
                                    
                                    <!--Giá bán VND-->
                                    <igDP:Field Label="Giá bán VND"
                                                    Name="gia2"
                                                    Width="130">
                                        <igDP:Field.Settings>
                                            <igDP:FieldSettings LabelTextAlignment="Center"
                                                                >
                                                <igDP:FieldSettings.EditorStyle>
                                                    <Style TargetType="{x:Type smc:NumericTextBox}">
                                                        <Setter Property="IsReadOnly">
                                                            <Setter.Value>
                                                                <MultiBinding Converter="{StaticResource ReadOnlyConverter}"
                                                                                  ConverterParameter="CT;gia2">
                                                                    <Binding RelativeSource="{RelativeSource AncestorType={x:Type igDP:CellValuePresenter}, Mode=FindAncestor}"
                                                                                 Path="Record.Cells[so_luong].Value"
                                                                                 Mode="OneWay" />
                                                                    <Binding RelativeSource="{RelativeSource AncestorType={x:Type igDP:CellValuePresenter}, Mode=FindAncestor}"
                                                                                 Path="Record.Cells[gia_nt2].Value"
                                                                                 Mode="OneWay" />
                                                                    <Binding Path="Value"
                                                                                 Source="{StaticResource IsCheckedSua_tien}"
                                                                                 Mode="OneWay" />
                                                                    <Binding Path="Value"
                                                                         Source="{StaticResource IsInEditMode}"
                                                                         Mode="OneWay" />

                                                                </MultiBinding>
                                                            </Setter.Value>
                                                        </Setter>
                                                        <Setter Property="Format"
                                                                Value="{Binding Path=Text, Source={StaticResource Voucher_Ma_nt0}, Mode=OneWay, Converter={StaticResource MaskNumeric}, ConverterParameter=M_IP_GIA}" />
                                                    </Style>
                                                </igDP:FieldSettings.EditorStyle>
                                            </igDP:FieldSettings>
                                        </igDP:Field.Settings>
                                    </igDP:Field>
                                    
                                    <!--Thành tiền VND-->
                                    <igDP:Field Label="Thành tiền VND"
                                                    Name="tien2"
                                                    Width="130">
                                        <igDP:Field.Settings>
                                            <igDP:FieldSettings LabelTextAlignment="Center"
                                                                AllowSummaries="True"
                                                                >
                                                <igDP:FieldSettings.EditorStyle>
                                                    <Style TargetType="{x:Type smc:NumericTextBox}">
                                                        <Setter Property="IsReadOnly">
                                                            <Setter.Value>
                                                                <MultiBinding Converter="{StaticResource ReadOnlyConverter}"
                                                                                  ConverterParameter="CT;tien2">
                                                                    <Binding RelativeSource="{RelativeSource AncestorType={x:Type igDP:CellValuePresenter}, Mode=FindAncestor}"
                                                                                 Path="Record.Cells[tien_nt2].Value"
                                                                                 Mode="OneWay" />
                                                                    <Binding Path="Value"
                                                                                 Source="{StaticResource IsCheckedSua_tien}"
                                                                                 Mode="OneWay" />
                                                                    <Binding Path="Value"
                                                                         Source="{StaticResource IsInEditMode}"
                                                                         Mode="OneWay" />
                                                                </MultiBinding>
                                                            </Setter.Value>
                                                        </Setter>
                                                        <Setter Property="Format"
                                                                Value="{Binding Path=Text, Source={StaticResource Voucher_Ma_nt0}, Converter={StaticResource MaskNumeric}, ConverterParameter=M_IP_TIEN}" />
                                                    </Style>
                                                </igDP:FieldSettings.EditorStyle>
                                            </igDP:FieldSettings>
                                        </igDP:Field.Settings>
                                    </igDP:Field>
                                    
                                    <!--Giá vốn VND-->
                                    <igDP:Field Label="Giá vốn VND"
                                                    Name="gia"
                                                    Width="130">
                                        <igDP:Field.Settings>
                                            <igDP:FieldSettings LabelTextAlignment="Center"
                                                                >
                                                <igDP:FieldSettings.EditorStyle>
                                                    <Style TargetType="{x:Type smc:NumericTextBox}">
                                                        <Setter Property="IsReadOnly">
                                                            <Setter.Value>
                                                                <MultiBinding Converter="{StaticResource ReadOnlyConverter}"
                                                                                  ConverterParameter="CT;gia">
                                                                    <Binding RelativeSource="{RelativeSource AncestorType={x:Type igDP:CellValuePresenter}, Mode=FindAncestor}"
                                                                                 Path="Record.Cells[so_luong].Value"
                                                                                 Mode="OneWay" />
                                                                    <Binding RelativeSource="{RelativeSource AncestorType={x:Type igDP:CellValuePresenter}, Mode=FindAncestor}"
                                                                                 Path="Record.Cells[gia_nt].Value"
                                                                                 Mode="OneWay" />
                                                                    <Binding Path="Value"
                                                                                 Source="{StaticResource IsCheckedSua_tien}"
                                                                                 Mode="OneWay" />
                                                                    <Binding Path="Value"
                                                                                 Source="{StaticResource IsCheckedPn_gia_tb}"
                                                                                 Mode="OneWay" />
                                                                    <Binding RelativeSource="{RelativeSource AncestorType={x:Type igDP:CellValuePresenter}, Mode=FindAncestor}"
                                                                                 Path="Record.Cells[gia_ton].Value"
                                                                                 Mode="OneWay" />
                                                                    <Binding Path="Value"
                                                                         Source="{StaticResource IsInEditMode}"
                                                                         Mode="OneWay" />
                                                                </MultiBinding>
                                                            </Setter.Value>
                                                        </Setter>
                                                        <Setter Property="Format"
                                                                Value="{Binding Path=Text, Source={StaticResource Voucher_Ma_nt0}, Mode=OneWay, Converter={StaticResource MaskNumeric}, ConverterParameter=M_IP_GIA}" />
                                                    </Style>
                                                </igDP:FieldSettings.EditorStyle>
                                            </igDP:FieldSettings>
                                        </igDP:Field.Settings>
                                    </igDP:Field>

                                    <!--Tiền vốn VND-->
                                    <igDP:Field Label="Tiền vốn VND"
                                                    Name="tien"
                                                    Width="130">
                                        <igDP:Field.Settings>
                                            <igDP:FieldSettings LabelTextAlignment="Center"
                                                                AllowSummaries="True"
                                                                >
                                                <igDP:FieldSettings.EditorStyle>
                                                    <Style TargetType="{x:Type smc:NumericTextBox}">
                                                        <Setter Property="IsReadOnly">
                                                            <Setter.Value>
                                                                <MultiBinding Converter="{StaticResource ReadOnlyConverter}"
                                                                                  ConverterParameter="CT;tien">
                                                                    <Binding RelativeSource="{RelativeSource AncestorType={x:Type igDP:CellValuePresenter}, Mode=FindAncestor}"
                                                                                 Path="Record.Cells[tien_nt].Value"
                                                                                 Mode="OneWay" />
                                                                    <Binding Path="Value"
                                                                                 Source="{StaticResource IsCheckedSua_tien}"
                                                                                 Mode="OneWay" />
                                                                    <Binding Path="Value"
                                                                                 Source="{StaticResource IsCheckedPn_gia_tb}"
                                                                                 Mode="OneWay" />
                                                                    <Binding RelativeSource="{RelativeSource AncestorType={x:Type igDP:CellValuePresenter}, Mode=FindAncestor}"
                                                                                 Path="Record.Cells[gia_ton].Value"
                                                                                 Mode="OneWay" />
                                                                    <Binding Path="Value"
                                                                         Source="{StaticResource IsInEditMode}"
                                                                         Mode="OneWay" />
                                                                </MultiBinding>
                                                            </Setter.Value>
                                                        </Setter>
                                                        <Setter Property="Format"
                                                                Value="{Binding Path=Text, Source={StaticResource Voucher_Ma_nt0}, Converter={StaticResource MaskNumeric}, ConverterParameter=M_IP_TIEN}" />
                                                    </Style>
                                                </igDP:FieldSettings.EditorStyle>
                                            </igDP:FieldSettings>
                                        </igDP:Field.Settings>
                                    </igDP:Field>

                                    <!--Ck VND-->
                                    <igDP:Field Label="Ck VND"
                                                    Name="ck"
                                                    Width="130">
                                        <igDP:Field.Settings>
                                            <igDP:FieldSettings LabelTextAlignment="Center"
                                                                AllowSummaries="True"
                                                                >
                                                <igDP:FieldSettings.EditorStyle>
                                                    <Style TargetType="{x:Type smc:NumericTextBox}">
                                                        <Setter Property="IsReadOnly">
                                                            <Setter.Value>
                                                                <MultiBinding Converter="{StaticResource ReadOnlyConverter}"
                                                                                  ConverterParameter="CT;ck">
                                                                    <Binding RelativeSource="{RelativeSource AncestorType={x:Type igDP:CellValuePresenter}, Mode=FindAncestor}"
                                                                                 Path="Record.Cells[ck_nt].Value"
                                                                                 Mode="OneWay" />
                                                                    <Binding Path="Value"
                                                                                 Source="{StaticResource IsCheckedSua_tien}"
                                                                                 Mode="OneWay" />
                                                                    <Binding RelativeSource="{RelativeSource AncestorType={x:Type igDP:CellValuePresenter}, Mode=FindAncestor}"
                                                                                 Path="Record.Cells[tl_ck].Value"
                                                                                 Mode="OneWay" />
                                                                    <Binding Path="Value"
                                                                         Source="{StaticResource IsInEditMode}"
                                                                         Mode="OneWay" />
                                                                </MultiBinding>
                                                            </Setter.Value>
                                                        </Setter>
                                                        <Setter Property="Format"
                                                                Value="{Binding Path=Text, Source={StaticResource Voucher_Ma_nt0}, Converter={StaticResource MaskNumeric}, ConverterParameter=M_IP_TIEN}" />
                                                    </Style>
                                                </igDP:FieldSettings.EditorStyle>
                                            </igDP:FieldSettings>
                                        </igDP:Field.Settings>
                                    </igDP:Field>
                                    
                                    <!--Cac cot hidden dung de kiem tra-->

                                    <!--sua_tk_vt-->
                                    <igDP:Field Label="Sửa tk kho"
                                                Name="sua_tk_vt"
                                                Visibility="Hidden"
                                                Width="100">
                                        <igDP:Field.Settings>
                                            <igDP:FieldSettings AllowEdit="False"
                                                                EditAsType="{x:Type System:Decimal}"
                                                                EditorType="{x:Type smc:NumericTextBox}" />
                                        </igDP:Field.Settings>
                                    </igDP:Field>
                                    <igDP:Field Name="vt_ton_kho"
                                                Visibility="Hidden"
                                                Width="100">
                                        <igDP:Field.Settings>
                                            <igDP:FieldSettings AllowEdit="False"/>
                                        </igDP:Field.Settings>
                                    </igDP:Field>
                                </igDP:FieldLayout>
                            </smc:DataGridView.FieldLayouts>
                        </smc:DataGridView>
                    </smc:GridLayout>
                </igWindows:TabItemEx>
            </igWindows:XamTabControl>

            <StackPanel HorizontalAlignment="Right" 
                        VerticalAlignment="Top" 
                        Name="stackIsCheckedSuaTien"
                        Orientation="Horizontal">

                <!--sua truong tien (binding sua_tien)-->
                <CheckBox Grid.Column="0"
                          Grid.Row="0"
                          Margin="0,0,25,0"
                          Name="ChkSuaTien"
                          Content="Sửa trường tiền"
                          IsTabStop="False"
                          Click="ChkSuaTien_Click"
                          IsChecked="{smc:BindingEx sua_tien, Converter={StaticResource IsCheckedConverter}}"
                          Style="{StaticResource CheckBoxEditModeEnable}" />
               
                <!--Nhập theo giá trung bình cho vật tư tính giá trung bình (binding pn_gia_tb)-->
                <CheckBox Grid.Column="0"
                          Grid.Row="0"
                          Margin="0,0,25,0"
                          x:Name="ChkNhapGiaTB"
                          Content="Nhập theo giá TB cho v.tư tính giá TB"
                          IsTabStop="False"
                          IsChecked="{smc:BindingEx pn_gia_tb, Converter={StaticResource IsCheckedConverter}}"
                          Style="{StaticResource CheckBoxEditModeEnable}"
                          Click="ChkNhapGiaTB_Click"
                          />
                   <CheckBox Grid.Column="0"
                          Grid.Row="0"
                          Margin="0,0,25,0"
                          x:Name="ChkThueDauVao"
                          Content="Khai báo thuế đầu vào"
                          IsTabStop="False"
                          IsChecked="{smc:BindingEx thue_dau_vao, Converter={StaticResource IsCheckedConverter}}"
                          Style="{StaticResource CheckBoxEditModeEnable}"/>
                <TextBlock Name="tblCtrlTab"
                           Text="F5 - Xem hđ      Ctrl + Tab - Ra khỏi chi tiết"
                           Margin="0,4,0,0"
                           Style="{StaticResource ContentTextStyle}"
                           Height="19"
                           />
            </StackPanel>

        </smc:GridLayout>

        <!--GrdLayout12: check sua tien thue-->
        <smc:GridLayout Name="GrdLayout12"
                        Grid.Row="4"
                        RowCount="1"
                        
                        Margin="12,6,12,2">
            <StackPanel HorizontalAlignment="Left" 
                        VerticalAlignment="Center" 
                        Name="stackIsCheckedSuaThue"
                        Orientation="Horizontal">

                
                <!--Sửa hạch toán thuế (binding sua_tkthue-->
                <CheckBox Grid.Column="0"
                          Grid.Row="0"
                          Margin="0,0,25,0"
                          Name="ChkSuaHtThue"
                          Content="Sửa ht thuế"
                          IsTabStop="False"
                          Click="ChkSuaHtThue_Click"
                          IsChecked="{smc:BindingEx sua_tkthue, Converter={StaticResource IsCheckedConverter}}"
                          Style="{StaticResource CheckBoxEditModeEnable}" />

                <!--Sửa tiền thuế (binding sua_thue)-->
                <CheckBox Grid.Column="0"
                          Grid.Row="0"
                          Margin="0,0,25,0"
                          x:Name="ChkSuaTienThue"
                          Content="Sửa tiền thuế"
                          IsTabStop="False"
                          Click="ChkSuaTienThue_Click"
                          IsChecked="{smc:BindingEx sua_thue, Converter={StaticResource IsCheckedConverter}}"
                          Style="{StaticResource CheckBoxEditModeEnable}"
                          />
                


                <!--<Binding Converter="{StaticResource ReadOnlyPH}"
                                                 ConverterParameter="ong_ba"
                                                 Mode="OneWay"
                                                 Source="{StaticResource IsInEditMode}"
                                                 Path="Value" />-->
                
                <!--Tính thuế theo gia trước chiết khấu (binding thue_ck0-->
                <CheckBox Grid.Column="0"
                          Grid.Row="0"
                          Margin="0,0,0,0"
                          x:Name="ChkTinhThueTruocCK"
                          Content="Tính thuế theo giá trước chiết khấu"
                          IsTabStop="False"
                          Click="ChkTinhThueTruocCK_Click"
                          IsChecked="{smc:BindingEx thue_ck0, Converter={StaticResource IsCheckedConverter}}"
                          Style="{StaticResource CheckBoxEditModeEnable}"
                          />
            </StackPanel>

        </smc:GridLayout>

        <!--Groupbox Tổng cộng-->
        <GroupBox Header="Tổng cộng"
                  Margin="12,0,12,12"
                  Name="gbTotal"
                  Grid.Column="0"
                  Grid.Row="5">
            <smc:GridLayout ColumnCount="7"
                            Name="GrdLayout30"
                            ColumnWidths="*,12,200,12,240,12,140">
                
                <!--GrdLayout23: ghi chu-->
                <smc:GridLayout Name="GrdLayout23"
                                Grid.Row="0"
                                Grid.Column="0"
                                RowCount="5"
                                ColumnCount="2"
                                HeightPerRow="25"
                                ColumnWidths="80,160*"
                                >
                    
                    <!--Mã thuế-->
                    <TextBlock Grid.Column="0"
                           Grid.Row="0"
                           Name="tblMa_thue"
                           Style="{StaticResource ContentTextStyle}"
                           Text="Mã thuế GTGT" />
                    <smc:GridLayout Grid.Row="0"
                                    Grid.Column="1"
                                    ColumnCount="3"
                                    Name="GrdMaThue"
                                    ColumnWidths="*,60,*">
                    <smc:AutoCompleteTextBox x:Name="txtMa_thue" 
                                             TabIndex="90"
                                             nRow="6"
                                             Style="{StaticResource AutoCompleteTextBoxEditModeEnable}"
                                             ParentControl="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType=Window}}"
                                             SysObj="{Binding BindingSysObj, ElementName=FormMain}"
                                             Text="{smc:BindingEx Path=ma_thue}"
                                             ListID="dmthue"
                                             PreviewLostFocus="txtMa_thue_PreviewLostFocus"/>
                        <TextBlock  Grid.Column="1"
                           Name="tblMa_TC"
                                    Margin="12,2.5,0,2.5"
                           Style="{StaticResource ContentTextStyle}"
                           Text="Mã TC" />
                        <smc:AutoCompleteTextBox x:Name="txtMa_Tc" 
                                             TabIndex="91"
                                             nRow="6"
                                                 AllowEmty="True"
                                                 AllowWrong="False"
                                                 Grid.Column="2"
                                             ParentControl="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType=Window}}"
                                             SysObj="{Binding BindingSysObj, ElementName=FormMain}"
                                             Text="{smc:BindingEx Path=ma_ms}"
                                             ListID="dmms" Height="25.2" VerticalAlignment="Top">
                            <smc:AutoCompleteTextBox.Style>
                                <Style TargetType="{x:Type smc:AutoCompleteTextBox}">
                                    <Setter Property="IsReadOnly">
                                        <Setter.Value>
                                            <MultiBinding Converter="{StaticResource ReadOnlyConverter}"
                                                          ConverterParameter="PH;ma_tc">
                                                <Binding Path="Value"
                                                         Source="{StaticResource IsInEditMode}"
                                                         Mode="OneWay"/>
                                                <Binding Path="thue_dau_vao"
                                                         Mode="OneWay"/>
                                            </MultiBinding>
                                        </Setter.Value>
                                    </Setter>
                                </Style>

                            </smc:AutoCompleteTextBox.Style>
                        </smc:AutoCompleteTextBox>
                    </smc:GridLayout>
                    <!--Thuế suất-->
                    <TextBlock Grid.Column="0"
                           Grid.Row="1"
                           Name="tblThue_suat"
                           Style="{StaticResource ContentTextStyle}"
                           Text="Thuế suất (%)" />

                    <smc:NumericTextBox x:Name="txtThue_suat"
                                        IsReadOnly="True"
                                        Grid.Row="1"
                                        Grid.Column="1"
                                        Value="{smc:BindingEx Path=thue_suat}"
                                        />

                    <!--Tk thuế-->
                    <TextBlock Grid.Column="0"
                           Grid.Row="2"
                           Name="tblTk_thue"
                           Style="{StaticResource ContentTextStyle}"
                           Text="Tk thuế" />

                    <smc:GridLayout Grid.Column="1"
                                    Grid.Row="2"
                                    ColumnCount="3"
                                    Name="GrdTkThue"
                                    ColumnWidths="*,10,*"
                                    >

                        <smc:AutoCompleteTextBox x:Name="txtTk_thue_no"
                                                 Grid.Column="0"
                                                 Grid.Row="0"
                                                 TabIndex="95"
                                                 Text="{smc:BindingEx Path=tk_thue_no}"
                                                 ParentControl="{Binding ElementName=FormMain}"
                                                 SysObj="{Binding Path=BindingSysObj,ElementName=FormMain}"
                                                 AllowEmty="False"
                                                 AllowWrong="False"
                                                 ListID="dmtk1"
                                                 IsTabStop="{smc:BindingEx sua_tkthue, Converter={StaticResource IsCheckedConverter}}" 
                                                 PreviewLostFocus="txtTk_thue_no_PreviewLostFocus">
                           <smc:AutoCompleteTextBox.Style>
                                <Style TargetType="{x:Type smc:AutoCompleteTextBox}">
                                    <Setter Property="IsReadOnly">
                                        <Setter.Value>
                                            <MultiBinding Converter="{StaticResource ReadOnlyConverter}"
                                                          ConverterParameter="CT;tk_thue_co_IsReadOnly">
                                                <Binding Path="sua_tkthue"
                                                         Mode="OneWay"/>
                                                <Binding Path="Value"
                                                         Source="{StaticResource IsInEditMode}"
                                                         Mode="OneWay"/>
                                                <Binding Path="loai_tk_no"
                                                         Mode="OneWay"/>
                                            </MultiBinding>
                                        </Setter.Value>
                                    </Setter>
                                </Style>

                            </smc:AutoCompleteTextBox.Style>
                        </smc:AutoCompleteTextBox>
                        <TextBlock Name="tblPhan_cach"
                                   Text=" / "
                                   Grid.Row="0"
                                   Grid.Column="1"/>

                        <smc:AutoCompleteTextBox x:Name="txtTk_thue_co"
                                                 Grid.Column="2"
                                                 Grid.Row="0"
                                                 TabIndex="100"
                                                 Text="{smc:BindingEx Path=tk_thue_co}"
                                                 ParentControl="{Binding ElementName=FormMain}"
                                                 SysObj="{Binding Path=BindingSysObj,ElementName=FormMain}"
                                                 AllowEmty="False"
                                                 AllowWrong="False"
                                                 ListID="dmtk1"
                                                 IsTabStop="{smc:BindingEx sua_tkthue, Converter={StaticResource IsCheckedConverter}}"
                                                 >
                            <smc:AutoCompleteTextBox.Style>
                                <Style TargetType="{x:Type smc:AutoCompleteTextBox}">
                                    <Setter Property="IsReadOnly">
                                        <Setter.Value>
                                            <MultiBinding Converter="{StaticResource ReadOnlyConverter}"
                                                          ConverterParameter="CT;tk_thue_co_IsReadOnly">
                                                <Binding Path="sua_tkthue"
                                                         Mode="OneWay"/>
                                                <Binding Path="Value"
                                                         Source="{StaticResource IsInEditMode}"
                                                         Mode="OneWay"/>
                                            </MultiBinding>
                                        </Setter.Value>
                                    </Setter>
                                </Style>

                            </smc:AutoCompleteTextBox.Style>
                        </smc:AutoCompleteTextBox>
                    </smc:GridLayout>



                    <!--ghi chu-->
                    <smc:ExTextBox Name="tblGhi_chu"
                             Grid.Row="3"
                             Grid.Column="0"
                             Grid.RowSpan="2"
                             Style="{StaticResource TextBoxEditModeEnable}"
                             Margin="0,0,0,0"
                             TextAlignment="Right"
                             HorizontalAlignment="Left"
                             IsReadOnly="True"
                             Width="96"
                             Height="25"
                             Text="Ghi chú"
                                   Text2="Note">
                        <smc:ExTextBox.LayoutTransform>
                            <RotateTransform Angle="-90" />
                        </smc:ExTextBox.LayoutTransform>
                    </smc:ExTextBox>
                    
                    <TextBox x:Name="txtGhi_chu"
                             Grid.Column="0"
                             Grid.Row="3"
                             Grid.RowSpan="2"
                             Grid.ColumnSpan="2"
                             Height="48"
                             IsTabStop="False"
                             TabIndex="140"
                             Margin="25,2,0,2"
                             VerticalScrollBarVisibility="Auto"
                             TextWrapping="Wrap"
                             Text="{smc:BindingEx ghi_chu0}"
                             Style="{StaticResource TextBoxEditModeEnable}"
                             />
                </smc:GridLayout><!-- End GrdLayout23: ghi chu-->

                <!--GrdLayout22: so luong-->
                <smc:GridLayout Name="GrdLayout22"
                                Grid.Row="0"
                                Grid.Column="2"
                                RowCount="5"
                                ColumnCount="2"
                                HeightPerRow="25"
                                ColumnWidths="*,120"
                                >
                    <!--Tổng số lượng-->
                    <TextBlock Grid.Column="0"
                           Grid.Row="0"
                           Name="tblSo_luong"
                           Style="{StaticResource ContentTextStyle}"
                           Text="Số lượng" />

                    <smc:NumericTextBox x:Name="txtSo_luong" 
                                    IsEnabled="False"
                                    Grid.Row="0"
                                    Grid.Column="1"
                                    Value="{smc:BindingEx Path=t_so_luong}"
                                    IsTabStop="False"
                                    Format="{Binding Path=Text, Source={StaticResource Voucher_Ma_nt0}, Mode=OneWay, Converter={StaticResource MaskNumeric}, ConverterParameter=M_IP_SL}"/>

                    <Button Grid.Column="0"
                            Grid.Row="4"
                            Name="btnThongTin"
                            IsTabStop="False"
                            Margin="0,0,0,0"
                            Width="75" HorizontalAlignment="Left"
                            Click="btnThongTin_Click">
                        Thông tin</Button>
                    
                    <!--cuc thue-->
                    <TextBlock Text="Cục thuế"
                               Name="tblCuc_thue"
                               Grid.Row="1"
                               Grid.Column="0"
                               Style="{StaticResource ContentTextStyle}" />

                    <smc:AutoCompleteTextBox x:Name="txtMa_kh2"
                                             Grid.Column="1"
                                             Grid.Row="1"
                                             TabIndex="100"
                                             Text="{smc:BindingEx Path=ma_kh2}"
                                             ParentControl="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType=Window}}"
                                             SysObj="{Binding Path=BindingSysObj,RelativeSource={RelativeSource FindAncestor, AncestorType=Window}}"
                                             AllowEmty="False"
                                             AllowWrong="False"
                                             ListID="dmkh"
                                             GotFocus="txtMa_kh2_GotFocus">
                        <smc:AutoCompleteTextBox.Style>

                            <Style TargetType="{x:Type smc:AutoCompleteTextBox}">
                                <Setter Property="IsReadOnly">
                                    <Setter.Value>
                                        <MultiBinding Converter="{StaticResource ReadOnlyConverter}"
                                                      ConverterParameter="CT;ma_kh2_ph">
                                            <Binding Path="tk_thue_no_cn"
                                                     Mode="OneWay" />
                                            <Binding Path="Value"
                                                     Source="{StaticResource IsInEditMode}"
                                                     Mode="OneWay" />
                                        </MultiBinding>
                                    </Setter.Value>
                                </Setter>

                            </Style>
                        </smc:AutoCompleteTextBox.Style>

                    </smc:AutoCompleteTextBox>

                    <!--Nhóm hàng-->
                <TextBlock Text="Nhóm hàng"
                           Name="tblNhom_hang"
                           Grid.Row="2"
                           Grid.Column="0"
                           Style="{StaticResource ContentTextStyle}" />
                <TextBox Name="txtNhom_hang"
                         Text="{smc:BindingEx Path=ten_vtthue}"
                         TabIndex="105"
                         Grid.Column="1"
                         Grid.Row="2"
                         Style="{StaticResource TextBoxEditModeEnable}"
                         />
                    
                <!--Nhóm hàng-->
                <TextBlock Text="Ghi chú thuế"
                       Name="tblGc_thue"
                       Grid.Row="3"
                       Grid.Column="0"
                       Style="{StaticResource ContentTextStyle}" />
                <TextBox Name="txtGc_thue"
                     Text="{smc:BindingEx Path=gc_thue}"
                     TabIndex="107"
                     Grid.Column="1"
                     Grid.Row="3"
                     PreviewKeyDown="txtGc_thue_PreviewKeyDown"
                     Style="{StaticResource TextBoxEditModeEnable}"
                     />
                </smc:GridLayout><!-- End GrdLayout23: so luong-->

                <!--GrdLayout21: Tổng tiền nt-->
                <smc:GridLayout x:Name="GrdLayout21"
                                Grid.Row="0"
                                Grid.Column="4"
                                RowCount="5"
                                ColumnCount="2"
                                HeightPerRow="25"
                                ColumnWidths="*,140">

                    <!--Tiền vốn nt-->
                    <TextBlock Text="Cộng tiền vốn"
                               Name="tblT_tien_nt"
                               Grid.Column="0"
                               Grid.Row="0"
                               Style="{StaticResource ContentTextStyle}" />
                    <smc:NumericTextBox x:Name="txtT_Tien_nt"
                                        Value="{smc:BindingEx Path=t_tien_nt}"
                                        IsEnabled="False"
                                        Grid.Row="0"
                                        Grid.Column="1"
                                        Format="{Binding Path=Text, Source={StaticResource Voucher_Ma_nt0}, Mode=OneWay, Converter={StaticResource MaskNumeric}, ConverterParameter=M_IP_TIEN_NT}"/>
                    
                    <!--Tiền hàng nt-->
                    <TextBlock Text="Cộng tiền hàng"
                               Name="tblT_tien_nt2"
                               Grid.Column="0"
                               Grid.Row="1" 
                               Style="{StaticResource ContentTextStyle}" />
                    <smc:NumericTextBox x:Name="txtT_Tien_nt2"
                                        Grid.Row="1"
                                        Value="{smc:BindingEx Path=t_tien_nt2}"
                                        IsEnabled="False"
                                        Grid.Column="3"
                                        Format="{Binding Path=Text, Source={StaticResource Voucher_Ma_nt0}, Mode=OneWay, Converter={StaticResource MaskNumeric}, ConverterParameter=M_IP_TIEN_NT}" />
                    
                    <!--Tiền thuế nt-->
                    <TextBlock Text="Tiền thuế GTGT"
                               Name="tblT_thue_nt"
                               Grid.Column="0"
                               Grid.Row="3" 
                               Style="{StaticResource ContentTextStyle}" />
                    <smc:NumericTextBox x:Name="txtT_thue_nt"
                                        Grid.Row="3"
                                        Value="{smc:BindingEx Path=t_thue_nt}"
                                        TabIndex="103"
                                        IsEnabled="{smc:BindingEx sua_thue, Converter={StaticResource IsCheckedConverter}}"
                                        Grid.Column="3"
                                        LostFocus="txtT_thue_nt_LostFocus"
                                        Style="{StaticResource NumericTextBoxrEditModeEnable}"
                                        Format="{Binding Path=Text ,Source={StaticResource Voucher_Ma_nt0}, Converter={StaticResource MaskNumeric}, ConverterParameter=M_IP_TIEN_NT}" />

                    <!--Chiết khấu nt-->
                    <TextBlock Text="Tiền ck"
                               Name="tblT_ck_nt"
                               Grid.Column="0"
                               Grid.Row="2" 
                               Style="{StaticResource ContentTextStyle}" />
                    <smc:NumericTextBox x:Name="txtT_ck_nt"
                                        IsEnabled="False"
                                        Value="{smc:BindingEx Path=t_ck_nt}"
                                        Grid.Row="2"
                                        Grid.Column="3"
                                        Format="{Binding Path=Text, Source={StaticResource Voucher_Ma_nt0}, Mode=OneWay, Converter={StaticResource MaskNumeric}, ConverterParameter=M_IP_TIEN_NT}" />

                    <!--Tổng tt nt-->
                    <TextBlock Text="Tổng tiền tt"
                               Name="tblt_tt_nt"
                               Grid.Column="0"
                               Grid.Row="4" 
                               Style="{StaticResource ContentTextStyle}" />
                    <smc:NumericTextBox x:Name="txtT_tt_nt"
                                    IsEnabled="False"
                                    Value="{smc:BindingEx Path=t_tt_nt}"
                                    Grid.Row="4"
                                    Grid.Column="3"
                                    Format="{Binding Path=Text, Source={StaticResource Voucher_Ma_nt0}, Mode=OneWay, Converter={StaticResource MaskNumeric}, ConverterParameter=M_IP_TIEN_NT}" />

                </smc:GridLayout><!--End GrdLayout21: Tổng tiền nt-->

                <!--GrdLayout20: Tổng tiền-->
                <smc:GridLayout x:Name="GrdLayout20"
                                Grid.Row="0"
                                Grid.Column="6"
                                RowCount="5"
                                ColumnCount="1"
                                HeightPerRow="25"
                                ColumnWidths="*">
                    <smc:GridLayout.Visibility>
                        <MultiBinding Converter="{StaticResource VisibilityConverter}"
                                                              ConverterParameter="NotMaNt0">
                            <Binding Path="Value" Source="{StaticResource Voucher_Ma_nt0}"/>
                        </MultiBinding>
                    </smc:GridLayout.Visibility>

                    <!--Tiền vốn VND-->
                    <smc:NumericTextBox x:Name="txtT_Tien"
                                        Value="{smc:BindingEx Path=t_tien}"
                                        IsEnabled="False"
                                        Grid.Row="0"
                                        Grid.Column="0"
                                        Format="{Binding Path=Text, Source={StaticResource Voucher_Ma_nt0}, Mode=OneWay, Converter={StaticResource MaskNumeric}, ConverterParameter=M_IP_TIEN}"/>

                    <!--Tiền bán VND-->
                    <smc:NumericTextBox x:Name="txtT_Tien2"
                                        Grid.Row="1"
                                        Value="{smc:BindingEx Path=t_tien2}"
                                        IsEnabled="False"
                                        Grid.Column="0"
                                        Format="{Binding Path=Text, Source={StaticResource Voucher_Ma_nt0}, Mode=OneWay, Converter={StaticResource MaskNumeric}, ConverterParameter=M_IP_TIEN}" />

                    <!--Tiền thuế VND-->
                    <smc:NumericTextBox x:Name="txtT_thue"
                                        Grid.Row="3"
                                        Value="{smc:BindingEx Path=t_thue}"
                                        TabIndex="104"
                                        IsEnabled="{smc:BindingEx sua_tien, Converter={StaticResource IsCheckedConverter}}"
                                        Grid.Column="0"
                                        Style="{StaticResource NumericTextBoxrEditModeEnable}"
                                        Format="{Binding Path=Text ,Source={StaticResource Voucher_Ma_nt0}, Converter={StaticResource MaskNumeric}, ConverterParameter=M_IP_TIEN}" 
                                        LostFocus="txtT_thue_LostFocus"/>

                    <!--Chiết khấu VND-->
                    <smc:NumericTextBox x:Name="txtT_ck"
                                        IsEnabled="False"
                                        Value="{smc:BindingEx Path=t_ck}"
                                        Grid.Row="2"
                                        Grid.Column="0"
                                        Format="{Binding Path=Text, Source={StaticResource Voucher_Ma_nt0}, Mode=OneWay, Converter={StaticResource MaskNumeric}, ConverterParameter=M_IP_TIEN}" />

                    <!--Tổng tt VND-->
                    <smc:NumericTextBox x:Name="txtT_tt"
                                        IsEnabled="False"
                                        Value="{smc:BindingEx Path=t_tt}"
                                        Grid.Row="4"
                                        Grid.Column="0"
                                        Format="{Binding Path=Text, Source={StaticResource Voucher_Ma_nt0}, Mode=OneWay, Converter={StaticResource MaskNumeric}, ConverterParameter=M_IP_TIEN}" />

                </smc:GridLayout><!--End GrdLayout20: Tổng tiền VND-->

            </smc:GridLayout>
        </GroupBox>
    </smc:GridLayout>
</smvc:FormTrans>
