<smvc:FormTrans xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                xmlns:src="clr-namespace:CACTPC1"
                LanguageID ="CACTPC1_0"
                AssignMaxLengthControlList = "txtSo_ct;txtDia_chi;txtOng_ba;txtDien_giai;txtghi_chu"
                xmlns:igWindows="http://infragistics.com/Windows"
                xmlns:smc="http://Fast.com.vn/Sm/Windows/Controls"
                xmlns:smvc="clr-namespace:SmVoucherLib;assembly=SmVoucherLib"
                xmlns:System="clr-namespace:System;assembly=mscorlib"
                xmlns:igEditors="http://infragistics.com/Editors"
                xmlns:igDP="http://infragistics.com/DataPresenter"
                xmlns:diagnostics="clr-namespace:System.Diagnostics;assembly=WindowsBase"
                xmlns:Local="clr-namespace:CACTPC1"
                x:Class="CACTPC1.FrmCACTPC1"
                Height="680"
                Width="960"
                Theme="Voucher"
                x:Name="FormMain"
                Closed="FormMain_Closed"
                EditModeEnded="FormMain_EditModeEnded"
                Cm_Moi="V_Moi"
                Cm_Sua="V_Sua"
                Cm_Nhan="V_Nhan"
                Cm_Xoa="V_Xoa"
                Cm_In="V_In"
                Cm_Huy="V_Huy"
                Cm_Xem="V_Xem"
                Cm_Tim="V_Tim"
                Cm_Copy="V_Copy"
                Cm_Truoc="V_Truoc"
                Cm_Sau="V_Sau"
                Cm_Dau="V_Dau"
                Cm_Cuoi="V_Cuoi"
                xmlns:igThemes="http://infragistics.com/Themes"
                xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
                xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
                mc:Ignorable="d">
    <smvc:FormTrans.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <smc:CachedResourceDictionary Source="pack://application:,,,/SmStyle;component/TextBlockStyles.xaml" />
                <smc:CachedResourceDictionary Source="pack://application:,,,/SmStyle;component/TextBoxStyles.xaml" />
                <smc:CachedResourceDictionary Source="pack://application:,,,/SmStyle;component/ButtonStyles.xaml" />
                <smc:CachedResourceDictionary Source="pack://application:,,,/SmStyle;component/GroupBoxStyles.xaml" />
                <smc:CachedResourceDictionary Source="pack://application:,,,/SmStyle;component/CheckBoxStyles.xaml" />
                <smc:CachedResourceDictionary Source="pack://application:,,,/SmStyle;component/DateTextBoxStyles.xaml" />
                <smc:CachedResourceDictionary Source="pack://application:,,,/SmStyle;component/NumericTextBoxStyles.xaml" />
                <smc:CachedResourceDictionary Source="pack://application:,,,/SmStyle;component/MaskedTextBoxStyles.xaml" />
                <smc:CachedResourceDictionary Source="pack://application:,,,/SmStyle;component/AutoCompleteTextBoxStyles.xaml" />
                <smc:CachedResourceDictionary Source="pack://application:,,,/SmStyle;component/XamComboEditorStyles.xaml" />
                <smc:CachedResourceDictionary Source="pack://application:,,,/SmStyle;component/ExRateTextBoxStyles.xaml" />
                <smc:CachedResourceDictionary Source="pack://application:,,,/SmStyle;component/TabItemExStyles.xaml" />
            </ResourceDictionary.MergedDictionaries>

            <smvc:BindingStatusVoucher x:Key="StatusVoucher" />
            <smc:CheckBoxConverter x:Key="IsCheckedConverter" />
            <smvc:FormatMaskNumberConverter x:Key="MaskNumeric" />
            <smc:BoolInverter x:Key="BoolInverter" />

            <src:BindingVisibility x:Key="VisibilityConverter" />

            <Local:LanConverter x:Key="LanguageConvert" />

            <src:BindingReadonly x:Key="BindingReadonly" />

            <smc:CodeValueBindingObject x:Key="Voucher_Lan0" />

            <smc:CodeValueBindingObject x:Key="IsInEditMode"
                                        Value="False" />
            <smc:CodeValueBindingObject x:Key="Voucher_Ma_nt0"
                                        Value="False" />
            <smc:CodeValueBindingObject x:Key="Voucher_Ma_nt"
                                        Value="False" />
            <smc:CodeValueBindingObject x:Key="IsCheckedSua_tien"
                                        Value="False" />            
            <smc:CodeValueBindingObject x:Key="IsCheckedSua_tggs"
                                        Value="False" />
            <smc:CodeValueBindingObject x:Key="IsInEditModeThue"
                                        Value="False" />
            <smc:CodeValueBindingObject x:Key="Ty_Gia_ValueChange"
                                        Value="False" />
            <smc:CodeValueBindingObject x:Key="Ma_GD_Value"
                                        Text="" />
            <smc:CodeValueBindingObject x:Key="Loai_tg"
                                        Text="1" />

            <smc:CodeValueBindingObject x:Key="Ip_tien_hd"
                                        Text="" />

            <Style x:Key="ReadOnlyVNDColumn"
                   TargetType="{x:Type TextBox}">
                <Setter Property="IsReadOnly"
                        Value="True" />
                <Style.Triggers>
                    <MultiDataTrigger>
                        <MultiDataTrigger.Conditions>
                            <Condition Binding="{Binding Path=IsChecked, ElementName=ChkSuaTien}"
                                       Value="True" />
                            <Condition Binding="{Binding Path=Value, Source={StaticResource IsInEditMode},Mode=OneWay}"
                                       Value="True" />
                        </MultiDataTrigger.Conditions>
                        <Setter Property="IsReadOnly"
                                Value="False" />
                    </MultiDataTrigger>
                </Style.Triggers>
            </Style>
            <Style x:Key="NumericTextBoxrEditModeEnable"
                   TargetType="{x:Type smc:NumericTextBox}">
                <Setter Property="IsReadOnly"
                        Value="True" />
                <Style.Triggers>
                    <MultiDataTrigger>
                        <MultiDataTrigger.Conditions>
                            <Condition Binding="{smc:BindingEx Path=Value, Source={StaticResource IsInEditMode}}"
                                       Value="True" />
                            <Condition Binding="{Binding Path=Text, Source={StaticResource Ma_GD_Value}}"
                                       Value="4" />
                        </MultiDataTrigger.Conditions>
                        <Setter Property="IsReadOnly"
                                Value="False" />
                    </MultiDataTrigger>
                </Style.Triggers>
            </Style>
            <Style  x:Key="ButtonEditModeDisable"
                    TargetType="{x:Type Button}">
                <Style.Triggers>

                    <DataTrigger Binding="{Binding Path=Value, Source={StaticResource IsInEditMode},Mode=OneWay}"
                                 Value="True">
                        <Setter Property="IsEnabled"
                                Value="False" />
                    </DataTrigger>
                </Style.Triggers>
            </Style>

            <Style x:Key="ButtonEditModeEnable"
                   TargetType="{x:Type Button}">
                <Style.Triggers>
                    <DataTrigger Binding="{Binding Path=Value, Source={StaticResource IsInEditMode},Mode=OneWay}"
                                 Value="False">
                        <Setter Property="IsEnabled"
                                Value="False" />
                    </DataTrigger>
                </Style.Triggers>
            </Style>
            <Style x:Key="TextBoxEditModeEnable"
                   BasedOn="{StaticResource TextBoxStyle}"
                   TargetType="{x:Type TextBox}">
                <Style.Triggers>

                    <DataTrigger Binding="{Binding Path=Value, Source={StaticResource IsInEditMode},Mode=OneWay}"
                                 Value="False">
                        <Setter Property="IsReadOnly"
                                Value="True" />
                    </DataTrigger>
                </Style.Triggers>
            </Style>
            <Style x:Key="ComboBoxEditModeEnable"
                   TargetType="{x:Type igEditors:XamComboEditor}"
                   BasedOn="{StaticResource XamComboEditorStyle}">
                <Setter Property="DisplayMemberPath"
                        Value="ten_act" />
                <Style.Triggers>
                    <!--<DataTrigger Binding="{Binding Path=Value, Source={StaticResource IsInEditMode}}"
                                 Value="False">
                        <Setter Property="IsEnabled"
                                Value="False" />
                        <Setter Property="BorderBrush"
                                Value="#FF7F9DB9" />
                    </DataTrigger>-->
                    <MultiDataTrigger>
                        <MultiDataTrigger.Conditions>
                            <Condition Binding="{Binding Path=Value, Source={StaticResource IsInEditMode},Mode=OneWay}"
                                       Value="False" />
                            <Condition Binding="{Binding Path=M_LAN, RelativeSource={RelativeSource AncestorType={x:Type smvc:FormTrans}}}"
                                       Value="E" />
                        </MultiDataTrigger.Conditions>
                        <Setter Property="DisplayMemberPath"
                                Value="ten_act2" />
                    </MultiDataTrigger>
                    <MultiDataTrigger>
                        <MultiDataTrigger.Conditions>
                            <Condition Binding="{Binding Path=Value, Source={StaticResource IsInEditMode},Mode=OneWay}"
                                       Value="True" />
                            <Condition Binding="{Binding Path=M_LAN, RelativeSource={RelativeSource AncestorType={x:Type smvc:FormTrans}}}"
                                       Value="V" />
                        </MultiDataTrigger.Conditions>
                        <Setter Property="DisplayMemberPath"
                                Value="ten_post" />
                    </MultiDataTrigger>
                    <MultiDataTrigger>
                        <MultiDataTrigger.Conditions>
                            <Condition Binding="{Binding Path=Value, Source={StaticResource IsInEditMode},Mode=OneWay}"
                                       Value="True" />
                            <Condition Binding="{Binding Path=M_LAN, RelativeSource={RelativeSource AncestorType={x:Type smvc:FormTrans}}}"
                                       Value="E" />
                        </MultiDataTrigger.Conditions>
                        <Setter Property="DisplayMemberPath"
                                Value="ten_post2" />
                    </MultiDataTrigger>
                </Style.Triggers>
            </Style>
            <Style x:Key="AutoCompleteTextBoxEditModeEnable"
                   BasedOn="{StaticResource AutoCompleteTextBoxStyle}"
                   TargetType="{x:Type smc:AutoCompleteTextBox}">
                <Style.Triggers>
                    <DataTrigger Binding="{Binding Path=Value, Source={StaticResource IsInEditMode},Mode=OneWay}"
                                 Value="False">
                        <Setter Property="IsReadOnly"
                                Value="True" />
                    </DataTrigger>
                </Style.Triggers>
            </Style>
            <Style x:Key="TabItemFocusVisual">
                <Setter Property="Control.Template">
                    <Setter.Value>
                        <ControlTemplate>
                            <Rectangle SnapsToDevicePixels="true"
                                       Margin="3,3,3,1"
                                       Stroke="Black"
                                       StrokeDashArray="1 2"
                                       StrokeThickness="1" />
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Style>
            <Style x:Key="DateTextBoxEditModeEnable"
                   TargetType="{x:Type smc:DateTextBox}"
                   BasedOn="{StaticResource DateTextBoxStyle}">
                <Style.Triggers>

                    <DataTrigger Binding="{smc:BindingEx Path=Value, Source={StaticResource IsInEditMode},Mode=OneWay}"
                                 Value="False">
                        <Setter Property="IsReadOnly"
                                Value="True" />
                    </DataTrigger>
                </Style.Triggers>
            </Style>
            <Style x:Key="CheckBoxEditModeEnable"
                   TargetType="{x:Type CheckBox}"
                   BasedOn="{StaticResource CheckBoxStyle}">
                <Style.Triggers>
                    <DataTrigger Binding="{Binding Path=Value, Source={StaticResource IsInEditMode},Mode=OneWay}"
                                 Value="False">
                        <Setter Property="IsEnabled"
                                Value="False" />
                        <Setter Property="Foreground"
                                Value="Black" />
                    </DataTrigger>
                </Style.Triggers>
            </Style>
            <Style x:Key="CheckBoxEditModeSuaThueEnable"
                   TargetType="{x:Type CheckBox}"
                   BasedOn="{StaticResource CheckBoxStyle}">
                <Setter Property="IsEnabled"
                        Value="False" />
                <Setter Property="Foreground"
                        Value="Black" />
                <Style.Triggers>
                    <DataTrigger Binding="{Binding Path=Value, Source={StaticResource IsInEditMode},Mode=OneWay}"
                                 Value="False">
                        <Setter Property="Foreground"
                                Value="Black" />
                    </DataTrigger>
                    <MultiDataTrigger>
                        <MultiDataTrigger.Conditions>
                            <Condition Binding="{Binding Path=Value, Source={StaticResource IsInEditMode},Mode=OneWay}"
                                       Value="True" />
                            <Condition Binding="{Binding Path=Text, Source={StaticResource Ma_GD_Value},Mode=OneWay}"
                                       Value="8" />
                        </MultiDataTrigger.Conditions>
                        <Setter Property="IsEnabled"
                                Value="True" />
                    </MultiDataTrigger>
                </Style.Triggers>
            </Style>
        </ResourceDictionary>
    </smvc:FormTrans.Resources>

    <smc:GridLayout x:Name="GrdLayout00"
                    Margin="0"
                    RowCount="4"
                    RowHeights="35,219,65*,114">
        <smc:GridLayout Grid.Row="1"
                        RowCount="1"
                        RowHeights="*"
                        ColumnCount="5"
                        Name="GrdPH"
                        ColumnWidths="23*,10,45*,12,276"
                        Margin="12,4,12,12">
            <!--Thong tin chung -->
            <GroupBox Name="gbInfo"
                      Header="Thông tin chung"
                      Grid.Column="0"
                      Grid.ColumnSpan="3"
                      Grid.Row="0"
                      Margin="0">
                <smc:GridLayout Name="GrdLayout10"
                                RowCount="7"
                                ColumnCount="5"
                                HeightPerRow="25"
                                ColumnWidths="100,140,92*,70,140">
                    <TextBlock Text="Loại phiếu chi"
                               Name="tblma_gd"
                               Grid.Row="0"
                               Grid.Column="0"
                               Style="{StaticResource ContentTextStyle}" />
                    <smc:AutoCompleteTextBox Name="txtMa_gd"
                                             Grid.Column="1"
                                             Grid.Row="0"
                                             TabIndex="1"
                                             SelectAllOnFocus="True"
                                             Text="{smc:BindingEx Path=ma_gd}"
                                             ParentControl="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType=smvc:FormTrans}}"
                                             SysObj="{Binding Path=BindingSysObj,RelativeSource={RelativeSource FindAncestor, AncestorType=smvc:FormTrans}}"
                                             AllowEmty="False"
                                             AllowWrong="False"
                                             ListID="dmmagd"
                                             Filter="ma_ct like 'PC1' and status = 1"
                                             Style="{StaticResource AutoCompleteTextBoxEditModeEnable}"
                                             PreviewLostFocus="txtMa_gd_PreviewLostFocus">
                        <smc:AutoCompleteTextBox.IsReadOnly>
                            <MultiBinding Converter="{StaticResource BindingReadonly}"
                                          ConverterParameter="PH;ma_gd">
                                <Binding  ElementName="GrdCt"
                                          Path="Records[0].Cells[0].Value"
                                          Mode="OneWay" />
                                <Binding  ElementName="GrdCtChi"
                                          Path="Records[0].Cells[0].Value"
                                          Mode="OneWay" />
                                <Binding  ElementName="Grdhd"
                                          Path="Records[0].Cells[0].Value"
                                          Mode="OneWay" />
                                <Binding Path="Value"
                                         Source="{StaticResource IsInEditMode}"
                                         Mode="OneWay" />
                            </MultiBinding>
                        </smc:AutoCompleteTextBox.IsReadOnly>
                    </smc:AutoCompleteTextBox>
                    <TextBlock Name="txtTen_gd"
                               Grid.Row="0"
                               Grid.Column="2"
                               Grid.ColumnSpan="3"
                               Margin="12,0,0,0"
                               Style="{StaticResource ContentTextStyle}"
                               Text="{smc:BindingEx Path=ten_gd, Path2=ten_gd2}" />

                    <TextBlock Text="Mã khách"
                               Name="tblma_kh"
                               Grid.Row="1"
                               Grid.Column="0"
                               Style="{StaticResource ContentTextStyle}" />
                    <!--ma khach hang-->
                    <smc:AutoCompleteTextBox Name="txtMa_kh"
                                             Grid.Column="1"
                                             Grid.Row="1"
                                             TabIndex="10"
                                             Text="{smc:BindingEx Path=ma_kh}"
                                             ParentControl="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType=smvc:FormTrans}}"
                                             SysObj="{Binding Path=BindingSysObj,RelativeSource={RelativeSource FindAncestor, AncestorType=smvc:FormTrans}}"
                                             AllowEmty="False"
                                             AllowWrong="False"
                                             CharacterCasing="Upper"
                                             ListID="dmkh"
                                             Style="{StaticResource AutoCompleteTextBoxEditModeEnable}"
                                             PreviewGotFocus="txtMa_kh_PreviewGotFocus"
                                             PreviewLostFocus="txtMa_kh_PreviewLostFocus">
                    </smc:AutoCompleteTextBox>

                    <TextBlock Name="txtTen_kh"
                               Grid.Row="1"
                               Grid.Column="2"
                               Grid.ColumnSpan="3"
                               Margin="12,0,0,0"
                               Style="{StaticResource ContentTextStyle}"
                               Text="{smc:BindingEx Path=ten_kh, Path2=ten_kh2}" />
                    <!--dia chi-->
                    <TextBlock Text="Địa chỉ"
                               Name="tbldia_chi"
                               Grid.Row="2"
                               Grid.Column="0"
                               Style="{StaticResource ContentTextStyle}" />
                    <TextBox x:Name="txtDia_chi"
                             TabIndex="20"
                             Grid.Column="1"
                             Grid.Row="2"
                             Grid.ColumnSpan="2"
                             IsTabStop="True"
                             Text="{smc:BindingEx Path=dia_chi}"
                             GotFocus="txtDia_chi_GotFocus"
                             Height="20"
                             FontWeight="Normal">
                        <TextBox.Style>
                            <Style TargetType="{x:Type TextBox}"
                                   BasedOn="{StaticResource TextBoxEditModeEnable}">
                                <!--<Style.Triggers>
                                    <DataTrigger 
                                                 Binding="{Binding Path=RowResult[\'dia_chi\'], ElementName=txtMa_kh,Converter={StaticResource IsCheckedConverter}}"
                                                 Value="">
                                        <Setter Property="KeyboardNavigation.AcceptsReturn"
                                                Value="True" />
                                    </DataTrigger>
                                </Style.Triggers>-->
                            </Style>
                        </TextBox.Style>
                    </TextBox>
                    <!--ma so thue-->
                    <TextBlock Text="MST"
                               Name="tblma_so_thue"
                               Grid.Row="2"
                               Grid.Column="3"
                               Margin="10,0,0,0"
                               Style="{StaticResource ContentTextStyle}" />
                    <TextBox x:Name="txtMaSoThue"
                             Grid.Column="4"
                             Grid.Row="2"
                             Text="{smc:BindingEx Path=ma_so_thue}"
                             Style="{StaticResource TextBoxStyle}"
                             IsReadOnly="True" />
                    <!--Số dư khách hàng-->
                    <!--<TextBlock Text="Số dư"
                               Name="tblSoDuKH"
                               Grid.Row="3"
                               Grid.Column="3"
                               Margin="10,0,0,0"
                               Style="{StaticResource ContentTextStyle}" />
                    <smc:NumericTextBox x:Name="txtSoDuKH"
                                        Grid.Column="4"
                                        Grid.Row="3"
                                        Format="{Binding Path=Text, Source={StaticResource Voucher_Ma_nt0}, Mode=OneWay, Converter={StaticResource MaskNumeric}, ConverterParameter=M_IP_TIEN}"
                                        Style="{StaticResource NumericTextBoxStyle}"
                                        IsTabStop="False"
                                        IsReadOnly="True" />-->
                    <!--nguoi giao hang-->
                    <TextBlock Text="Ng. nhận tiền"
                               Name="tblong_ba"
                               Grid.Row="3"
                               Grid.Column="0"
                               Style="{StaticResource ContentTextStyle}" />
                    <TextBox x:Name="txtOng_ba"
                             Grid.Column="1"
                             Grid.Row="3"
                             Grid.ColumnSpan="2"
                             TabIndex="20"
                             Text="{smc:BindingEx Path=ong_ba}"
                             Height="20"
                             FontWeight="Normal">
                        <TextBox.Style>
                            <Style TargetType="{x:Type TextBox}"
                                   BasedOn="{StaticResource TextBoxStyle}">
                                <Setter Property="IsReadOnly">
                                    <Setter.Value>
                                        <MultiBinding Converter="{StaticResource BindingReadonly}"
                                                      ConverterParameter="PH;ong_ba"
                                                      Mode="OneWay">
                                            <Binding Source="{StaticResource IsInEditMode}"
                                                          Path="Value"/>
                                        </MultiBinding>
                                    </Setter.Value>
                                </Setter>
                                <Setter Property="IsTabStop"
                                        Value="True" />
                                <Style.Triggers>
                                    <DataTrigger Binding="{Binding Path=IsReadOnly, ElementName=txtOng_ba}"
                                                 Value="True">
                                        <Setter Property="IsTabStop"
                                                Value="False" />
                                    </DataTrigger>
                                </Style.Triggers>
                            </Style>
                        </TextBox.Style>
                    </TextBox>
                    <!--dien giai-->
                    <TextBlock Text="Lý do chi"
                               Name="tbldien_giai"
                               Grid.Row="4"
                               Grid.Column="0"
                               Style="{StaticResource ContentTextStyle}" />
                    <TextBox Name="txtDien_giai"
                             TabIndex="30"
                             Text="{smc:BindingEx Path=dien_giai}"
                             Grid.Column="1"
                             Grid.Row="4"
                             Grid.ColumnSpan="4"
                             Height="20"
                             FontWeight="Normal"
                             Style="{StaticResource TextBoxEditModeEnable}" />
                    <!--ma nhap xuat-->
                    <TextBlock Text="Tk có"
                               Name="tblma_nx"
                               Grid.Row="5"
                               Grid.Column="0"
                               Style="{StaticResource ContentTextStyle}" />

                    <smc:AutoCompleteTextBox x:Name="txtMa_nx"
                                             Grid.Column="1"
                                             Grid.Row="5"
                                             TabIndex="40"
                                             Text="{smc:BindingEx Path=tk}"
                                             ParentControl="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType=Window}}"
                                             SysObj="{Binding Path=BindingSysObj,RelativeSource={RelativeSource FindAncestor, AncestorType=Window}}"
                                             AllowEmty="False"
                                             AllowWrong="False"
                                             ListID="dmtk1"
                                             Style="{StaticResource AutoCompleteTextBoxEditModeEnable}"
                                             PreviewLostFocus="txtMa_nx_PreviewLostFocus">
                    </smc:AutoCompleteTextBox>
                    <TextBlock Name="txtTenTK"
                               Grid.Row="5"
                               Grid.Column="2"
                               Grid.ColumnSpan="3"
                               Margin="12,0,0,0"
                               Style="{StaticResource ContentTextStyle}"
                               Text="{smc:BindingEx Path=ten_nx, Path2=ten_nx2}" />

                </smc:GridLayout>
            </GroupBox>
            <!--Chung tu-->
            <GroupBox Name="gbVoucher"
                      Header="Chứng từ"
                      Grid.Column="4"
                      Grid.Row="0">
                <smc:GridLayout ColumnCount="3"
                                ColumnWidths="5*,43,140"
                                HeightPerRow="25"
                                RowCount="7"
                                Name="GrdVoucher">
                    <!--ngay hoach toan-->
                    <TextBlock Name="tblngay_ct"
                               Text="Ngày hạch toán"
                               Grid.Column="0"
                               Grid.Row="0"
                               Grid.ColumnSpan="2"
                               Style="{StaticResource ContentTextStyle}" />
                    <smc:DateTextBox x:Name="txtNgay_ct"
                                     Grid.Column="2"
                                     Grid.Row="0"
                                     TabIndex="50"
                                     AllowEmpty="False"
                                     Value="{smc:BindingEx Path=ngay_ct}"
                                     LostFocus="txtNgay_ct_LostFocus"
                                     Style="{StaticResource DateTextBoxEditModeEnable}" />
                    <!--ngay lap phieu-->
                    <TextBlock Grid.Column="0"
                               Grid.ColumnSpan="2"
                               Grid.Row="1"
                               Name="tblngay_lct"
                               Text="Ngày lập phiếu chi"
                               Style="{StaticResource ContentTextStyle}" />
                    <smc:DateTextBox x:Name="txtngay_lct"
                                     Grid.Column="2"
                                     Grid.Row="1"
                                     TabIndex="60"
                                     LostFocus="txtngay_lct_LostFocus"
                                     Value="{smc:BindingEx Path=ngay_lct}">
                        <smc:DateTextBox.Style>
                            <Style TargetType="{x:Type smc:DateTextBox}"
                                   BasedOn="{StaticResource DateTextBoxStyle}">
                                <Setter Property="IsReadOnly">
                                    <Setter.Value>
                                        <MultiBinding Converter="{StaticResource BindingReadonly}"
                                                 ConverterParameter="PH;ngay_lct"
                                                 Mode="OneWay">
                                            <Binding Source="{StaticResource IsInEditMode}"
                                                             Path="Value"/>
                                        </MultiBinding>
                                    </Setter.Value>
                                </Setter>
                                <Setter Property="IsTabStop"
                                        Value="True" />
                                <Style.Triggers>
                                    <DataTrigger Binding="{Binding Path=IsReadOnly, ElementName=txtngay_lct}"
                                                 Value="True">
                                        <Setter Property="IsTabStop"
                                                Value="False" />
                                    </DataTrigger>
                                </Style.Triggers>
                            </Style>
                        </smc:DateTextBox.Style>
                    </smc:DateTextBox>
                    <!--quyen so-->
                    <TextBlock Grid.Row="2"
                               Grid.Column="0"
                               Grid.ColumnSpan="2"
                               Text="Quyển số"
                               Name="tblma_qs"
                               Style="{StaticResource ContentTextStyle}" />
                    <smc:AutoCompleteTextBox x:Name="txtMa_qs"
                                             Grid.Column="2"
                                             Grid.Row="2"
                                             Text="{smc:BindingEx Path=ma_qs}"
                                             TabIndex="70"
                                             ParentControl="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType=Window}}"
                                             SysObj="{Binding Path=BindingSysObj,RelativeSource={RelativeSource FindAncestor, AncestorType=Window}}"
                                             Filter="ma_cts like '%PC1%' and status =1"
                                             PreviewLostFocus="txtMa_qs_PreviewLostFocus"
                                             AllowEmty="False"
                                             AllowWrong="False"
                                             Style="{StaticResource AutoCompleteTextBoxEditModeEnable}"
                                             ListID="dmqs">
                    </smc:AutoCompleteTextBox>
                    <!--so pn-->
                    <TextBlock Grid.Row="3"
                               Grid.Column="0"
                               Grid.ColumnSpan="2"
                               Name="tblso_ct"
                               Text="Số phiếu chi"
                               Style="{StaticResource ContentTextStyle}" />
                    <TextBox x:Name="txtSo_ct"
                             Grid.Column="2"
                             Grid.Row="3"
                             TabIndex="80"
                             Text="{smc:BindingEx Path=so_ct}"
                             CharacterCasing="Upper">
                        <TextBox.Style>
                            <smc:MergedStyles BasedOn="{StaticResource TextBoxStyle}"
                                              MergeStyle="{StaticResource TextBoxEditModeEnable}" />
                        </TextBox.Style>
                    </TextBox>
                    <smc:GridLayout x:Name="GrNT"
                                    Grid.Row="4"
                                    Grid.Column="0"
                                    ColumnCount="3"
                                    ColumnWidths="52*,43,140"
                                    Grid.ColumnSpan="3">
                        <TextBlock Grid.Row="4"
                                   Grid.Column="0"
                                   Name="tblTy_gia"
                                   Style="{StaticResource ContentTextStyle}" >                  
                            <TextBlock.Text>
                                <MultiBinding Converter="{StaticResource VisibilityConverter}"
                                              ConverterParameter="KindText;GS"
                                              Mode="OneWay">
                                    <Binding Path="Text" Source="{StaticResource Ma_GD_Value}"/>
                                    <Binding Path="ma_nt"/>
                                </MultiBinding>
                            </TextBlock.Text>
                        </TextBlock>

                        <smc:AutoCompleteTextBox Name="cbMa_nt"
                                                 Grid.Column="1"
                                                 Grid.Row="4"
                                                 Margin="0,0,5,0"
                                                 Text="{smc:BindingEx Path=ma_nt}"
                                                 ParentControl="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType=Window}}"
                                                 SysObj="{Binding Path=BindingSysObj,RelativeSource={RelativeSource FindAncestor, AncestorType=Window}}"
                                                 AllowEmty="False"
                                                 AllowWrong="False"
                                                 ListID="dmnt"
                                                 TabIndex="81"
                                                 IsTabStop="False"
                                                 Style="{StaticResource AutoCompleteTextBoxEditModeEnable}"
                                                 PreviewLostFocus="cbMa_nt_PreviewLostFocus">
                        </smc:AutoCompleteTextBox>
                        <smc:ExRateTextBox x:Name="txtTy_gia"
                                           Grid.Row="4"
                                           Margin="0"
                                           Grid.Column="2"
                                           RateF="{smc:BindingEx Path=ty_giaf}"
                                           Rate="{smc:BindingEx Path=ty_gia}"
                                           KindRate="{smc:BindingEx Path=loai_tg,Mode=OneWay}"
                                           TabIndex="82"
                                           Format="{Binding Path=Text, Source={StaticResource Voucher_Ma_nt0}, Mode=OneWay, Converter={StaticResource MaskNumeric}, ConverterParameter=M_IP_TY_GIA}"
                                           GotFocus="txtTy_gia_GotFocus"
                                           LostFocus="txtTy_gia_LostFocus">
                            <smc:ExRateTextBox.Style>
                                <Style TargetType="{x:Type smc:ExRateTextBox}"
                                       BasedOn="{StaticResource ExRateTextBoxStyle}">
                                    <Setter Property="IsReadOnly"
                                            Value="True" />
                                    <Style.Triggers>
                                        <MultiDataTrigger>
                                            <MultiDataTrigger.Conditions>
                                                <Condition Binding="{Binding Path=Value, Source={StaticResource IsInEditMode},Mode=OneWay}"
                                                           Value="True" />
                                            </MultiDataTrigger.Conditions>
                                            <Setter Property="IsReadOnly"
                                                    Value="False" />
                                        </MultiDataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </smc:ExRateTextBox.Style>
                        </smc:ExRateTextBox>
                    </smc:GridLayout>
                    <smc:GridLayout x:Name="GrNTHT"
                                    Grid.Row="5"
                                    Grid.Column="0"
                                    ColumnCount="3"
                                    ColumnWidths="52*,43,140"
                                    Grid.ColumnSpan="3">
                        <smc:GridLayout.Style>
                            <Style TargetType="{x:Type smc:GridLayout}">
                                <Setter Property="Visibility"
                                        Value="Visible" />
                                <Style.Triggers>
                                    <DataTrigger Binding="{Binding Path=Text, Source={StaticResource Ma_GD_Value}}"
                                                 Value="2">
                                        <Setter Property="Visibility"
                                                Value="Collapsed" />
                                    </DataTrigger>
                                    <DataTrigger Binding="{Binding Path=Text, Source={StaticResource Ma_GD_Value}}"
                                                 Value="3">
                                        <Setter Property="Visibility"
                                                Value="Collapsed" />
                                    </DataTrigger>
                                    <DataTrigger Binding="{Binding Path=Value, Source={StaticResource Voucher_Ma_nt0}}"
                                                 Value="True">
                                        <Setter Property="Visibility"
                                                Value="Collapsed" />
                                    </DataTrigger>
                                </Style.Triggers>
                            </Style>
                        </smc:GridLayout.Style>
                        <TextBlock Grid.Row="4"
                                   Grid.Column="0"
                                   Name="tblTy_gia_ht"
                                   Text="TGGS"
                                   Style="{StaticResource ContentTextStyle}">
                              <TextBlock.Visibility>
                                <MultiBinding Converter="{StaticResource VisibilityConverter}"
                                              ConverterParameter="KindTG;GS"
                                              Mode="OneWay">
                                    <Binding Path="Text" Source="{StaticResource Ma_GD_Value}"/>
                                     <Binding Path="ma_nt"/>
                                </MultiBinding>
                            </TextBlock.Visibility>
                        </TextBlock>

                        <smc:ExRateTextBox x:Name="txtTy_gia_ht"
                                           Grid.Row="4"
                                           Margin="0"
                                           Grid.Column="2"
                                           RateF="{smc:BindingEx Path=ty_gia_htf}"
                                           Rate="{smc:BindingEx Path=ty_gia_ht}"
                                           KindRate="{smc:BindingEx Path=loai_tg,Mode=OneWay}"
                                           TabIndex="82"
                                           Format="{Binding Path=Text, Source={StaticResource Voucher_Ma_nt0}, Mode=OneWay, Converter={StaticResource MaskNumeric}, ConverterParameter=M_IP_TY_GIA}"
                                           GotFocus="txtTy_gia_GotFocus"
                                           LostFocus="txtTy_gia_ht_LostFocus">
                            <smc:ExRateTextBox.Visibility>
                                <MultiBinding Converter="{StaticResource VisibilityConverter}"
                                              ConverterParameter="KindTG;GS"
                                              Mode="OneWay">
                                    <Binding Path="Text" Source="{StaticResource Ma_GD_Value}"/>
                                    <Binding Path="ma_nt"/>
                                </MultiBinding>
                            </smc:ExRateTextBox.Visibility>
                            <smc:ExRateTextBox.Style>
                                <Style TargetType="{x:Type smc:ExRateTextBox}"
                                       BasedOn="{StaticResource ExRateTextBoxStyle}">
                                    <Setter Property="IsReadOnly"
                                            Value="True" />
                                    <Style.Triggers>
                                        <MultiDataTrigger>
                                            <MultiDataTrigger.Conditions>
                                                <Condition Binding="{Binding Path=Value, Source={StaticResource IsInEditMode},Mode=OneWay}"
                                                           Value="True" />
                                            </MultiDataTrigger.Conditions>
                                            <Setter Property="IsReadOnly"
                                                    Value="False" />
                                        </MultiDataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </smc:ExRateTextBox.Style>
                        </smc:ExRateTextBox>
                    </smc:GridLayout>
                    <smc:GridLayout Grid.Row="6"
                                    Grid.Column="0"
                                    Grid.ColumnSpan="3"
                                    ColumnCount="2"
                                    ColumnWidths="*,140"
                                    KeyboardNavigation.TabNavigation="None"
                                    Name="GrdLayoutStatus">
                        <TextBlock Grid.Column="0"
                                   Grid.ColumnSpan="1"
                                   Name="tblStatus">
                           <TextBlock.Style>
                               <Style TargetType="TextBlock"
                                      BasedOn="{StaticResource ContentTextStyle}">
                                   <Setter Property="Text"
                                           Value="Trạng thái" />
                                   <Style.Triggers>
                                       <MultiDataTrigger>
                                            <MultiDataTrigger.Conditions>
                                                <Condition Binding="{Binding Path=Value, Source={StaticResource IsInEditMode},Mode=OneWay}"
                                                           Value="True" />
                                                <Condition Binding="{Binding Path=M_LAN, RelativeSource={RelativeSource AncestorType={x:Type smvc:FormTrans}}}"
                                                           Value="V" />
                                            </MultiDataTrigger.Conditions>
                                                <Setter Property="Text"
                                                        Value="Xử lý" />
                                       </MultiDataTrigger>
                                   </Style.Triggers>
                               </Style>
                           </TextBlock.Style>
                        </TextBlock>
                        <igEditors:XamComboEditor IsEnabled="{Binding Path=Value, Source={StaticResource IsInEditMode}}"
                                                  Style="{StaticResource ComboBoxEditModeEnable}"
                                                  SelectedIndex="{smc:BindingEx Path=status,Converter={StaticResource StatusVoucher}}"
                                                  ValuePath="ma_post"
                                                  Grid.Column="1"
                                                  Height="20"
                                                  Margin="0"
                                                  Grid.Row="0"
                                                  TabIndex="83"
                                                  Name="txtStatus" />
                    </smc:GridLayout>
                </smc:GridLayout>
            </GroupBox>
        </smc:GridLayout>

        <smc:GridLayout Margin="12,0,12,4"
              Grid.Row="2"
              Grid.Column="0"
              KeyboardNavigation.TabIndex="120"
              Name="GridCT"
              KeyboardNavigation.TabNavigation="Local">

            <igWindows:XamTabControl x:Name="TabInfo"
                                     Grid.Row="0"
                                     Grid.Column="0"
                                     Theme="Generic"
                                     SelectionChanged="TabInfo_SelectionChanged"
                                     Background="{x:Null}">
                <igWindows:XamTabControl.BorderBrush>
                    <SolidColorBrush Color="#FFD0D0BF"
                                     igThemes:ResourceWasher.WashGroup="Selected" />
                </igWindows:XamTabControl.BorderBrush>
                <igWindows:XamTabControl.Resources>
                    <Style TargetType="{x:Type igWindows:TabItemEx}"
                           BasedOn="{StaticResource TabItemStyle}">
                    </Style>
                </igWindows:XamTabControl.Resources>
                <igWindows:TabItemEx Header="_1. Hạch toán"
                                     x:Name="tiHT"
                                     KeyboardNavigation.TabNavigation="None"
                                     TabIndex="120">
                    <igWindows:TabItemEx.BorderBrush>
                        <SolidColorBrush Color="#FFD0D0BF"
                                         igThemes:ResourceWasher.WashGroup="BaseColor" />
                    </igWindows:TabItemEx.BorderBrush>
                    <smc:GridLayout Margin="0,0,0,0" Name="GrdLayoutCT">
                        <!--GrdCtChi-->
                        <smc:DataGridView Margin="0,0,0,0"
                                          x:Name="GrdCtChi"
                                          PreviewEditModeEnded="GrdCtChi_PreviewEditModeEnded"
                                          PreviewGotKeyboardFocus="GrdCt_PreviewGotKeyboardFocus"
                                          AddNewRecord="GrdCtChi_AddNewRecord"
                                          RecordDelete="GrdCtChi_RecordDelete"
                                          KeyDown="GrdCtChi_KeyDown"
                                          Tag="{Binding Path=Value, Source={StaticResource IsInEditMode},Mode=OneWay}"
                                          KeyUp="GrdCtChi_KeyUp"
                                          IsVoucher="True"
                                          TabIndex="120">
                            <smc:DataGridView.Visibility>
                                <MultiBinding Converter="{StaticResource VisibilityConverter}"
                                              ConverterParameter="KindCT;CHI"
                                              Mode="OneWay">
                                    <Binding Path="Text" Source="{StaticResource Ma_GD_Value}"/>
                                </MultiBinding>
                            </smc:DataGridView.Visibility>
                            <smc:DataGridView.Resources>
                                <DataTemplate x:Key="ControlSearchAccount">
                                    <smc:AutoCompleteTextBox AllowEmty="False"
                                                             AllowWrong="False"
                                                             Style="{StaticResource AutoCompleteTextBoxEditModeEnable}"
                                                             IsBorderTextBox="False"
                                                             ParentControl="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type Window}}}"
                                                             SysObj="{Binding Path=BindingSysObj, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type Window}}}"
                                                             Text="{smc:BindingEx Path=Value, RelativeSource={RelativeSource AncestorType={x:Type igDP:CellValuePresenter}, Mode=FindAncestor}}"
                                                             ListID="dmtk1" />
                                </DataTemplate>
                                <DataTemplate x:Key="ControlSearchKhachHang">
                                    <smc:AutoCompleteTextBox LookupMode="True"
                                                             AllowEmty="False"
                                                             AllowWrong="False"
                                                             IsBorderTextBox="False"
                                                             Style="{StaticResource AutoCompleteTextBoxEditModeEnable}"
                                                             ParentControl="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type Window}}}"
                                                             SysObj="{Binding Path=BindingSysObj, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type Window}}}"
                                                             Text="{smc:BindingEx Path=Value, RelativeSource={RelativeSource AncestorType={x:Type igDP:CellValuePresenter}, Mode=FindAncestor}}"
                                                             ListID="dmkh_thue">
                                    </smc:AutoCompleteTextBox>
                                </DataTemplate>
                            </smc:DataGridView.Resources>
                            <smc:DataGridView.FieldSettings>
                                <igDP:FieldSettings AllowEdit="True"
                                                    SummaryDisplayArea="BottomFixed"
                                                    SummaryUIType="MultiSelect" />
                            </smc:DataGridView.FieldSettings>
                            <smc:DataGridView.FieldLayoutSettings>
                                <igDP:FieldLayoutSettings HeaderPrefixAreaStyle="{StaticResource StyleHeaderPrefixArea}"
                                                          RecordSelectorStyle="{StaticResource StyleRecordSelector}"
                                                          AllowDelete="False"
                                                          AutoGenerateFields="False" 
                                                          />
                            </smc:DataGridView.FieldLayoutSettings>
                            <smc:DataGridView.FieldLayouts>
                                <igDP:FieldLayout>
                                    <igDP:FieldLayout.SummaryDefinitions>
                                        <smc:ExSummaryDefinition SourceFieldName="tien_nt"
                                                                 Calculator="Sum"
                                                                 Format="{Binding Path=Text, Source={StaticResource Voucher_Ma_nt0}, Mode=OneWay, Converter={StaticResource MaskNumeric}, ConverterParameter=M_IP_TIEN_NT}">
                                        </smc:ExSummaryDefinition>
                                        <smc:ExSummaryDefinition SourceFieldName="tien_tt"
                                                                 Format="{Binding Path=Text, Source={StaticResource Voucher_Ma_nt0}, Mode=OneWay, Converter={StaticResource MaskNumeric}, ConverterParameter=M_IP_TIEN}"
                                                                 Calculator="Sum" />
                                        <smc:ExSummaryDefinition SourceFieldName="tien"
                                                                 Format="{Binding Path=Text, Source={StaticResource Voucher_Ma_nt0}, Mode=OneWay, Converter={StaticResource MaskNumeric}, ConverterParameter=M_IP_TIEN}"
                                                                 Calculator="Sum" />
                                    </igDP:FieldLayout.SummaryDefinitions>
                                    <smc:NotEmptyField Label="Tk nợ"
                                                       Width="100"
                                                       FixedLocation="FixedToNearEdge"
                                                       Name="tk_i">
                                        <igDP:Field.Settings>
                                            <igDP:FieldSettings LabelTextAlignment="Center">
                                                <igDP:FieldSettings.EditorStyle>
                                                    <Style TargetType="{x:Type smc:ControlHostEditor}"
                                                           BasedOn="{StaticResource AutoCompleteTextBoxEditor}">
                                                        <Setter Property="EditDataTemplate"
                                                                Value="{StaticResource ControlSearchAccount}" />
                                                    </Style>
                                                </igDP:FieldSettings.EditorStyle>
                                            </igDP:FieldSettings>
                                        </igDP:Field.Settings>
                                    </smc:NotEmptyField>

                                    <igDP:Field Label="Tên tài khoản"
                                                Name="ten_tk"
                                                Width="180"
                                                FixedLocation="FixedToNearEdge">
                                        <igDP:Field.Visibility>
                                            <MultiBinding Converter="{StaticResource LanguageConvert}"
                                                              ConverterParameter="LANV">
                                                <Binding Path="Value" Source="{StaticResource Voucher_Lan0}"/>
                                            </MultiBinding>
                                        </igDP:Field.Visibility>
                                        <igDP:Field.Settings>
                                            <igDP:FieldSettings LabelTextAlignment="Center"
                                                                AllowEdit="False"
                                                                EditAsType="{x:Type System:String}" />
                                        </igDP:Field.Settings>
                                    </igDP:Field>

                                    <igDP:Field Label="Tên tài khoản"
                                                Name="ten_tk2"
                                                Width="180"
                                                FixedLocation="FixedToNearEdge">
                                        <igDP:Field.Visibility>
                                            <MultiBinding Converter="{StaticResource LanguageConvert}"
                                                              ConverterParameter="LANE">
                                                <Binding Path="Value" Source="{StaticResource Voucher_Lan0}"/>
                                            </MultiBinding>
                                        </igDP:Field.Visibility>
                                        <igDP:Field.Settings>
                                            <igDP:FieldSettings LabelTextAlignment="Center"
                                                                AllowEdit="False"
                                                                EditAsType="{x:Type System:String}" />
                                        </igDP:Field.Settings>
                                    </igDP:Field>

                                    <igDP:Field Label="Mã khách"
                                                Name="ma_kh_i"
                                                Width="105">
                                        <igDP:Field.Visibility>
                                            <MultiBinding Converter="{StaticResource VisibilityConverter}"
                                              ConverterParameter="FieldCT;ma_kh"
                                              Mode="TwoWay">
                                                <Binding Path="Text" Source="{StaticResource Ma_GD_Value}"/>
                                            </MultiBinding>
                                        </igDP:Field.Visibility>
                                        <igDP:Field.Settings>
                                            <igDP:FieldSettings LabelTextAlignment="Center">
                                                <igDP:FieldSettings.EditorStyle>
                                                    <Style TargetType="{x:Type smc:ControlHostEditor}"
                                                           BasedOn="{StaticResource AutoCompleteTextBoxEditor}">
                                                        <Setter Property="EditDataTemplate"
                                                                Value="{StaticResource ControlSearchKhachHang}" />
                                                    </Style>
                                                </igDP:FieldSettings.EditorStyle>
                                            </igDP:FieldSettings>
                                        </igDP:Field.Settings>
                                    </igDP:Field>
                                    <igDP:Field Label="Tên khách"
                                                Name="ten_kh_i"
                                                Width="225">
                                        <igDP:Field.Visibility>
                                            <MultiBinding Converter="{StaticResource VisibilityConverter}"
                                              ConverterParameter="FieldCT;ma_kh;ten_kh_i"
                                              Mode="TwoWay">
                                                <Binding Path="Text" Source="{StaticResource Ma_GD_Value}"/>
                                            </MultiBinding>
                                        </igDP:Field.Visibility>
                                        <igDP:Field.Settings>
                                            <igDP:FieldSettings AllowEdit="False"
                                                                LabelTextAlignment="Center"
                                                                EditAsType="{x:Type System:String}" />
                                        </igDP:Field.Settings>
                                    </igDP:Field>

                                    <igDP:Field Label="Tên khách"
                                                Name="ten_kh2_i"
                                                Width="225">
                                        <igDP:Field.Visibility>
                                            <MultiBinding Converter="{StaticResource VisibilityConverter}"
                                              ConverterParameter="FieldCT;ma_kh;ten_kh2_i"
                                              Mode="TwoWay">
                                                <Binding Path="Text" Source="{StaticResource Ma_GD_Value}"/>
                                            </MultiBinding>
                                        </igDP:Field.Visibility>
                                        <igDP:Field.Settings>
                                            <igDP:FieldSettings AllowEdit="False"
                                                                LabelTextAlignment="Center"
                                                                EditAsType="{x:Type System:String}" />
                                        </igDP:Field.Settings>
                                    </igDP:Field>

                                    <igDP:Field Label="Tiền"
                                                Name="tien_nt"
                                                Width="140">
                                        <igDP:Field.Settings>
                                            <igDP:FieldSettings AllowSummaries="True"
                                                                LabelTextAlignment="Center">
                                                <igDP:FieldSettings.EditorStyle>
                                                    <Style TargetType="{x:Type smc:NumericTextBox}">
                                                        <Setter Property="Format"
                                                                Value="{Binding Path=Text, Source={StaticResource Voucher_Ma_nt0}, Mode=OneWay, Converter={StaticResource MaskNumeric}, ConverterParameter=M_IP_TIEN_NT}" />
                                                        <Setter Property="IsReadOnly"
                                                            Value="{smc:BindingEx Path=Value, Source={StaticResource IsInEditMode}, Converter={StaticResource BoolInverter}}" />
                                                    </Style>
                                                </igDP:FieldSettings.EditorStyle>
                                            </igDP:FieldSettings>
                                        </igDP:Field.Settings>
                                    </igDP:Field>
                                    <igDP:Field Label="Tỷ giá gs"
                                                Name="ty_giahtf2"
                                                Width="140">
                                        <igDP:Field.Visibility>
                                            <MultiBinding Converter="{StaticResource VisibilityConverter}"
                                              ConverterParameter="FieldCT;ty_gia_ht2"
                                              Mode="OneWay">
                                                <Binding Path="Text" Source="{StaticResource Ma_GD_Value}"/>
                                            </MultiBinding>
                                        </igDP:Field.Visibility>
                                        <igDP:Field.Settings>
                                            <igDP:FieldSettings LabelTextAlignment="Center">
                                                <igDP:FieldSettings.EditorStyle>
                                                    <Style TargetType="{x:Type smc:ExRateTextBox}">
                                                        <Setter Property="IsReadOnly"
                                                                Value="True" />
                                                        <Setter Property="Rate"
                                                                Value="{smc:BindingEx RelativeSource={RelativeSource AncestorType={x:Type igDP:CellValuePresenter}, Mode=FindAncestor}, Path=Record.DataItem.ty_gia_ht2}" />
                                                        <Setter Property="KindRate"
                                                                Value="{Binding Path=Text, Source={StaticResource Loai_tg},Mode=OneWay}" />
                                                        <Setter Property="Format"
                                                                Value="{Binding Path=Text, Source={StaticResource Voucher_Ma_nt0}, Mode=OneWay, Converter={StaticResource MaskNumeric}, ConverterParameter=M_IP_TY_GIA}" />
                                                        <Style.Triggers>
                                                            <MultiDataTrigger>
                                                                <MultiDataTrigger.Conditions>
                                                                    <Condition Binding="{Binding Path=Value, Source={StaticResource IsInEditMode},Mode=OneWay}"
                                                                               Value="True" />
                                                                </MultiDataTrigger.Conditions>
                                                                <Setter Property="IsReadOnly"
                                                                        Value="False" />
                                                            </MultiDataTrigger>
                                                        </Style.Triggers>
                                                    </Style>
                                                </igDP:FieldSettings.EditorStyle>
                                            </igDP:FieldSettings>
                                        </igDP:Field.Settings>
                                    </igDP:Field>
                                    <igDP:Field Label="Diễn giải"
                                                Name="dien_giaii"
                                                Width="225">
                                        <igDP:Field.Settings>
                                            <igDP:FieldSettings EditAsType="{x:Type System:String}"
                                                                AllowEdit="{smc:BindingEx Path=Value, Source={StaticResource IsInEditMode}}"
                                                                LabelTextAlignment="Center" />
                                        </igDP:Field.Settings>
                                    </igDP:Field>
                                    <igDP:Field Label="Tiền hạch toán"
                                                Name="tien_tt"
                                                Width="140">
                                        <igDP:Field.Visibility>
                                            <MultiBinding Converter="{StaticResource VisibilityConverter}"
                                              ConverterParameter="FieldCT;tien_tt">
                                                <Binding Path="Text" Source="{StaticResource Ma_GD_Value}"/>
                                            </MultiBinding>
                                        </igDP:Field.Visibility>
                                        <igDP:Field.Settings>
                                            <igDP:FieldSettings AllowSummaries="True"
                                                                LabelTextAlignment="Center">
                                                <igDP:FieldSettings.EditorStyle>
                                                    <Style TargetType="{x:Type smc:NumericTextBox}">
                                                        <Setter Property="IsReadOnly">
                                                            <Setter.Value>
                                                                <MultiBinding Converter="{StaticResource BindingReadonly}"
                                                                              ConverterParameter="CTCHI;tien_tt">
                                                                    <Binding  RelativeSource="{RelativeSource AncestorType={x:Type igDP:CellValuePresenter} , Mode=FindAncestor}"
                                                                              Path="Record.Cells[tien_nt].Value"
                                                                              Mode="OneWay" />
                                                                    <Binding Path="Value"
                                                                             Source="{StaticResource Ty_Gia_ValueChange}"
                                                                             Mode="OneWay" />
                                                                    <Binding Path="Value"
                                                                             Source="{StaticResource Voucher_Ma_nt0}"
                                                                             Mode="OneWay" />
                                                                    <Binding Path="Value"
                                                                             Source="{StaticResource IsCheckedSua_tien}"
                                                                             Mode="OneWay" />
                                                                    <Binding Path="Value"
                                                                         Source="{StaticResource IsInEditMode}"
                                                                         Mode="OneWay" />
                                                                </MultiBinding>
                                                            </Setter.Value>
                                                        </Setter>
                                                        <Setter Property="Format"
                                                                Value="{Binding Path=Text, Source={StaticResource Voucher_Ma_nt0}, Mode=OneWay, Converter={StaticResource MaskNumeric}, ConverterParameter=M_IP_TIEN}" />
                                                    </Style>
                                                </igDP:FieldSettings.EditorStyle>
                                            </igDP:FieldSettings>
                                        </igDP:Field.Settings>
                                    </igDP:Field>
                                    <igDP:Field Label="Tiền"
                                                Name="tien"
                                                Width="140">
                                        <igDP:Field.Settings>
                                            <igDP:FieldSettings LabelTextAlignment="Center"
                                                                AllowSummaries="True">
                                                <igDP:FieldSettings.EditorStyle>
                                                    <Style TargetType="{x:Type smc:NumericTextBox}">
                                                        <Setter Property="IsReadOnly">
                                                            <Setter.Value>
                                                                <MultiBinding Converter="{StaticResource BindingReadonly}"
                                                                              ConverterParameter="CTCHI;tien">
                                                                    <Binding  RelativeSource="{RelativeSource AncestorType={x:Type igDP:CellValuePresenter} , Mode=FindAncestor}"
                                                                              Path="Record.DataItem.ty_gia_ht2"
                                                                              Mode="OneWay" />
                                                                    <Binding  RelativeSource="{RelativeSource AncestorType={x:Type igDP:CellValuePresenter} , Mode=FindAncestor}"
                                                                              Path="Record.Cells[tien_nt].Value"
                                                                              Mode="OneWay" />
                                                                    <Binding Path="Value"
                                                                             Source="{StaticResource Ty_Gia_ValueChange}"
                                                                             Mode="OneWay" />
                                                                    <Binding Path="Value"
                                                                             Source="{StaticResource Voucher_Ma_nt0}"
                                                                             Mode="OneWay" />
                                                                    <Binding Path="Text"
                                                                             Source="{StaticResource Ma_GD_Value}"
                                                                             Mode="OneWay" />
                                                                    <Binding Path="Value"
                                                                             Source="{StaticResource IsCheckedSua_tien}"
                                                                             Mode="OneWay" />
                                                                    <Binding Path="Value"
                                                                         Source="{StaticResource IsInEditMode}"
                                                                         Mode="OneWay" />

                                                                </MultiBinding>
                                                            </Setter.Value>
                                                        </Setter>
                                                        <Setter Property="Format"
                                                                Value="{Binding Path=Text, Source={StaticResource Voucher_Ma_nt0}, Mode=OneWay, Converter={StaticResource MaskNumeric}, ConverterParameter=M_IP_TIEN}" />
                                                    </Style>
                                                </igDP:FieldSettings.EditorStyle>
                                            </igDP:FieldSettings>
                                        </igDP:Field.Settings>
                                    </igDP:Field>
                                    <igDP:Field Label="Tt_nt"
                                                Name="tt_nt"
                                                Visibility="Hidden">
                                        <igDP:Field.Settings>
                                            <igDP:FieldSettings AllowSummaries="True"
                                                                CellMaxWidth="0"
                                                                LabelTextAlignment="Center">
                                                <igDP:FieldSettings.EditorStyle>
                                                    <Style TargetType="{x:Type smc:NumericTextBox}">
                                                        <Setter Property="Format"
                                                                Value="{Binding Path=Text, Source={StaticResource Voucher_Ma_nt0}, Mode=OneWay, Converter={StaticResource MaskNumeric}, ConverterParameter=M_IP_TIEN_NT}" />
                                                        <Setter Property="IsReadOnly"
                                                            Value="{smc:BindingEx Path=Value, Source={StaticResource IsInEditMode}, Converter={StaticResource BoolInverter}}" />
                                                    </Style>
                                                </igDP:FieldSettings.EditorStyle>
                                            </igDP:FieldSettings>
                                        </igDP:Field.Settings>
                                    </igDP:Field>
                                    <igDP:Field Label="Tt"
                                                Name="tt"
                                                Visibility="Hidden">
                                        <igDP:Field.Settings>
                                            <igDP:FieldSettings AllowSummaries="True"
                                                                CellMaxWidth="0"
                                                                LabelTextAlignment="Center">
                                                <igDP:FieldSettings.EditorStyle>
                                                    <Style TargetType="{x:Type smc:NumericTextBox}">
                                                        <Setter Property="Format"
                                                                Value="{Binding Path=Text, Source={StaticResource Voucher_Ma_nt0}, Mode=OneWay, Converter={StaticResource MaskNumeric}, ConverterParameter=M_IP_TIEN}" />
                                                        <Setter Property="IsReadOnly"
                                                            Value="{smc:BindingEx Path=Value, Source={StaticResource IsInEditMode}, Converter={StaticResource BoolInverter}}" />
                                                    </Style>
                                                </igDP:FieldSettings.EditorStyle>
                                            </igDP:FieldSettings>
                                        </igDP:Field.Settings>
                                    </igDP:Field>
                                </igDP:FieldLayout>
                            </smc:DataGridView.FieldLayouts>
                        </smc:DataGridView>
                        <!--GrdCt-->
                        <smc:DataGridView Margin="0,0,0,0"
                                          x:Name="GrdCt"
                                          PreviewEditModeEnded="GrdCt_EditModeEnded"
                                          PreviewGotKeyboardFocus="GrdCt_PreviewGotKeyboardFocus"
                                          AddNewRecord="GrdCt_AddNewRecord"
                                          RecordDelete="GrdCt_RecordDelete"
                                          KeyDown="GrdCt_KeyDown"
                                          KeyUp="GrdCt_KeyUp"
                                          Tag="{Binding Path=Value, Source={StaticResource IsInEditMode},Mode=OneWay}"
                                          IsVoucher="True"
                                          TabIndex="120">
                            <smc:DataGridView.Visibility>
                                <MultiBinding Converter="{StaticResource VisibilityConverter}"
                                              ConverterParameter="KindCT;CP"
                                              Mode="OneWay">
                                    <Binding Path="Text" Source="{StaticResource Ma_GD_Value}"/>
                                </MultiBinding>
                            </smc:DataGridView.Visibility>
                            <smc:DataGridView.Resources>
                                <DataTemplate x:Key="ControlSearchAccount">
                                    <smc:AutoCompleteTextBox AllowEmty="False"
                                                             AllowWrong="False"
                                                             LookupMode="True"
                                                             Style="{StaticResource AutoCompleteTextBoxEditModeEnable}"
                                                             IsBorderTextBox="False"
                                                             ParentControl="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type Window}}}"
                                                             SysObj="{Binding Path=BindingSysObj, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type Window}}}"
                                                             Text="{smc:BindingEx Path=Value, RelativeSource={RelativeSource AncestorType={x:Type igDP:CellValuePresenter}, Mode=FindAncestor}}"
                                                             ListID="dmtk1" />
                                </DataTemplate>
                                <DataTemplate x:Key="ControlSearchKhachHang">
                                    <smc:AutoCompleteTextBox LookupMode="True"
                                                             AllowEmty="True"
                                                             AllowWrong="False"
                                                             IsBorderTextBox="False"
                                                             Style="{StaticResource AutoCompleteTextBoxEditModeEnable}"
                                                             ParentControl="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type Window}}}"
                                                             SysObj="{Binding Path=BindingSysObj, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type Window}}}"
                                                             Text="{smc:BindingEx Path=Value, RelativeSource={RelativeSource AncestorType={x:Type igDP:CellValuePresenter}, Mode=FindAncestor}}"
                                                             ListID="dmkh_thue">
                                        <smc:AutoCompleteTextBox.IsReadOnly>
                                            <MultiBinding Converter="{StaticResource BindingReadonly}"
                                                          ConverterParameter="CT;ma_kh_t">
                                                <Binding  RelativeSource="{RelativeSource AncestorType={x:Type igDP:CellValuePresenter} , Mode=FindAncestor}"
                                                          Path="Record.Cells[loai_hd].Value"
                                                          Mode="OneWay" />
                                                <Binding Path="Value"
                                                         Source="{StaticResource IsInEditMode}"
                                                         Mode="OneWay" />
                                            </MultiBinding>
                                        </smc:AutoCompleteTextBox.IsReadOnly>
                                    </smc:AutoCompleteTextBox>
                                </DataTemplate>
                                <DataTemplate x:Key="ControlSearchHD">
                                    <smc:AutoCompleteTextBox LookupMode="True"
                                                             AllowEmty="False"
                                                             AllowWrong="False"
                                                             Style="{StaticResource AutoCompleteTextBoxEditModeEnable}"
                                                             IsBorderTextBox="False"
                                                             ParentControl="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type Window}}}"
                                                             SysObj="{Binding Path=BindingSysObj, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type Window}}}"
                                                             Text="{smc:BindingEx Path=Value, RelativeSource={RelativeSource AncestorType={x:Type igDP:CellValuePresenter}, Mode=FindAncestor}}"
                                                             ListID="dmlhd" />
                                </DataTemplate>
                                <DataTemplate x:Key="ControlSearchMaSo">
                                    <smc:AutoCompleteTextBox LookupMode="True"
                                                             AllowEmty="False"
                                                             AllowWrong="False"
                                                             Style="{StaticResource AutoCompleteTextBoxEditModeEnable}"
                                                             IsBorderTextBox="False"
                                                             ParentControl="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type Window}}}"
                                                             SysObj="{Binding Path=BindingSysObj, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type Window}}}"
                                                             Text="{smc:BindingEx Path=Value, RelativeSource={RelativeSource AncestorType={x:Type igDP:CellValuePresenter}, Mode=FindAncestor}}"
                                                             ListID="dmms" />
                                </DataTemplate>
                                <DataTemplate x:Key="ControlSearchKh_mau_hd">
                                    <smc:AutoCompleteTextBox LookupMode="True"
                                                             AllowEmty="True"
                                                             AllowWrong="False"
                                                             Style="{StaticResource AutoCompleteTextBoxEditModeEnable}"
                                                             IsBorderTextBox="False"
                                                             ParentControl="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type Window}}}"
                                                             SysObj="{Binding Path=BindingSysObj, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type Window}}}"
                                                             Text="{smc:BindingEx Path=Value, RelativeSource={RelativeSource AncestorType={x:Type igDP:CellValuePresenter}, Mode=FindAncestor}}"
                                                             ListID="dmmauhd30">
                                        <smc:AutoCompleteTextBox.IsReadOnly>
                                            <MultiBinding Converter="{StaticResource BindingReadonly}"
                                                          ConverterParameter="CT;kh_mau_hd">
                                                <Binding  RelativeSource="{RelativeSource AncestorType={x:Type igDP:CellValuePresenter} , Mode=FindAncestor}"
                                                          Path="Record.Cells[loai_hd].Value"
                                                          Mode="OneWay" />
                                                <Binding Path="Value"
                                                         Source="{StaticResource IsInEditMode}"
                                                         Mode="OneWay" />
                                            </MultiBinding>
                                        </smc:AutoCompleteTextBox.IsReadOnly>
                                    </smc:AutoCompleteTextBox>
                                </DataTemplate>
                                <DataTemplate x:Key="ControlSearchMaThue">
                                    <smc:AutoCompleteTextBox LookupMode="True"
                                                             AllowEmty="False"
                                                             AllowWrong="False"
                                                             Style="{StaticResource AutoCompleteTextBoxEditModeEnable}"
                                                             IsBorderTextBox="False"
                                                             ParentControl="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type Window}}}"
                                                             SysObj="{Binding Path=BindingSysObj, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type Window}}}"
                                                             Text="{smc:BindingEx Path=Value, RelativeSource={RelativeSource AncestorType={x:Type igDP:CellValuePresenter}, Mode=FindAncestor}}"
                                                             ListID="dmthue30">
                                        <smc:AutoCompleteTextBox.IsReadOnly>
                                            <MultiBinding Converter="{StaticResource BindingReadonly}"
                                                          ConverterParameter="CT;ma_thue_i">
                                                <Binding  RelativeSource="{RelativeSource AncestorType={x:Type igDP:CellValuePresenter} , Mode=FindAncestor}"
                                                          Path="Record.Cells[loai_hd].Value"
                                                          Mode="OneWay" />
                                                <Binding Path="Value"
                                                         Source="{StaticResource IsInEditMode}"
                                                         Mode="OneWay" />
                                            </MultiBinding>
                                        </smc:AutoCompleteTextBox.IsReadOnly>
                                    </smc:AutoCompleteTextBox>
                                </DataTemplate>
                                <DataTemplate x:Key="ControlSearchTKThue">
                                    <smc:AutoCompleteTextBox LookupMode="True"
                                                             AllowEmty="True"
                                                             AllowWrong="False"
                                                             Style="{StaticResource AutoCompleteTextBoxEditModeEnable}"
                                                             IsBorderTextBox="False"
                                                             ParentControl="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type Window}}}"
                                                             SysObj="{Binding Path=BindingSysObj, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type Window}}}"
                                                             Text="{smc:BindingEx Path=Value, RelativeSource={RelativeSource AncestorType={x:Type igDP:CellValuePresenter}, Mode=FindAncestor}}"
                                                             ListID="dmtk1">
                                        <smc:AutoCompleteTextBox.IsReadOnly>
                                            <MultiBinding Converter="{StaticResource BindingReadonly}"
                                                          ConverterParameter="CT;tk_thue_i">
                                                <Binding  RelativeSource="{RelativeSource AncestorType={x:Type igDP:CellValuePresenter} , Mode=FindAncestor}"
                                                          Path="Record.Cells[loai_hd].Value"
                                                          Mode="OneWay" />
                                                <Binding Path="Value"
                                                                         Source="{StaticResource IsInEditMode}"
                                                                         Mode="OneWay" />
                                            </MultiBinding>
                                        </smc:AutoCompleteTextBox.IsReadOnly>
                                    </smc:AutoCompleteTextBox>
                                </DataTemplate>
                                <DataTemplate x:Key="ControlSearchTKKH2">
                                    <smc:AutoCompleteTextBox LookupMode="True"
                                                             AllowEmty="False"
                                                             AllowWrong="False"
                                                             Style="{StaticResource AutoCompleteTextBoxEditModeEnable}"
                                                             IsBorderTextBox="False"
                                                             ParentControl="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type Window}}}"
                                                             SysObj="{Binding Path=BindingSysObj, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type Window}}}"
                                                             Text="{smc:BindingEx Path=Value, RelativeSource={RelativeSource AncestorType={x:Type igDP:CellValuePresenter}, Mode=FindAncestor}}"
                                                             ListID="dmkh">
                                        <smc:AutoCompleteTextBox.IsReadOnly>
                                            <MultiBinding Converter="{StaticResource BindingReadonly}"
                                                          ConverterParameter="CT;ma_kh2_t">
                                                <Binding  RelativeSource="{RelativeSource AncestorType={x:Type igDP:CellValuePresenter} , Mode=FindAncestor}"
                                                          Path="Record.Cells[loai_hd].Value"
                                                          Mode="OneWay" />
                                                <Binding  RelativeSource="{RelativeSource AncestorType={x:Type igDP:CellValuePresenter} , Mode=FindAncestor}"
                                                          Path="Record.Cells[tk_thue_cn].Value"
                                                          Mode="OneWay" />
                                            </MultiBinding>
                                        </smc:AutoCompleteTextBox.IsReadOnly>
                                    </smc:AutoCompleteTextBox>
                                </DataTemplate>

                            </smc:DataGridView.Resources>
                            <smc:DataGridView.FieldSettings>
                                <igDP:FieldSettings AllowEdit="True"
                                                    SummaryDisplayArea="BottomFixed"
                                                    SummaryUIType="MultiSelect" />
                            </smc:DataGridView.FieldSettings>
                            <smc:DataGridView.FieldLayoutSettings>
                                <igDP:FieldLayoutSettings HeaderPrefixAreaStyle="{StaticResource StyleHeaderPrefixArea}"
                                                          RecordSelectorStyle="{StaticResource StyleRecordSelector}"
                                                          AllowDelete="False"
                                                          AutoGenerateFields="False" 
                                                          />
                            </smc:DataGridView.FieldLayoutSettings>
                            <smc:DataGridView.FieldLayouts>
                                <igDP:FieldLayout>
                                    <igDP:FieldLayout.SummaryDefinitions>
                                        <smc:ExSummaryDefinition SourceFieldName="tien_nt"
                                                                 Calculator="Sum"
                                                                 Format="{Binding Path=Text, Source={StaticResource Voucher_Ma_nt0}, Mode=OneWay, Converter={StaticResource MaskNumeric}, ConverterParameter=M_IP_TIEN_NT}">
                                        </smc:ExSummaryDefinition>
                                        <smc:ExSummaryDefinition SourceFieldName="tien"
                                                                 Format="{Binding Path=Text, Source={StaticResource Voucher_Ma_nt0}, Mode=OneWay, Converter={StaticResource MaskNumeric}, ConverterParameter=M_IP_TIEN}"
                                                                 Calculator="Sum" />
                                        <smc:ExSummaryDefinition SourceFieldName="thue_nt"
                                                                 Calculator="Sum"
                                                                 Format="{Binding Path=Text, Source={StaticResource Voucher_Ma_nt0}, Mode=OneWay, Converter={StaticResource MaskNumeric}, ConverterParameter=M_IP_TIEN_NT}">
                                        </smc:ExSummaryDefinition>
                                        <smc:ExSummaryDefinition SourceFieldName="thue"
                                                                 Format="{Binding Path=Text, Source={StaticResource Voucher_Ma_nt0}, Mode=OneWay, Converter={StaticResource MaskNumeric}, ConverterParameter=M_IP_TIEN}"
                                                                 Calculator="Sum" />
                                        <smc:ExSummaryDefinition SourceFieldName="tt_nt"
                                                                 Calculator="Sum"
                                                                 Format="{Binding Path=Text, Source={StaticResource Voucher_Ma_nt0}, Mode=OneWay, Converter={StaticResource MaskNumeric}, ConverterParameter=M_IP_TIEN_NT}">
                                        </smc:ExSummaryDefinition>
                                        <smc:ExSummaryDefinition SourceFieldName="tt"
                                                                 Format="{Binding Path=Text, Source={StaticResource Voucher_Ma_nt0}, Mode=OneWay, Converter={StaticResource MaskNumeric}, ConverterParameter=M_IP_TIEN}"
                                                                 Calculator="Sum" />
                                    </igDP:FieldLayout.SummaryDefinitions>
                                    <smc:NotEmptyField Label="Tk nợ"
                                                       Width="100"
                                                       FixedLocation="FixedToNearEdge"
                                                       Name="tk_i">
                                        <igDP:Field.Settings>
                                            <igDP:FieldSettings LabelTextAlignment="Center">
                                                <igDP:FieldSettings.EditorStyle>
                                                    <Style TargetType="{x:Type smc:ControlHostEditor}"
                                                           BasedOn="{StaticResource AutoCompleteTextBoxEditor}">
                                                        <Setter Property="EditDataTemplate"
                                                                Value="{StaticResource ControlSearchAccount}" />
                                                    </Style>
                                                </igDP:FieldSettings.EditorStyle>
                                            </igDP:FieldSettings>
                                        </igDP:Field.Settings>
                                    </smc:NotEmptyField>


                                    <igDP:Field Label="Tên tài khoản"
                                                Name="ten_tk"
                                                Width="180"
                                                FixedLocation="FixedToNearEdge">
                                        <igDP:Field.Visibility>
                                            <MultiBinding Converter="{StaticResource VisibilityConverter}"
                                                              ConverterParameter="LANV">
                                                <Binding Path="Value" Source="{StaticResource Voucher_Lan0}"/>
                                            </MultiBinding>
                                        </igDP:Field.Visibility>
                                        <igDP:Field.Settings>
                                            <igDP:FieldSettings LabelTextAlignment="Center"
                                                                AllowEdit="False"
                                                                EditAsType="{x:Type System:String}" />
                                        </igDP:Field.Settings>
                                    </igDP:Field>
                                    <igDP:Field Label="Tên tài khoản"
                                                Name="ten_tk2"
                                                Width="180"
                                                FixedLocation="FixedToNearEdge">
                                        <igDP:Field.Visibility>
                                            <MultiBinding Converter="{StaticResource VisibilityConverter}"
                                                              ConverterParameter="LANE">
                                                <Binding Path="Value" Source="{StaticResource Voucher_Lan0}"/>
                                            </MultiBinding>
                                        </igDP:Field.Visibility>
                                        <igDP:Field.Settings>
                                            <igDP:FieldSettings LabelTextAlignment="Center"
                                                                AllowEdit="False"
                                                                EditAsType="{x:Type System:String}" />
                                        </igDP:Field.Settings>
                                    </igDP:Field>
                                    <!--<igDP:Field Label="Tên tài khoản"
                                                Name="ten_tk"
                                                FixedLocation="FixedToNearEdge"
                                                Width="225">
                                        <igDP:Field.Settings>
                                            <igDP:FieldSettings AllowEdit="False"
                                                                LabelTextAlignment="Center"
                                                                EditAsType="{x:Type System:String}" />
                                        </igDP:Field.Settings>
                                    </igDP:Field>-->
                                    <igDP:Field Label="Tiền"
                                                Name="tien_nt"
                                                Width="140">
                                        <igDP:Field.Settings>
                                            <igDP:FieldSettings AllowSummaries="True"
                                                                LabelTextAlignment="Center">
                                                <igDP:FieldSettings.EditorStyle>
                                                    <Style TargetType="{x:Type smc:NumericTextBox}">
                                                        <Setter Property="Format"
                                                                Value="{Binding Path=Text, Source={StaticResource Voucher_Ma_nt0}, Mode=OneWay, Converter={StaticResource MaskNumeric}, ConverterParameter=M_IP_TIEN_NT}" />
                                                        <Setter Property="IsReadOnly"
                                                            Value="{smc:BindingEx Path=Value, Source={StaticResource IsInEditMode}, Converter={StaticResource BoolInverter}}" />
                                                    </Style>
                                                </igDP:FieldSettings.EditorStyle>
                                            </igDP:FieldSettings>
                                        </igDP:Field.Settings>
                                    </igDP:Field>
                                    <igDP:Field Name="tien_tt"
                                                Visibility="Hidden">
                                        <igDP:Field.Settings>
                                            <igDP:FieldSettings CellMaxWidth="0" />
                                        </igDP:Field.Settings>
                                    </igDP:Field>
                                    <igDP:Field Label="Diễn giải"
                                                Name="dien_giaii"
                                                Width="225">
                                        <igDP:Field.Settings>
                                            <igDP:FieldSettings EditAsType="{x:Type System:String}"
                                                                AllowEdit="{smc:BindingEx Path=Value, Source={StaticResource IsInEditMode}}"
                                                                LabelTextAlignment="Center" />
                                        </igDP:Field.Settings>
                                    </igDP:Field>
                                    <igDP:Field Label="HĐ"
                                                Name="loai_hd"
                                                Width="45">
                                        <igDP:Field.Settings>
                                            <igDP:FieldSettings LabelTextAlignment="Center">
                                                <igDP:FieldSettings.EditorStyle>
                                                    <Style TargetType="{x:Type smc:ControlHostEditor}"
                                                           BasedOn="{StaticResource AutoCompleteTextBoxEditor}">
                                                        <Setter Property="EditDataTemplate"
                                                                Value="{StaticResource ControlSearchHD}" />
                                                    </Style>
                                                </igDP:FieldSettings.EditorStyle>
                                            </igDP:FieldSettings>
                                        </igDP:Field.Settings>
                                    </igDP:Field>
                                    <igDP:Field Label="Nhóm"
                                                Name="ma_ms"
                                                Width="60">
                                        <igDP:Field.Settings>
                                            <igDP:FieldSettings LabelTextAlignment="Center">
                                                <igDP:FieldSettings.EditorStyle>
                                                    <Style TargetType="{x:Type smc:ControlHostEditor}"
                                                           BasedOn="{StaticResource AutoCompleteTextBoxEditor}">
                                                        <Setter Property="EditDataTemplate"
                                                                Value="{StaticResource ControlSearchMaSo}" />
                                                    </Style>
                                                </igDP:FieldSettings.EditorStyle>
                                            </igDP:FieldSettings>
                                        </igDP:Field.Settings>
                                    </igDP:Field>
                                    <igDP:Field Label="Ngày hđ"
                                                Name="ngay_ct0"
                                                Width="100">
                                        <igDP:Field.Settings>
                                            <igDP:FieldSettings EditAsType="{x:Type System:DateTime}"
                                                                LabelTextAlignment="Center">
                                                <igDP:FieldSettings.EditorStyle>
                                                    <Style TargetType="{x:Type smc:DateTextBox}">

                                                        <Setter Property="IsReadOnly">
                                                            <Setter.Value>
                                                                <MultiBinding Converter="{StaticResource BindingReadonly}"
                                                                              ConverterParameter="CT;ngay_ct0">
                                                                    <Binding  RelativeSource="{RelativeSource AncestorType={x:Type igDP:CellValuePresenter} , Mode=FindAncestor}"
                                                                              Path="Record.Cells[loai_hd].Value"
                                                                              UpdateSourceTrigger="PropertyChanged"
                                                                              Mode="OneWay" />
                                                                    <Binding Path="Value"
                                                                         Source="{StaticResource IsInEditMode}"
                                                                         Mode="OneWay" />
                                                                </MultiBinding>
                                                            </Setter.Value>
                                                        </Setter>
                                                    </Style>
                                                </igDP:FieldSettings.EditorStyle>
                                            </igDP:FieldSettings>
                                        </igDP:Field.Settings>
                                    </igDP:Field>
                                    <igDP:Field Label="Số seri"
                                                Name="so_seri0"
                                                Width="100">
                                        <igDP:Field.Settings>
                                            <igDP:FieldSettings LabelTextAlignment="Center">
                                                <igDP:FieldSettings.EditorStyle>
                                                    <Style TargetType="{x:Type smc:ExTextEditor}">
                                                        <Setter Property="CharacterCasing"
                                                                Value="Upper" />
                                                        <Setter Property="IsReadOnly">
                                                            <Setter.Value>
                                                                <MultiBinding Converter="{StaticResource BindingReadonly}"
                                                                              ConverterParameter="CT;so_seri0">
                                                                    <Binding  RelativeSource="{RelativeSource AncestorType={x:Type igDP:CellValuePresenter} , Mode=FindAncestor}"
                                                                              Path="Record.Cells[loai_hd].Value"
                                                                              UpdateSourceTrigger="PropertyChanged"
                                                                              Mode="OneWay" />
                                                                    <Binding Path="Value"
                                                                         Source="{StaticResource IsInEditMode}"
                                                                         Mode="OneWay" />
                                                                </MultiBinding>
                                                            </Setter.Value>
                                                        </Setter>
                                                    </Style>
                                                </igDP:FieldSettings.EditorStyle>
                                            </igDP:FieldSettings>
                                        </igDP:Field.Settings>
                                    </igDP:Field>
                                    <igDP:Field Label="Số hđ"
                                                Name="so_ct0"
                                                Width="60">
                                        <igDP:Field.Settings>
                                            <igDP:FieldSettings LabelTextAlignment="Center">
                                                <igDP:FieldSettings.EditorStyle>
                                                    <Style TargetType="{x:Type smc:ExTextEditor}">
                                                        <Setter Property="IsReadOnly">
                                                            <Setter.Value>
                                                                <MultiBinding Converter="{StaticResource BindingReadonly}"
                                                                              ConverterParameter="CT;so_ct0">
                                                                    <Binding  RelativeSource="{RelativeSource AncestorType={x:Type igDP:CellValuePresenter} , Mode=FindAncestor}"
                                                                              Path="Record.Cells[loai_hd].Value"
                                                                              Mode="OneWay" />
                                                                    <Binding Path="Value"
                                                                         Source="{StaticResource IsInEditMode}"
                                                                         Mode="OneWay" />
                                                                </MultiBinding>
                                                            </Setter.Value>
                                                        </Setter>
                                                    </Style>
                                                </igDP:FieldSettings.EditorStyle>
                                            </igDP:FieldSettings>
                                        </igDP:Field.Settings>
                                    </igDP:Field>
                                    
                                    <igDP:Field Label="Mẫu hóa đơn"
                                                Name="kh_mau_hd"
                                                Width="80">
                                        <igDP:Field.Settings>
                                            <igDP:FieldSettings LabelTextAlignment="Center">
                                                <igDP:FieldSettings.EditorStyle>
                                                    <Style TargetType="{x:Type smc:ControlHostEditor}"
                                                           BasedOn="{StaticResource AutoCompleteTextBoxEditor}">
                                                        <Setter Property="EditDataTemplate"
                                                                Value="{StaticResource ControlSearchKh_mau_hd}" />
                                                    </Style>
                                                </igDP:FieldSettings.EditorStyle>
                                            </igDP:FieldSettings>
                                        </igDP:Field.Settings>
                                    </igDP:Field>
                                    <igDP:Field Label="Mã khách"
                                                Name="ma_kh_t"
                                                Width="100">
                                        <igDP:Field.Settings>
                                            <igDP:FieldSettings LabelTextAlignment="Center">
                                                <igDP:FieldSettings.EditorStyle>
                                                    <Style TargetType="{x:Type smc:ControlHostEditor}"
                                                           BasedOn="{StaticResource AutoCompleteTextBoxEditor}">
                                                        <Setter Property="EditDataTemplate"
                                                                Value="{StaticResource ControlSearchKhachHang}" />
                                                    </Style>
                                                </igDP:FieldSettings.EditorStyle>
                                            </igDP:FieldSettings>
                                        </igDP:Field.Settings>

                                    </igDP:Field>
                                    <igDP:Field Label="Tên khách"
                                                Name="ten_kh_t"
                                                Width="225">
                                        <igDP:Field.Settings>
                                            <igDP:FieldSettings LabelTextAlignment="Center">
                                                <igDP:FieldSettings.EditorStyle>
                                                    <Style TargetType="{x:Type igEditors:XamTextEditor}">
                                                        <Setter Property="IsReadOnly">
                                                            <Setter.Value>
                                                                <MultiBinding Converter="{StaticResource BindingReadonly}"
                                                                              ConverterParameter="CT;ten_kh_t">
                                                                    <Binding  RelativeSource="{RelativeSource AncestorType={x:Type igDP:CellValuePresenter} , Mode=FindAncestor}"
                                                                              Path="Record.Cells[loai_hd].Value"
                                                                              Mode="OneWay" />
                                                                    <Binding Path="Value"
                                                                         Source="{StaticResource IsInEditMode}"
                                                                         Mode="OneWay" />
                                                                </MultiBinding>
                                                            </Setter.Value>
                                                        </Setter>
                                                    </Style>
                                                </igDP:FieldSettings.EditorStyle>
                                            </igDP:FieldSettings>
                                        </igDP:Field.Settings>
                                    </igDP:Field>
                                    <igDP:Field Label="Địa chỉ"
                                                Name="dia_chi_t"
                                                Width="180">
                                        <igDP:Field.Settings>
                                            <igDP:FieldSettings LabelTextAlignment="Center">
                                                <igDP:FieldSettings.EditorStyle>
                                                    <Style TargetType="{x:Type igEditors:XamTextEditor}">
                                                        <Setter Property="IsReadOnly">
                                                            <Setter.Value>
                                                                <MultiBinding Converter="{StaticResource BindingReadonly}"
                                                                              ConverterParameter="CT;dia_chi_t">
                                                                    <Binding  RelativeSource="{RelativeSource AncestorType={x:Type igDP:CellValuePresenter} , Mode=FindAncestor}"
                                                                              Path="Record.Cells[loai_hd].Value"
                                                                              Mode="OneWay" />
                                                                    <Binding Path="Value"
                                                                         Source="{StaticResource IsInEditMode}"
                                                                         Mode="OneWay" />
                                                                </MultiBinding>
                                                            </Setter.Value>
                                                        </Setter>
                                                    </Style>
                                                </igDP:FieldSettings.EditorStyle>
                                            </igDP:FieldSettings>
                                        </igDP:Field.Settings>
                                    </igDP:Field>
                                    <igDP:Field Label="Mã số thuế"
                                                Name="mst_t"
                                                Width="100">
                                        <igDP:Field.Settings>
                                            <igDP:FieldSettings LabelTextAlignment="Center">
                                                <igDP:FieldSettings.EditorStyle>
                                                    <Style TargetType="{x:Type igEditors:XamTextEditor}">
                                                        <Setter Property="IsReadOnly">
                                                            <Setter.Value>
                                                                <MultiBinding Converter="{StaticResource BindingReadonly}"
                                                                              ConverterParameter="CT;mst_t">
                                                                    <Binding  RelativeSource="{RelativeSource AncestorType={x:Type igDP:CellValuePresenter} , Mode=FindAncestor}"
                                                                              Path="Record.Cells[loai_hd].Value"
                                                                              Mode="OneWay" />
                                                                    <Binding Path="Value"
                                                                         Source="{StaticResource IsInEditMode}"
                                                                         Mode="OneWay" />
                                                                </MultiBinding>
                                                            </Setter.Value>
                                                        </Setter>
                                                    </Style>
                                                </igDP:FieldSettings.EditorStyle>
                                            </igDP:FieldSettings>
                                        </igDP:Field.Settings>
                                    </igDP:Field>
                                    <igDP:Field Label="Hàng hóa"
                                                Name="ten_vt_t"
                                                Width="100">
                                        <igDP:Field.Settings>
                                            <igDP:FieldSettings LabelTextAlignment="Center">
                                                <igDP:FieldSettings.EditorStyle>
                                                    <Style TargetType="{x:Type igEditors:XamTextEditor}">
                                                        <Setter Property="IsReadOnly">
                                                            <Setter.Value>
                                                                <MultiBinding Converter="{StaticResource BindingReadonly}"
                                                                              ConverterParameter="CT;ten_vt_t">
                                                                    <Binding  RelativeSource="{RelativeSource AncestorType={x:Type igDP:CellValuePresenter} , Mode=FindAncestor}"
                                                                              Path="Record.Cells[loai_hd].Value"
                                                                              Mode="OneWay" />
                                                                    <Binding Path="Value"
                                                                         Source="{StaticResource IsInEditMode}"
                                                                         Mode="OneWay" />
                                                                </MultiBinding>
                                                            </Setter.Value>
                                                        </Setter>
                                                    </Style>
                                                </igDP:FieldSettings.EditorStyle>
                                            </igDP:FieldSettings>
                                        </igDP:Field.Settings>
                                    </igDP:Field>
                                    <igDP:Field Label="Mã thuế"
                                                Name="ma_thue_i"
                                                Width="100">
                                        <igDP:Field.Settings>
                                            <igDP:FieldSettings LabelTextAlignment="Center">
                                                <igDP:FieldSettings.EditorStyle>
                                                    <Style TargetType="{x:Type smc:ControlHostEditor}"
                                                           BasedOn="{StaticResource AutoCompleteTextBoxEditor}">
                                                        <Setter Property="EditDataTemplate"
                                                                Value="{StaticResource ControlSearchMaThue}" />
                                                    </Style>
                                                </igDP:FieldSettings.EditorStyle>
                                            </igDP:FieldSettings>
                                        </igDP:Field.Settings>
                                    </igDP:Field>
                                    <igDP:Field Label="Thuế suất"
                                                Name="thue_suat"
                                                Width="100">
                                        <igDP:Field.Settings>
                                            <igDP:FieldSettings LabelTextAlignment="Center">
                                                <igDP:FieldSettings.EditorStyle>
                                                    <Style TargetType="{x:Type smc:NumericTextBox}">
                                                        <Setter Property="IsReadOnly">
                                                            <Setter.Value>True</Setter.Value>
                                                            <!--<Setter.Value>
                                                                <MultiBinding Converter="{StaticResource ReadOnlyHD}"
                                                                              ConverterParameter="thue_suat">
                                                                    <Binding  RelativeSource="{RelativeSource AncestorType={x:Type igDP:CellValuePresenter} , Mode=FindAncestor}"
                                                                              Path="Record.Cells[loai_hd].Value"
                                                                              Mode="OneWay" />
                                                                </MultiBinding>
                                                            </Setter.Value>-->
                                                        </Setter>
                                                    </Style>
                                                </igDP:FieldSettings.EditorStyle>
                                            </igDP:FieldSettings>
                                        </igDP:Field.Settings>
                                    </igDP:Field>
                                    <igDP:Field  Name="thue_nt"
                                                 Label="Thuế NT"
                                                 Width="140">
                                        <igDP:Field.Settings>
                                            <igDP:FieldSettings LabelTextAlignment="Center"
                                                                AllowSummaries="True">
                                                <igDP:FieldSettings.EditorStyle>
                                                    <Style TargetType="{x:Type smc:NumericTextBox}">
                                                        <Setter Property="IsReadOnly">
                                                            <Setter.Value>
                                                                <MultiBinding Converter="{StaticResource BindingReadonly}"
                                                                              ConverterParameter="CT;thue_nt">
                                                                    <Binding  RelativeSource="{RelativeSource AncestorType={x:Type igDP:CellValuePresenter} , Mode=FindAncestor}"
                                                                              Path="Record.Cells[loai_hd].Value"
                                                                              Mode="OneWay" />
                                                                    <Binding  RelativeSource="{RelativeSource AncestorType={x:Type igDP:CellValuePresenter} , Mode=FindAncestor}"
                                                                              Path="Record.Cells[tien].Value"
                                                                              Mode="OneWay" />
                                                                    <Binding  RelativeSource="{RelativeSource AncestorType={x:Type igDP:CellValuePresenter} , Mode=FindAncestor}"
                                                                              Path="Record.Cells[thue_suat].Value"
                                                                              Mode="OneWay" />
                                                                    <Binding Path="Value"
                                                                             Source="{StaticResource IsCheckedSua_tien}"
                                                                             Mode="OneWay" />
                                                                    <Binding Path="Value"
                                                                         Source="{StaticResource IsInEditMode}"
                                                                         Mode="OneWay" />
                                                                </MultiBinding>
                                                            </Setter.Value>
                                                        </Setter>
                                                        <Setter Property="Format"
                                                                Value="{Binding Path=Text, Source={StaticResource Voucher_Ma_nt0}, Mode=OneWay, Converter={StaticResource MaskNumeric}, ConverterParameter=M_IP_TIEN_NT}" />
                                                    </Style>
                                                </igDP:FieldSettings.EditorStyle>
                                            </igDP:FieldSettings>
                                        </igDP:Field.Settings>
                                    </igDP:Field>
                                    <igDP:Field Label="Tk thuế"
                                                Name="tk_thue_i"
                                                Width="100">
                                        <igDP:Field.Settings>
                                            <igDP:FieldSettings LabelTextAlignment="Center">
                                                <igDP:FieldSettings.EditorStyle>
                                                    <Style TargetType="{x:Type smc:ControlHostEditor}"
                                                           BasedOn="{StaticResource AutoCompleteTextBoxEditor}">
                                                        <Setter Property="EditDataTemplate"
                                                                Value="{StaticResource ControlSearchTKThue}" />
                                                    </Style>
                                                </igDP:FieldSettings.EditorStyle>
                                            </igDP:FieldSettings>
                                        </igDP:Field.Settings>
                                    </igDP:Field>
                                    <igDP:Field Label="Cục thuế"
                                                Name="ma_kh2_t"
                                                Width="100">
                                        <igDP:Field.Settings>
                                            <igDP:FieldSettings LabelTextAlignment="Center">
                                                <igDP:FieldSettings.EditorStyle>
                                                    <Style TargetType="{x:Type smc:ControlHostEditor}"
                                                           BasedOn="{StaticResource AutoCompleteTextBoxEditor}">
                                                        <Setter Property="EditDataTemplate"
                                                                Value="{StaticResource ControlSearchTKKH2}" />
                                                    </Style>
                                                </igDP:FieldSettings.EditorStyle>
                                            </igDP:FieldSettings>
                                        </igDP:Field.Settings>
                                    </igDP:Field>
                                    <igDP:Field Label="Tt"
                                                Name="tt_nt"
                                                Width="140">
                                        <igDP:Field.Settings>
                                            <igDP:FieldSettings LabelTextAlignment="Center"
                                                                AllowSummaries="True">
                                                <igDP:FieldSettings.EditorStyle>
                                                    <Style TargetType="{x:Type smc:NumericTextBox}">
                                                        <Setter Property="IsReadOnly">
                                                            <Setter.Value>
                                                                <MultiBinding Converter="{StaticResource BindingReadonly}"
                                                                              ConverterParameter="CT;tt_nt">
                                                                    <Binding  RelativeSource="{RelativeSource AncestorType={x:Type igDP:CellValuePresenter} , Mode=FindAncestor}"
                                                                              Path="Record.Cells[loai_hd].Value"
                                                                              Mode="OneWay" />
                                                                    <Binding Path="Value"
                                                                         Source="{StaticResource IsInEditMode}"
                                                                         Mode="OneWay" />
                                                                </MultiBinding>
                                                            </Setter.Value>
                                                        </Setter>
                                                        <Setter Property="Format"
                                                                Value="{Binding Path=Text, Source={StaticResource Voucher_Ma_nt0}, Mode=OneWay, Converter={StaticResource MaskNumeric}, ConverterParameter=M_IP_TIEN_NT}" />
                                                    </Style>
                                                </igDP:FieldSettings.EditorStyle>
                                            </igDP:FieldSettings>
                                        </igDP:Field.Settings>
                                    </igDP:Field>
                                    <igDP:Field Label="Tiền"
                                                Name="tien"
                                                Width="140">
                                        <igDP:Field.Settings>
                                            <igDP:FieldSettings LabelTextAlignment="Center"
                                                                AllowSummaries="True">
                                                <igDP:FieldSettings.EditorStyle>
                                                    <Style TargetType="{x:Type smc:NumericTextBox}">
                                                        <Setter Property="IsReadOnly">
                                                            <Setter.Value>
                                                                <MultiBinding Converter="{StaticResource BindingReadonly}"
                                                                              ConverterParameter="CT;tien">
                                                                    <Binding  RelativeSource="{RelativeSource AncestorType={x:Type igDP:CellValuePresenter} , Mode=FindAncestor}"
                                                                              Path="Record.Cells[loai_hd].Value"
                                                                              Mode="OneWay" />
                                                                    <Binding  RelativeSource="{RelativeSource AncestorType={x:Type igDP:CellValuePresenter} , Mode=FindAncestor}"
                                                                              Path="Record.Cells[tien_nt].Value"
                                                                              Mode="OneWay" />
                                                                    <Binding Path="Value"
                                                                             Source="{StaticResource Ty_Gia_ValueChange}"
                                                                             Mode="OneWay" />
                                                                    <Binding Path="Value"
                                                                             Source="{StaticResource IsCheckedSua_tien}"
                                                                             Mode="OneWay" />
                                                                    <Binding Path="Value"
                                                                         Source="{StaticResource IsInEditMode}"
                                                                         Mode="OneWay" />
                                                                </MultiBinding>
                                                            </Setter.Value>
                                                        </Setter>
                                                        <Setter Property="Format"
                                                                Value="{Binding Path=Text, Source={StaticResource Voucher_Ma_nt0}, Mode=OneWay, Converter={StaticResource MaskNumeric}, ConverterParameter=M_IP_TIEN}" />
                                                    </Style>
                                                </igDP:FieldSettings.EditorStyle>
                                            </igDP:FieldSettings>
                                        </igDP:Field.Settings>
                                    </igDP:Field>
                                    <igDP:Field Name="thue"
                                                Width="140">
                                        <igDP:Field.Settings>
                                            <igDP:FieldSettings LabelTextAlignment="Center"
                                                                AllowSummaries="True">
                                                <igDP:FieldSettings.EditorStyle>
                                                    <Style TargetType="{x:Type smc:NumericTextBox}">
                                                        <Setter Property="IsReadOnly">
                                                            <Setter.Value>
                                                                <MultiBinding Converter="{StaticResource BindingReadonly}"
                                                                              ConverterParameter="CT;thue">
                                                                    <Binding  RelativeSource="{RelativeSource AncestorType={x:Type igDP:CellValuePresenter} , Mode=FindAncestor}"
                                                                              Path="Record.Cells[loai_hd].Value"
                                                                              Mode="OneWay" />
                                                                    <Binding  RelativeSource="{RelativeSource AncestorType={x:Type igDP:CellValuePresenter} , Mode=FindAncestor}"
                                                                              Path="Record.Cells[tien].Value"
                                                                              Mode="OneWay" />
                                                                    <Binding  RelativeSource="{RelativeSource AncestorType={x:Type igDP:CellValuePresenter} , Mode=FindAncestor}"
                                                                              Path="Record.Cells[thue_suat].Value"
                                                                              Mode="OneWay" />
                                                                    <Binding Path="Value"
                                                                             Source="{StaticResource IsCheckedSua_tien}"
                                                                             Mode="OneWay" />
                                                                    <Binding Path="Value"
                                                                         Source="{StaticResource IsInEditMode}"
                                                                         Mode="OneWay" />
                                                                </MultiBinding>
                                                            </Setter.Value>
                                                        </Setter>
                                                        <Setter Property="Format"
                                                                Value="{Binding Path=Text, Source={StaticResource Voucher_Ma_nt0}, Mode=OneWay, Converter={StaticResource MaskNumeric}, ConverterParameter=M_IP_TIEN}" />
                                                    </Style>
                                                </igDP:FieldSettings.EditorStyle>
                                            </igDP:FieldSettings>
                                        </igDP:Field.Settings>
                                    </igDP:Field>
                                    <igDP:Field Name="tt"
                                                Width="140">
                                        <igDP:Field.Settings>
                                            <igDP:FieldSettings LabelTextAlignment="Center"
                                                                AllowSummaries="True">
                                                <igDP:FieldSettings.EditorStyle>
                                                    <Style TargetType="{x:Type smc:NumericTextBox}">
                                                        <Setter Property="IsReadOnly">
                                                            <Setter.Value>
                                                                <MultiBinding Converter="{StaticResource BindingReadonly}"
                                                                              ConverterParameter="CT;tt">
                                                                    <Binding  RelativeSource="{RelativeSource AncestorType={x:Type igDP:CellValuePresenter} , Mode=FindAncestor}"
                                                                              Path="Record.Cells[loai_hd].Value"
                                                                              Mode="OneWay" />
                                                                    <Binding Path="Value"
                                                                         Source="{StaticResource IsInEditMode}"
                                                                         Mode="OneWay" />
                                                                </MultiBinding>
                                                            </Setter.Value>
                                                        </Setter>
                                                        <Setter Property="Format"
                                                                Value="{Binding Path=Text, Source={StaticResource Voucher_Ma_nt0}, Mode=OneWay, Converter={StaticResource MaskNumeric}, ConverterParameter=M_IP_TIEN}" />
                                                    </Style>
                                                </igDP:FieldSettings.EditorStyle>
                                            </igDP:FieldSettings>
                                        </igDP:Field.Settings>
                                    </igDP:Field>
                                    <igDP:Field Label="Ghi chú"
                                                Name="ghi_chu_t"
                                                Width="180">
                                        <igDP:Field.Settings>
                                            <igDP:FieldSettings LabelTextAlignment="Center">
                                                <igDP:FieldSettings.EditorStyle>
                                                    <Style TargetType="{x:Type igEditors:XamTextEditor}">
                                                        <Setter Property="IsReadOnly">
                                                            <Setter.Value>
                                                                <MultiBinding Converter="{StaticResource BindingReadonly}"
                                                                              ConverterParameter="CT;ghi_chu_t">
                                                                    <Binding  RelativeSource="{RelativeSource AncestorType={x:Type igDP:CellValuePresenter} , Mode=FindAncestor}"
                                                                              Path="Record.Cells[loai_hd].Value"
                                                                              Mode="OneWay" />
                                                                    <Binding Path="Value"
                                                                         Source="{StaticResource IsInEditMode}"
                                                                         Mode="OneWay" />
                                                                </MultiBinding>
                                                            </Setter.Value>
                                                        </Setter>
                                                    </Style>
                                                </igDP:FieldSettings.EditorStyle>
                                            </igDP:FieldSettings>
                                        </igDP:Field.Settings>
                                    </igDP:Field>

                                    <igDP:Field Label="tk_thue_cn"
                                                Name="tk_thue_cn"
                                                Visibility="Hidden"/>
                                </igDP:FieldLayout>
                            </smc:DataGridView.FieldLayouts>
                        </smc:DataGridView>
                        <!--Grdhd-->
                        <smc:DataGridView x:Name="Grdhd"
                                          PreviewEditModeEnded="Grdhd_EditModeEnded"
                                          PreviewGotKeyboardFocus="Grdhd_PreviewGotKeyboardFocus"
                                          AddNewRecord="Grdhd_AddNewRecord"
                                          RecordDelete="Grdhd_RecordDelete"
                                          KeyDown="Grdhd_KeyDown"
                                          Tag="{Binding Path=Value, Source={StaticResource IsInEditMode},Mode=OneWay}"
                                          KeyUp="Grdhd_KeyUp"
                                          IsVoucher="True"
                                          TabIndex="120">
                            <smc:DataGridView.Visibility>
                                <MultiBinding Converter="{StaticResource VisibilityConverter}"
                                              ConverterParameter="KindCT;HD"
                                              Mode="OneWay">
                                    <Binding Path="Text" Source="{StaticResource Ma_GD_Value}"/>
                                </MultiBinding>
                            </smc:DataGridView.Visibility>
                            <smc:DataGridView.Resources>
                                <DataTemplate x:Key="ControlSearchAccount">
                                    <smc:AutoCompleteTextBox AllowEmty="False"
                                                             AllowWrong="False"
                                                             LookupMode="True"
                                                             Style="{StaticResource AutoCompleteTextBoxEditModeEnable}"
                                                             IsBorderTextBox="False"
                                                             ParentControl="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type Window}}}"
                                                             SysObj="{Binding Path=BindingSysObj, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type Window}}}"
                                                             Text="{smc:BindingEx Path=Value, RelativeSource={RelativeSource AncestorType={x:Type igDP:CellValuePresenter}, Mode=FindAncestor}}"
                                                             ListID="dmtk1" />
                                </DataTemplate>
                            </smc:DataGridView.Resources>
                            <smc:DataGridView.FieldSettings>
                                <igDP:FieldSettings AllowEdit="True"
                                                    SummaryDisplayArea="BottomFixed"
                                                    SummaryUIType="MultiSelect" />
                            </smc:DataGridView.FieldSettings>
                            <smc:DataGridView.FieldLayoutSettings>
                                <igDP:FieldLayoutSettings AllowDelete="False"
                                                          AutoGenerateFields="False" 
                                                          />
                            </smc:DataGridView.FieldLayoutSettings>
                            <smc:DataGridView.FieldLayouts>
                                <igDP:FieldLayout>
                                    <igDP:FieldLayout.SummaryDefinitions>
                                        <smc:ExSummaryDefinition SourceFieldName="t_tt_nt0"
                                                                 Format="{Binding Path=Text, Source={StaticResource Ip_tien_hd}, Mode=OneWay}"
                                                                 Calculator="Sum" />
                                        <smc:ExSummaryDefinition SourceFieldName="t_tt_qd"
                                                                 Calculator="Sum"
                                                                 Format="{Binding Path=Text, Source={StaticResource Ip_tien_hd}, Mode=OneWay}"/>
                                        <smc:ExSummaryDefinition SourceFieldName="phai_tt_nt"
                                                                 Format="{Binding Path=Text, Source={StaticResource Ip_tien_hd}, Mode=OneWay}"
                                                                 Calculator="Sum" />
                                        <smc:ExSummaryDefinition SourceFieldName="tien_nt"
                                                                 Format="{Binding Path=Text, Source={StaticResource Voucher_Ma_nt0}, Mode=OneWay, Converter={StaticResource MaskNumeric}, ConverterParameter=M_IP_TIEN_NT}"
                                                                 Calculator="Sum" />
                                        <smc:ExSummaryDefinition SourceFieldName="tt_qd"
                                                                 Format="{Binding Path=Text, Source={StaticResource Ip_tien_hd}, Mode=OneWay}"
                                                                 Calculator="Sum" />
                                        <smc:ExSummaryDefinition SourceFieldName="tien"
                                                                 Format="{Binding Path=Text, Source={StaticResource Voucher_Ma_nt0}, Mode=OneWay, Converter={StaticResource MaskNumeric}, ConverterParameter=M_IP_TIEN}"
                                                                 Calculator="Sum" />
                                    </igDP:FieldLayout.SummaryDefinitions>

                                    <igDP:Field Label="Số HĐ"
                                                       Width="80"
                                                       FixedLocation="FixedToNearEdge"
                                                       Name="so_ct0">
                                        <igDP:Field.Settings>
                                            <igDP:FieldSettings AllowEdit="{Binding Path=Value, Source={StaticResource IsInEditMode}}"
                                                                    LabelTextAlignment="Center"/>
                                        </igDP:Field.Settings>
                                    </igDP:Field>

                                    <igDP:Field Label="Ngày HĐ"
                                                Name="ngay_ct0"
                                                Width="140"
                                                FixedLocation="FixedToNearEdge"
                                                >
                                        <igDP:Field.Settings>
                                            <igDP:FieldSettings LabelTextAlignment="Center"
                                                                    AllowEdit="False"
                                                                    EditAsType="{x:Type System:DateTime}"
                                                                    EditorType="{x:Type smc:DateTextBox}" />
                                        </igDP:Field.Settings>
                                    </igDP:Field>

                                    <igDP:Field Label="Mã n.tệ"
                                                Name="ma_nt_i"
                                                Width="80"
                                                >
                                        <igDP:Field.Settings>
                                            <igDP:FieldSettings LabelTextAlignment="Center"
                                                                    AllowEdit="False"/>
                                        </igDP:Field.Settings>
                                    </igDP:Field>

                                    <igDP:Field Label="Tk nợ"
                                                       Width="80"
                                                       Name="tk_i">
                                        <igDP:Field.Settings>
                                            <igDP:FieldSettings AllowEdit="False"
                                                                LabelTextAlignment="Center"
                                                                   
                                                                >
                                            </igDP:FieldSettings>
                                        </igDP:Field.Settings>
                                    </igDP:Field>
                                    <igDP:Field Label="Tỷ giá gs"
                                                Name="ty_giahtf2"
                                                Width="140">
                                        <igDP:Field.Settings>
                                            <igDP:FieldSettings LabelTextAlignment="Center">
                                                <igDP:FieldSettings.EditorStyle>
                                                    <Style TargetType="{x:Type smc:ExRateTextBox}">
                                                        <Setter Property="IsReadOnly"
                                                                Value="True" />
                                                        <Setter Property="Rate"
                                                                Value="{smc:BindingEx RelativeSource={RelativeSource AncestorType={x:Type igDP:CellValuePresenter}, Mode=FindAncestor}, Path=Record.DataItem.ty_gia_ht2}" />
                                                        <Setter Property="KindRate"
                                                                Value="{Binding Path=Text, Source={StaticResource Loai_tg},Mode=OneWay}" />
                                                        <Setter Property="Format"
                                                                Value="{Binding Path=Text, Source={StaticResource Voucher_Ma_nt0}, Mode=OneWay, Converter={StaticResource MaskNumeric}, ConverterParameter=M_IP_TY_GIA}" />
                                                      
                                                    </Style>
                                                </igDP:FieldSettings.EditorStyle>
                                            </igDP:FieldSettings>
                                        </igDP:Field.Settings>
                                    </igDP:Field>

                                    <igDP:Field Label="Tiền trên HĐ"
                                                Name="t_tt_nt0"
                                                Width="140">
                                        <igDP:Field.Settings>
                                            <igDP:FieldSettings LabelTextAlignment="Center"
                                                                    AllowEdit="False">
                                                <igDP:FieldSettings.EditorStyle>
                                                    <Style TargetType="{x:Type smc:NumericTextBox}">
                                                        <Setter Property="Format"
                                                                Value="{Binding Path=Text, Source={StaticResource Ip_tien_hd}, Mode=OneWay}" />
                                                    </Style>
                                                </igDP:FieldSettings.EditorStyle>
                                            </igDP:FieldSettings>
                                        </igDP:Field.Settings>
                                    </igDP:Field>

                                    <igDP:Field Label="Đã TT"
                                                Name="t_tt_qd"
                                                Width="140">
                                        <igDP:Field.Settings>
                                            <igDP:FieldSettings LabelTextAlignment="Center"
                                                                    AllowEdit="False">
                                                <igDP:FieldSettings.EditorStyle>
                                                    <Style TargetType="{x:Type smc:NumericTextBox}">
                                                        <Setter Property="Format"
                                                                Value="{Binding Path=Text, Source={StaticResource Ip_tien_hd}, Mode=OneWay}" />
                                                    </Style>
                                                </igDP:FieldSettings.EditorStyle>
                                            </igDP:FieldSettings>
                                        </igDP:Field.Settings>
                                    </igDP:Field>

                                    <igDP:Field Label="Còn phải TT"
                                                Name="phai_tt_nt"
                                                Width="140">
                                        <igDP:Field.Settings>
                                            <igDP:FieldSettings LabelTextAlignment="Center"
                                                                    AllowEdit="False">
                                                <igDP:FieldSettings.EditorStyle>
                                                    <Style TargetType="{x:Type smc:NumericTextBox}">
                                                        <Setter Property="Format"
                                                                Value="{Binding Path=Text, Source={StaticResource Ip_tien_hd}, Mode=OneWay}" />
                                                    </Style>
                                                </igDP:FieldSettings.EditorStyle>
                                            </igDP:FieldSettings>
                                        </igDP:Field.Settings>
                                    </igDP:Field>

                                    <igDP:Field Label="TT n.tệ"
                                                Name="tien_nt"
                                                Width="130">
                                        <igDP:Field.Settings>
                                            <igDP:FieldSettings AllowSummaries="True"
                                                                    LabelTextAlignment="Center">
                                                <igDP:FieldSettings.EditorStyle>
                                                    <Style TargetType="{x:Type smc:NumericTextBox}">
                                                        <Setter Property="Format"
                                                                Value="{Binding Path=Text, Source={StaticResource Voucher_Ma_nt0}, Mode=OneWay, Converter={StaticResource MaskNumeric}, ConverterParameter=M_IP_TIEN_NT}" />
                                                        <Setter Property="IsReadOnly"
                                                            Value="{smc:BindingEx Path=Value, Source={StaticResource IsInEditMode}, Converter={StaticResource BoolInverter}}" />

                                                    </Style>
                                                </igDP:FieldSettings.EditorStyle>
                                            </igDP:FieldSettings>
                                        </igDP:Field.Settings>
                                    </igDP:Field>

                                    <igDP:Field Label="TT quy đổi"
                                                Name="tt_qd"
                                                Width="140">
                                        <igDP:Field.Settings>
                                            <igDP:FieldSettings LabelTextAlignment="Center">
                                                <igDP:FieldSettings.EditorStyle>
                                                    <Style TargetType="{x:Type smc:NumericTextBox}">
                                                        <Setter Property="IsReadOnly">
                                                            <Setter.Value>
                                                                <MultiBinding Converter="{StaticResource BindingReadonly}"
                                                                              ConverterParameter="CTHD;TT_QD">
                                                                    <Binding  RelativeSource="{RelativeSource AncestorType={x:Type igDP:CellValuePresenter} , Mode=FindAncestor}"
                                                                              Path="Record.Cells[ma_nt_i].Value"/>
                                                                    <Binding Path="Text" Source="{StaticResource Voucher_Ma_nt0}"/>
                                                                    <Binding Path="Value"
                                                                         Source="{StaticResource IsInEditMode}"
                                                                         Mode="OneWay" />
                                                                </MultiBinding>
                                                            </Setter.Value>
                                                        </Setter>
                                                        <Setter Property="Format"
                                                                Value="{Binding Path=Text, Source={StaticResource Ip_tien_hd}, Mode=OneWay}" />
                                                    </Style>
                                                </igDP:FieldSettings.EditorStyle>
                                            </igDP:FieldSettings>
                                        </igDP:Field.Settings>
                                    </igDP:Field>

                                    <igDP:Field Label="Diễn giải"
                                                Name="dien_giaii"
                                                Width="225">
                                        <igDP:Field.Settings>
                                            <igDP:FieldSettings AllowEdit="{Binding Path=Value, Source={StaticResource IsInEditMode}}"
                                                                    EditAsType="{x:Type System:String}"
                                                                    LabelTextAlignment="Center" />
                                        </igDP:Field.Settings>
                                    </igDP:Field>

                                    <igDP:Field Label="TT VND"
                                                Name="tien"
                                                Width="130">
                                        <igDP:Field.Visibility>
                                            <MultiBinding Converter="{StaticResource VisibilityConverter}"
                                              ConverterParameter="NotMaNt0"
                                              Mode="OneWay">
                                                <Binding Path="Value" Source="{StaticResource Voucher_Ma_nt0}"/>
                                            </MultiBinding>
                                        </igDP:Field.Visibility>

                                        <igDP:Field.Settings>
                                            <igDP:FieldSettings AllowSummaries="True"
                                                                    LabelTextAlignment="Center">
                                                <igDP:FieldSettings.EditorStyle>
                                                    <Style TargetType="{x:Type smc:NumericTextBox}">
                                                        <Setter Property="IsReadOnly">
                                                            <Setter.Value>
                                                                <MultiBinding Converter="{StaticResource BindingReadonly}"
                                                                              ConverterParameter="CTHD;tien">
                                                                    <Binding  RelativeSource="{RelativeSource AncestorType={x:Type igDP:CellValuePresenter} , Mode=FindAncestor}"
                                                                              Path="Record.Cells[tien_nt].Value"
                                                                              Mode="OneWay" />
                                                                    <Binding Path="Value"
                                                                             Source="{StaticResource Ty_Gia_ValueChange}"
                                                                             Mode="OneWay" />
                                                                    <Binding Path="Value"
                                                                             Source="{StaticResource IsCheckedSua_tien}"
                                                                             Mode="OneWay" />
                                                                    <Binding Path="Value"
                                                                         Source="{StaticResource IsInEditMode}"
                                                                         Mode="OneWay" />
                                                                </MultiBinding>
                                                            </Setter.Value>
                                                        </Setter>
                                                        <Setter Property="Format"
                                                                Value="{Binding Path=Text, Source={StaticResource Voucher_Ma_nt0}, Mode=OneWay, Converter={StaticResource MaskNumeric}, ConverterParameter=M_IP_TIEN}" />
                                                    </Style>
                                                </igDP:FieldSettings.EditorStyle>
                                            </igDP:FieldSettings>
                                        </igDP:Field.Settings>
                                    </igDP:Field>

                                    <!--Field an-->
                                    <igDP:Field Name="stt_rec_tt"
                                                    Visibility="Hidden"/>

                                </igDP:FieldLayout>
                            </smc:DataGridView.FieldLayouts>

                        </smc:DataGridView>
                    </smc:GridLayout>
                </igWindows:TabItemEx>

                <igWindows:TabItemEx Header="_2. Hđ thuế"
                                     x:Name="tabItem3"
                                     KeyboardNavigation.TabNavigation="Local"
                                     TabIndex="130">
                    <igWindows:TabItemEx.BorderBrush>
                        <SolidColorBrush Color="#FFD0D0BF"
                                         igThemes:ResourceWasher.WashGroup="BaseColor" />
                    </igWindows:TabItemEx.BorderBrush>
                    <smc:GridLayout Margin="0,0,0,0" Name="GrdLayoutThue">

                        <!--EditModeEnded="GrdCtgt_EditModeEnded"-->
                        <smc:DataGridView x:Name="GrdCtgt"
                                          TabIndex="130"
                                          PreviewEditModeEnded="GrdCtgt_EditModeEnded"
                                          IsVoucher="True"
                                          Tag="{Binding Path=Value, Source={StaticResource IsInEditModeThue},Mode=OneWay}"
                                          KeyDown="GrdCtgt_KeyDown"
                                          KeyUp="GrdCtgt_KeyUp" Grid.ColumnSpan="2">
                            <smc:DataGridView.Resources>
                                <DataTemplate x:Key="ControlSearchKhachHang">
                                    <smc:AutoCompleteTextBox LookupMode="True"
                                                             AllowEmty="True"
                                                             AllowWrong="False"
                                                             IsBorderTextBox="False"
                                                             Style="{StaticResource AutoCompleteTextBoxEditModeEnable}"
                                                             ParentControl="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type Window}}}"
                                                             SysObj="{Binding Path=BindingSysObj, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type Window}}}"
                                                             Text="{smc:BindingEx Path=Value, RelativeSource={RelativeSource AncestorType={x:Type igDP:CellValuePresenter}, Mode=FindAncestor}}"
                                                             ListID="dmkh">
                                        <smc:AutoCompleteTextBox.IsReadOnly>
                                            <Binding  Source="{StaticResource IsInEditModeThue}"
                                                      Converter="{StaticResource BoolInverter}"
                                                      Path="Value"
                                                      Mode="OneWay" />
                                        </smc:AutoCompleteTextBox.IsReadOnly>
                                    </smc:AutoCompleteTextBox>
                                </DataTemplate>
                                <DataTemplate x:Key="ControlSearchMaSo">
                                    <smc:AutoCompleteTextBox LookupMode="True"
                                                             AllowEmty="False"
                                                             AllowWrong="False"
                                                             Style="{StaticResource AutoCompleteTextBoxEditModeEnable}"
                                                             IsBorderTextBox="False"
                                                             ParentControl="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type Window}}}"
                                                             SysObj="{Binding Path=BindingSysObj, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type Window}}}"
                                                             Text="{smc:BindingEx Path=Value, RelativeSource={RelativeSource AncestorType={x:Type igDP:CellValuePresenter}, Mode=FindAncestor}}"
                                                             ListID="dmms">
                                        <smc:AutoCompleteTextBox.IsReadOnly>
                                            <Binding  Source="{StaticResource IsInEditModeThue}"
                                                      Converter="{StaticResource BoolInverter}"
                                                      Path="Value"
                                                      Mode="OneWay" />
                                        </smc:AutoCompleteTextBox.IsReadOnly>
                                    </smc:AutoCompleteTextBox>
                                </DataTemplate>
                                
                                <DataTemplate x:Key="ControlSearchMaThue">
                                    <smc:AutoCompleteTextBox LookupMode="True"
                                                             AllowEmty="False"
                                                             AllowWrong="False"
                                                             Style="{StaticResource AutoCompleteTextBoxEditModeEnable}"
                                                             IsBorderTextBox="False"
                                                             ParentControl="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type Window}}}"
                                                             SysObj="{Binding Path=BindingSysObj, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type Window}}}"
                                                             Text="{smc:BindingEx Path=Value, RelativeSource={RelativeSource AncestorType={x:Type igDP:CellValuePresenter}, Mode=FindAncestor}}"
                                                             ListID="dmthue30" />
                                </DataTemplate>
                                <DataTemplate x:Key="ControlSearchTKThue">
                                    <smc:AutoCompleteTextBox LookupMode="True"
                                                             AllowEmty="True"
                                                             AllowWrong="False"
                                                             Style="{StaticResource AutoCompleteTextBoxEditModeEnable}"
                                                             IsBorderTextBox="False"
                                                             ParentControl="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type Window}}}"
                                                             SysObj="{Binding Path=BindingSysObj, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type Window}}}"
                                                             Text="{smc:BindingEx Path=Value, RelativeSource={RelativeSource AncestorType={x:Type igDP:CellValuePresenter}, Mode=FindAncestor}}"
                                                             ListID="dmtk1" />
                                </DataTemplate>
                                <DataTemplate x:Key="ControlSearchTKKH2">
                                    <smc:AutoCompleteTextBox LookupMode="True"
                                                             AllowEmty="False"
                                                             AllowWrong="False"
                                                             Style="{StaticResource AutoCompleteTextBoxEditModeEnable}"
                                                             IsBorderTextBox="False"
                                                             ParentControl="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type Window}}}"
                                                             SysObj="{Binding Path=BindingSysObj, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type Window}}}"
                                                             Text="{smc:BindingEx Path=Value, RelativeSource={RelativeSource AncestorType={x:Type igDP:CellValuePresenter}, Mode=FindAncestor}}"
                                                             ListID="dmkh">
                                        <smc:AutoCompleteTextBox.IsReadOnly>
                                            <MultiBinding Converter="{StaticResource BindingReadonly}"
                                                          ConverterParameter="CTGT;ma_kh2_t">
                                                <Binding  RelativeSource="{RelativeSource AncestorType={x:Type igDP:CellValuePresenter} , Mode=FindAncestor}"
                                                          Path="Record.Cells[tk_thue_cn].Value"
                                                          Mode="OneWay" />
                                            </MultiBinding>
                                        </smc:AutoCompleteTextBox.IsReadOnly>
                                    </smc:AutoCompleteTextBox>
                                </DataTemplate>
                                <DataTemplate x:Key="ControlFirst">
                                    <igEditors:XamTextEditor Text="{smc:BindingEx Path=Value, RelativeSource={RelativeSource AncestorType={x:Type igDP:CellValuePresenter}, Mode=FindAncestor}}">

                                    </igEditors:XamTextEditor>
                                </DataTemplate>
                            </smc:DataGridView.Resources>
                            <smc:DataGridView.FieldSettings>
                                <igDP:FieldSettings AllowEdit="True"
                                                    SummaryDisplayArea="BottomFixed"
                                                    SummaryUIType="MultiSelect" />
                            </smc:DataGridView.FieldSettings>
                            <smc:DataGridView.FieldLayoutSettings>
                                <igDP:FieldLayoutSettings AllowDelete="False"
                                                          AutoGenerateFields="False"
                                                          HeaderPrefixAreaStyle="{StaticResource StyleHeaderPrefixArea}"
                                                          RecordSelectorStyle="{StaticResource StyleRecordSelector}" />
                            </smc:DataGridView.FieldLayoutSettings>
                            <smc:DataGridView.FieldLayouts>
                                <igDP:FieldLayout>
                                    <igDP:FieldLayout.SummaryDefinitions>
                                        <smc:ExSummaryDefinition SourceFieldName="t_tien_nt"
                                                                 Calculator="Sum"
                                                                 Format="{Binding Path=Text, Source={StaticResource Voucher_Ma_nt0}, Mode=OneWay, Converter={StaticResource MaskNumeric}, ConverterParameter=M_IP_TIEN_NT}">
                                        </smc:ExSummaryDefinition>
                                        <smc:ExSummaryDefinition SourceFieldName="t_tien"
                                                                 Format="{Binding Path=Text, Source={StaticResource Voucher_Ma_nt0}, Mode=OneWay, Converter={StaticResource MaskNumeric}, ConverterParameter=M_IP_TIEN}"
                                                                 Calculator="Sum" />
                                        <smc:ExSummaryDefinition SourceFieldName="t_thue_nt"
                                                                 Calculator="Sum"
                                                                 Format="{Binding Path=Text, Source={StaticResource Voucher_Ma_nt0}, Mode=OneWay, Converter={StaticResource MaskNumeric}, ConverterParameter=M_IP_TIEN_NT}">
                                        </smc:ExSummaryDefinition>
                                        <smc:ExSummaryDefinition SourceFieldName="t_thue"
                                                                 Format="{Binding Path=Text, Source={StaticResource Voucher_Ma_nt0}, Mode=OneWay, Converter={StaticResource MaskNumeric}, ConverterParameter=M_IP_TIEN}"
                                                                 Calculator="Sum" />
                                        <smc:ExSummaryDefinition SourceFieldName="t_tt_nt"
                                                                 Calculator="Sum"
                                                                 Format="{Binding Path=Text, Source={StaticResource Voucher_Ma_nt0}, Mode=OneWay, Converter={StaticResource MaskNumeric}, ConverterParameter=M_IP_TIEN_NT}">
                                        </smc:ExSummaryDefinition>
                                        <smc:ExSummaryDefinition SourceFieldName="t_tt"
                                                                 Format="{Binding Path=Text, Source={StaticResource Voucher_Ma_nt0}, Mode=OneWay, Converter={StaticResource MaskNumeric}, ConverterParameter=M_IP_TIEN}"
                                                                 Calculator="Sum" />
                                    </igDP:FieldLayout.SummaryDefinitions>
                                    <igDP:Field Label="Nhóm"
                                                Name="ma_ms"
                                                FixedLocation="FixedToNearEdge"
                                                Width="60">
                                        <igDP:Field.Settings>
                                            <igDP:FieldSettings LabelTextAlignment="Center">
                                                <igDP:FieldSettings.EditorStyle>
                                                    <Style TargetType="{x:Type smc:ControlHostEditor}"
                                                           BasedOn="{StaticResource AutoCompleteTextBoxEditor}">
                                                        <Setter Property="EditDataTemplate"
                                                                Value="{StaticResource ControlSearchMaSo}" />
                                                    </Style>
                                                </igDP:FieldSettings.EditorStyle>
                                            </igDP:FieldSettings>
                                        </igDP:Field.Settings>
                                    </igDP:Field>
                                    <igDP:Field Label="Số hóa đơn"
                                                Name="so_ct0"
                                                FixedLocation="FixedToNearEdge"
                                                Width="100">
                                        <igDP:Field.Settings>
                                            <igDP:FieldSettings EditAsType="{x:Type System:String}"
                                                                AllowEdit="{smc:BindingEx Path=Value, Source={StaticResource IsInEditModeThue}}"
                                                                LabelTextAlignment="Center" />
                                        </igDP:Field.Settings>
                                    </igDP:Field>
                                    <igDP:Field Label="Số seri"
                                                Name="so_seri0"
                                                Width="100">
                                        <igDP:Field.Settings>
                                            <igDP:FieldSettings EditAsType="{x:Type System:String}"
                                                                LabelTextAlignment="Center">
                                                <igDP:FieldSettings.EditorStyle>
                                                    <Style TargetType="{x:Type smc:ExTextEditor}">
                                                        <Setter Property="CharacterCasing"
                                                                Value="Upper" />
                                                        <Setter Property="IsReadOnly"
                                                            Value="{smc:BindingEx Path=Value, Source={StaticResource IsInEditModeThue}, Converter={StaticResource BoolInverter}}" />
                                                    </Style>
                                                </igDP:FieldSettings.EditorStyle>
                                            </igDP:FieldSettings>
                                        </igDP:Field.Settings>
                                    </igDP:Field>
                                    <igDP:Field Label="Ngày hóa đơn"
                                                Name="ngay_ct0"
                                                Width="100">
                                        <igDP:Field.Settings>
                                            <igDP:FieldSettings EditAsType="{x:Type System:DateTime}"
                                                                AllowEdit="{Binding Path=Value, Source={StaticResource IsInEditModeThue}}"
                                                                EditorType="{x:Type smc:DateTextBox}" />
                                        </igDP:Field.Settings>
                                    </igDP:Field>
                                    <igDP:Field Label="Mã khách"
                                                Name="ma_kh"
                                                Width="100">
                                        <igDP:Field.Settings>
                                            <igDP:FieldSettings LabelTextAlignment="Center">
                                                <igDP:FieldSettings.EditorStyle>
                                                    <Style TargetType="{x:Type smc:ControlHostEditor}"
                                                           BasedOn="{StaticResource AutoCompleteTextBoxEditor}">
                                                        <Setter Property="EditDataTemplate"
                                                                Value="{StaticResource ControlSearchKhachHang}" />
                                                    </Style>
                                                </igDP:FieldSettings.EditorStyle>
                                            </igDP:FieldSettings>
                                        </igDP:Field.Settings>

                                    </igDP:Field>
                                    <igDP:Field Label="Tên khách"
                                                Name="ten_kh"
                                                Width="225">
                                        <igDP:Field.Settings>
                                            <igDP:FieldSettings LabelTextAlignment="Center"
                                                                AllowEdit="{smc:BindingEx Path=Value, Source={StaticResource IsInEditModeThue}}"
                                                                EditAsType="{x:Type System:String}" />
                                        </igDP:Field.Settings>
                                    </igDP:Field>
                                    <igDP:Field Label="Địa chỉ"
                                                Name="dia_chi"
                                                Width="180">
                                        <igDP:Field.Settings>
                                            <igDP:FieldSettings LabelTextAlignment="Center">
                                                <igDP:FieldSettings.EditorStyle>
                                                    <Style TargetType="{x:Type igEditors:XamTextEditor}">
                                                        <Setter Property="IsReadOnly"
                                                            Value="{smc:BindingEx Path=Value, Source={StaticResource IsInEditModeThue}, Converter={StaticResource BoolInverter}}" />
                                                        <!--<Setter Property="IsReadOnly">
                                                            <Setter.Value>
                                                                <MultiBinding Converter="{StaticResource ReadOnlyThue}"
                                                                              ConverterParameter="dia_chi">
                                                                    <Binding  RelativeSource="{RelativeSource AncestorType={x:Type igDP:CellValuePresenter} , Mode=FindAncestor}"
                                                                              Path="Record.Cells[dia_chi].Value"
                                                                              Mode="OneWay" />
                                                                    <Binding  Path="Value"
                                                                              Source="{StaticResource IsInEditMode}"
                                                                              Mode="OneWay" />
                                                                </MultiBinding>
                                                            </Setter.Value>
                                                        </Setter>-->
                                                    </Style>
                                                </igDP:FieldSettings.EditorStyle>
                                            </igDP:FieldSettings>
                                        </igDP:Field.Settings>
                                    </igDP:Field>
                                    <igDP:Field Label="Mã số thuế"
                                                Name="ma_so_thue"
                                                Width="100">
                                        <igDP:Field.Settings>
                                            <igDP:FieldSettings LabelTextAlignment="Center">
                                                <igDP:FieldSettings.EditorStyle>
                                                    <Style TargetType="{x:Type igEditors:XamTextEditor}">
                                                        <Setter Property="IsReadOnly"
                                                            Value="{smc:BindingEx Path=Value, Source={StaticResource IsInEditModeThue}, Converter={StaticResource BoolInverter}}" />

                                                        <!--<Setter Property="IsReadOnly">
                                                            <Setter.Value>
                                                                <MultiBinding Converter="{StaticResource ReadOnlyThue}"
                                                                              ConverterParameter="ma_so_thue">
                                                                    <Binding  RelativeSource="{RelativeSource AncestorType={x:Type igDP:CellValuePresenter} , Mode=FindAncestor}"
                                                                              Path="Record.Cells[ma_so_thue].Value"
                                                                              Mode="OneWay" />
                                                                    <Binding  Path="Value"
                                                                              Source="{StaticResource IsInEditMode}"
                                                                              Mode="OneWay" />
                                                                </MultiBinding>
                                                            </Setter.Value>
                                                        </Setter>-->
                                                    </Style>
                                                </igDP:FieldSettings.EditorStyle>
                                            </igDP:FieldSettings>
                                        </igDP:Field.Settings>
                                    </igDP:Field>
                                    <igDP:Field Label="Hàng hóa, vật tư"
                                                Name="ten_vt"
                                                Width="180">
                                        <igDP:Field.Settings>
                                            <igDP:FieldSettings LabelTextAlignment="Center"
                                                                EditAsType="{x:Type System:String}" 
                                                                 AllowEdit="{Binding Path=Value, Source={StaticResource IsInEditModeThue},Mode=OneWay}"/>
                                        </igDP:Field.Settings>
                                    </igDP:Field>
                                    <igDP:Field Name="t_tien_nt"
                                                Width="140">
                                        <igDP:Field.Settings>
                                            <igDP:FieldSettings EditAsType="{x:Type System:Double}"
                                                                AllowSummaries="True"
                                                                LabelTextAlignment="Center">
                                                <igDP:FieldSettings.EditorStyle>
                                                    <Style TargetType="{x:Type smc:NumericTextBox}">
                                                        <Setter Property="Format"
                                                                Value="{Binding Path=Text, Source={StaticResource Voucher_Ma_nt0}, Mode=OneWay, Converter={StaticResource MaskNumeric}, ConverterParameter=M_IP_TIEN_NT}" />
                                                        <Setter Property="IsReadOnly"
                                                            Value="{smc:BindingEx Path=Value, Source={StaticResource IsInEditModeThue}, Converter={StaticResource BoolInverter}}" />
                                                    </Style>
                                                </igDP:FieldSettings.EditorStyle>
                                            </igDP:FieldSettings>
                                        </igDP:Field.Settings>
                                    </igDP:Field>
                                    <igDP:Field Name="t_tien"
                                                Width="140">
                                        <igDP:Field.Settings>
                                            <igDP:FieldSettings LabelTextAlignment="Center"
                                                                AllowSummaries="True">
                                                <igDP:FieldSettings.EditorStyle>
                                                    <Style TargetType="{x:Type smc:NumericTextBox}">
                                                        <Setter Property="IsReadOnly">
                                                            <Setter.Value>
                                                                <MultiBinding Converter="{StaticResource BindingReadonly}"
                                                                              ConverterParameter="CTGT;t_tien">
                                                                    <Binding  RelativeSource="{RelativeSource AncestorType={x:Type igDP:CellValuePresenter} , Mode=FindAncestor}"
                                                                              Path="Record.Cells[t_tien_nt].Value"
                                                                              Mode="OneWay" />
                                                                    <Binding Path="Value"
                                                                             Source="{StaticResource Ty_Gia_ValueChange}"
                                                                             Mode="OneWay" />
                                                                    <Binding Path="Value"
                                                                             Source="{StaticResource IsCheckedSua_tien}"
                                                                             Mode="OneWay" />
                                                                    <Binding Path="Value"
                                                                         Source="{StaticResource IsInEditModeThue}"
                                                                         Mode="OneWay" />
                                                                </MultiBinding>
                                                            </Setter.Value>
                                                        </Setter>
                                                        <Setter Property="Format"
                                                                Value="{Binding Path=Text, Source={StaticResource Voucher_Ma_nt0}, Mode=OneWay, Converter={StaticResource MaskNumeric}, ConverterParameter=M_IP_TIEN}" />
                                                    </Style>
                                                </igDP:FieldSettings.EditorStyle>
                                            </igDP:FieldSettings>
                                        </igDP:Field.Settings>
                                    </igDP:Field>
                                    <igDP:Field Label="Mã thuế"
                                                Name="ma_thue"
                                                Width="100">
                                        <igDP:Field.Settings>
                                            <igDP:FieldSettings LabelTextAlignment="Center"
                                                                AllowEdit="{Binding Path=Value, Source={StaticResource IsInEditMode},Mode=OneWay}">
                                                <igDP:FieldSettings.EditorStyle>
                                                    <Style TargetType="{x:Type smc:ControlHostEditor}"
                                                           BasedOn="{StaticResource AutoCompleteTextBoxEditor}">
                                                        <Setter Property="EditDataTemplate"
                                                                Value="{StaticResource ControlSearchMaThue}" />
                                                    </Style>
                                                </igDP:FieldSettings.EditorStyle>
                                            </igDP:FieldSettings>
                                        </igDP:Field.Settings>
                                    </igDP:Field>
                                    <igDP:Field Label="%"
                                                Name="thue_suat"
                                                Width="60">
                                        <igDP:Field.Settings>
                                            <igDP:FieldSettings AllowEdit="False"
                                                                LabelTextAlignment="Center"
                                                                EditAsType="{x:Type System:Double}">
                                                <igDP:FieldSettings.EditorStyle>
                                                    <Style TargetType="{x:Type smc:NumericTextBox}">
                                                    </Style>
                                                </igDP:FieldSettings.EditorStyle>
                                            </igDP:FieldSettings>
                                        </igDP:Field.Settings>
                                    </igDP:Field>
                                    <igDP:Field  Name="t_thue_nt"
                                                 Width="140">
                                        <igDP:Field.Settings>
                                            <igDP:FieldSettings EditAsType="{x:Type System:Double}"
                                                                AllowSummaries="True"
                                                                LabelTextAlignment="Center">
                                                <igDP:FieldSettings.EditorStyle>
                                                    <Style TargetType="{x:Type smc:NumericTextBox}">
                                                        <Setter Property="Format"
                                                                Value="{Binding Path=Text, Source={StaticResource Voucher_Ma_nt0}, Mode=OneWay, Converter={StaticResource MaskNumeric}, ConverterParameter=M_IP_TIEN_NT}" />
                                                        <Setter Property="IsReadOnly"
                                                            Value="{smc:BindingEx Path=Value, Source={StaticResource IsInEditModeThue}, Converter={StaticResource BoolInverter}}" />
                                                    </Style>
                                                </igDP:FieldSettings.EditorStyle>
                                            </igDP:FieldSettings>
                                        </igDP:Field.Settings>
                                    </igDP:Field>
                                    <igDP:Field Name="t_thue"
                                                Width="140">
                                        <igDP:Field.Settings>
                                            <igDP:FieldSettings LabelTextAlignment="Center"
                                                                AllowSummaries="True">
                                                <igDP:FieldSettings.EditorStyle>
                                                    <Style TargetType="{x:Type smc:NumericTextBox}">
                                                        <Setter Property="IsReadOnly">
                                                            <Setter.Value>
                                                                <MultiBinding Converter="{StaticResource BindingReadonly}"
                                                                              ConverterParameter="CTGT;t_thue">
                                                                    <Binding  RelativeSource="{RelativeSource AncestorType={x:Type igDP:CellValuePresenter} , Mode=FindAncestor}"
                                                                              Path="Record.Cells[t_tien].Value"
                                                                              Mode="OneWay" />
                                                                    <Binding  RelativeSource="{RelativeSource AncestorType={x:Type igDP:CellValuePresenter} , Mode=FindAncestor}"
                                                                              Path="Record.Cells[thue_suat].Value"
                                                                              Mode="OneWay" />
                                                                    <Binding Path="Value"
                                                                             Source="{StaticResource IsCheckedSua_tien}"
                                                                             Mode="OneWay" />
                                                                    <Binding Path="Value"
                                                                         Source="{StaticResource IsInEditModeThue}"
                                                                         Mode="OneWay" />
                                                                </MultiBinding>
                                                            </Setter.Value>
                                                        </Setter>
                                                        <Setter Property="Format"
                                                                Value="{Binding Path=Text, Source={StaticResource Voucher_Ma_nt0}, Mode=OneWay, Converter={StaticResource MaskNumeric}, ConverterParameter=M_IP_TIEN}" />
                                                    </Style>
                                                </igDP:FieldSettings.EditorStyle>
                                            </igDP:FieldSettings>
                                        </igDP:Field.Settings>
                                    </igDP:Field>
                                    <igDP:Field  Name="t_tt_nt"
                                                 Width="140">
                                        <igDP:Field.Settings>
                                            <igDP:FieldSettings AllowEdit="False"
                                                                AllowSummaries="True"
                                                                LabelTextAlignment="Center"
                                                                EditAsType="{x:Type System:Double}">
                                                <igDP:FieldSettings.EditorStyle>
                                                    <Style TargetType="{x:Type smc:NumericTextBox}">
                                                        <Setter Property="Format"
                                                                Value="{Binding Path=Text, Source={StaticResource Voucher_Ma_nt0}, Mode=OneWay, Converter={StaticResource MaskNumeric}, ConverterParameter=M_IP_TIEN_NT}" />
                                                    </Style>
                                                </igDP:FieldSettings.EditorStyle>
                                            </igDP:FieldSettings>
                                        </igDP:Field.Settings>
                                    </igDP:Field>
                                    <igDP:Field Name="t_tt"
                                                Width="140">
                                        <igDP:Field.Settings>
                                            <igDP:FieldSettings AllowEdit="False"
                                                                AllowSummaries="True"
                                                                LabelTextAlignment="Center"
                                                                EditAsType="{x:Type System:Double}">
                                                <igDP:FieldSettings.EditorStyle>
                                                    <Style TargetType="{x:Type smc:NumericTextBox}">
                                                        <Setter Property="Format"
                                                                Value="{Binding Path=Text, Source={StaticResource Voucher_Ma_nt0}, Mode=OneWay, Converter={StaticResource MaskNumeric}, ConverterParameter=M_IP_TIEN}" />
                                                    </Style>
                                                </igDP:FieldSettings.EditorStyle>
                                            </igDP:FieldSettings>
                                        </igDP:Field.Settings>
                                    </igDP:Field>
                                    <igDP:Field Label="Tk thuế"
                                                Name="tk_thue_no"
                                                Width="100">
                                        <igDP:Field.Settings>
                                            <igDP:FieldSettings LabelTextAlignment="Center"
                                                                AllowEdit="{Binding Path=Value, Source={StaticResource IsInEditMode},Mode=OneWay}">
                                                <igDP:FieldSettings.EditorStyle>
                                                    <Style TargetType="{x:Type smc:ControlHostEditor}"
                                                           BasedOn="{StaticResource AutoCompleteTextBoxEditor}">
                                                        <Setter Property="EditDataTemplate"
                                                                Value="{StaticResource ControlSearchTKThue}" />
                                                    </Style>
                                                </igDP:FieldSettings.EditorStyle>
                                            </igDP:FieldSettings>
                                        </igDP:Field.Settings>
                                    </igDP:Field>
                                    <igDP:Field Label="Cục thuế"
                                                Name="ma_kh2"
                                                Width="100">
                                        <igDP:Field.Settings>
                                            <igDP:FieldSettings LabelTextAlignment="Center">
                                                <igDP:FieldSettings.EditorStyle>
                                                    <Style TargetType="{x:Type smc:ControlHostEditor}"
                                                           BasedOn="{StaticResource AutoCompleteTextBoxEditor}">
                                                        <Setter Property="EditDataTemplate"
                                                                Value="{StaticResource ControlSearchTKKH2}" />
                                                    </Style>
                                                </igDP:FieldSettings.EditorStyle>
                                            </igDP:FieldSettings>
                                        </igDP:Field.Settings>
                                    </igDP:Field>
                                    <igDP:Field Label="Ghi chú"
                                                Name="ghi_chu"
                                                Width="180">
                                        <igDP:Field.Settings>
                                            <igDP:FieldSettings EditAsType="{x:Type System:String}"
                                                                LabelTextAlignment="Center" 
                                                                 AllowEdit="{Binding Path=Value, Source={StaticResource IsInEditModeThue},Mode=OneWay}"/>
                                        </igDP:Field.Settings>
                                    </igDP:Field>

                                    <igDP:Field Label="tk_thue_cn"
                                                Name="tk_thue_cn"
                                                Visibility="Hidden"/>
                                </igDP:FieldLayout>
                            </smc:DataGridView.FieldLayouts>
                        </smc:DataGridView>

                    </smc:GridLayout>
                </igWindows:TabItemEx>
            </igWindows:XamTabControl>
            <StackPanel HorizontalAlignment="Right"
                        VerticalAlignment="Top"
                        Name="GrdIsChecked"
                        Orientation="Horizontal">
                <CheckBox Name="ChkSua_tggs"
                          Content="Sửa tggs"
                          Click="ChkSua_tggs_Click"
                          IsTabStop="False"
                          Margin="0,0,25,0"
                          IsChecked="{smc:BindingEx sua_tggs, Converter={StaticResource IsCheckedConverter}}"
                          Style="{StaticResource CheckBoxEditModeEnable}" />

                <CheckBox Name="ChkSuaTien"
                          Content="Sửa trường tiền"
                          IsTabStop="False"
                          Click="ChkSuaTien_Click"
                          Margin="0,0,25,0"
                          IsChecked="{smc:BindingEx sua_tien, Converter={StaticResource IsCheckedConverter}}"
                          Style="{StaticResource CheckBoxEditModeEnable}" />
                <CheckBox Name="ChkSuaThue"
                          IsTabStop="False"
                          IsChecked="{smc:BindingEx sua_thue, Converter={StaticResource IsCheckedConverter}}"
                          Click="ChkSuaThue_Click"
                          Margin="0,0,25,0"
                          Style="{StaticResource CheckBoxEditModeSuaThueEnable}"
                          Content="Sửa thông tin thuế"  />
                <TextBlock Height="19"
                           Text="Ctrl+Tab - Ra khỏi chi tiết"
                           Name="textBlock2"
                           Style="{StaticResource ContentTextStyle}"
                           Margin="0,4,0,0" />
            </StackPanel>
        </smc:GridLayout>
        <GroupBox Header="Tổng cộng"
                  Name="GroupTotal"
                  Margin="12,0,12,12"
                  Grid.Column="0"
                  Grid.Row="3">
            <smc:GridLayout Name="GrdLayout30">
                <smc:GridLayout x:Name="GrdLayout20"
                                Grid.Row="0"
                                RowCount="3"
                                ColumnCount="6"
                                ColumnWidths="120*,240,100,140,12,140"
                                HeightPerRow="25"
                                Grid.RowSpan="1">
                    <smc:GridLayout.Visibility>
                        <MultiBinding Converter="{StaticResource VisibilityConverter}"
                                                              ConverterParameter="MaNt0">
                            <Binding Path="Value" Source="{StaticResource Voucher_Ma_nt0}"/>
                        </MultiBinding>
                    </smc:GridLayout.Visibility>
                    <TextBlock Text="Tiền hh, dv"
                               x:Name="lblT_Tien"
                               Grid.Column="2"
                               Grid.Row="0"
                               Margin="12,0" />
                    <smc:NumericTextBox x:Name="txtT_Tien"
                                        IsEnabled="False"
                                        Value="{smc:BindingEx Path=t_tien_nt}"
                                        Grid.Row="0"
                                        Format="{Binding Path=Text, Source={StaticResource Voucher_Ma_nt0}, Mode=OneWay, Converter={StaticResource MaskNumeric}, ConverterParameter=M_IP_TIEN}"
                                        Grid.Column="3" />
                    <TextBlock Text="Tiền thuế"
                               Grid.Column="2"
                               x:Name="lblT_Thue"
                               Grid.Row="1"
                               Margin="12,0" />
                    <smc:NumericTextBox x:Name="txtT_thue"
                                        IsEnabled="False"
                                        Grid.Row="1"
                                        Value="{smc:BindingEx Path=t_thue_nt}"
                                        Format="{Binding Path=Text, Source={StaticResource Voucher_Ma_nt0}, Mode=OneWay, Converter={StaticResource MaskNumeric}, ConverterParameter=M_IP_TIEN}"
                                        Grid.Column="3" />
                    <TextBlock Text="Tổng tt"
                               x:Name="lblT_TT"
                               Grid.Column="2"
                               Grid.Row="2"
                               Margin="12,0" />
                    <smc:NumericTextBox x:Name="txtT_tt"
                                        IsEnabled="False"
                                        Value="{smc:BindingEx Path=t_tt_nt}"
                                        Format="{Binding Path=Text, Source={StaticResource Voucher_Ma_nt0}, Mode=OneWay, Converter={StaticResource MaskNumeric}, ConverterParameter=M_IP_TIEN}"
                                        Grid.Row="2"
                                        Grid.Column="3" />
                </smc:GridLayout>
                <smc:GridLayout x:Name="GrdLayout21"
                                Grid.Row="0"
                                RowCount="3"
                                ColumnCount="6"
                                ColumnWidths="120*,240,100,140,12,140"
                                HeightPerRow="25"
                                Grid.RowSpan="1">
                    <smc:GridLayout.Visibility>
                        <MultiBinding Converter="{StaticResource VisibilityConverter}"
                                                              ConverterParameter="NotMaNt0">
                            <Binding Path="Value" Source="{StaticResource Voucher_Ma_nt0}"/>
                        </MultiBinding>
                    </smc:GridLayout.Visibility>
                    <TextBlock Text="Tiền hh, dv"
                               Grid.Column="2"
                               x:Name="lblT_Tien_NT"
                               Grid.Row="0"
                               Margin="12,0" />
                    <smc:NumericTextBox x:Name="txtT_Tien_nt"
                                        IsEnabled="False"
                                        Value="{smc:BindingEx Path=t_tien_nt}"
                                        Grid.Column="3"
                                        Format="{Binding Path=Text, Source={StaticResource Voucher_Ma_nt0}, Mode=OneWay, Converter={StaticResource MaskNumeric}, ConverterParameter=M_IP_TIEN_NT}"
                                        Grid.Row="0" />

                    <TextBlock Text="Tiền thuế"
                               Grid.Column="2"
                               x:Name="lblT_Thue_NT"
                               Grid.Row="1"
                               Margin="12,0" />
                    <smc:NumericTextBox x:Name="txtT_thue_nt"
                                        IsEnabled="False"
                                        Grid.Row="1"
                                        Format="{Binding Path=Text, Source={StaticResource Voucher_Ma_nt0}, Mode=OneWay, Converter={StaticResource MaskNumeric}, ConverterParameter=M_IP_TIEN_NT}"
                                        Value="{smc:BindingEx Path=t_thue_nt}"
                                        Grid.Column="3" />
                    <TextBlock Text="Tổng tt"
                               Grid.Column="2"
                               x:Name="lblT_Tt_NT"
                               Grid.Row="2"
                               Margin="12,0" />
                    <smc:NumericTextBox x:Name="txtT_tt_nt"
                                        IsEnabled="False"
                                        Format="{Binding Path=Text, Source={StaticResource Voucher_Ma_nt0}, Mode=OneWay, Converter={StaticResource MaskNumeric}, ConverterParameter=M_IP_TIEN_NT}"
                                        Value="{smc:BindingEx Path=t_tt_nt}"
                                        Grid.Row="2"
                                        Grid.Column="3" />
                    <smc:NumericTextBox x:Name="txtT_Tien_Nt0"
                                        IsEnabled="False"
                                        Format="{Binding Path=Text, Source={StaticResource Voucher_Ma_nt0}, Mode=OneWay, Converter={StaticResource MaskNumeric}, ConverterParameter=M_IP_TIEN}"
                                        Value="{smc:BindingEx Path=t_tien}"
                                        Grid.Row="0"
                                        Grid.Column="5" />
                    <smc:NumericTextBox x:Name="txtT_thue_Nt0"
                                        IsEnabled="False"
                                        Format="{Binding Path=Text, Source={StaticResource Voucher_Ma_nt0}, Mode=OneWay, Converter={StaticResource MaskNumeric}, ConverterParameter=M_IP_TIEN}"
                                        Grid.Row="1"
                                        Value="{smc:BindingEx Path=t_thue}"
                                        Grid.Column="6" />
                    <smc:NumericTextBox x:Name="txtT_tt_Nt0"
                                        IsEnabled="False"
                                        Format="{Binding Path=Text, Source={StaticResource Voucher_Ma_nt0}, Mode=OneWay, Converter={StaticResource MaskNumeric}, ConverterParameter=M_IP_TIEN}"
                                        Value="{smc:BindingEx Path=t_tt}"
                                        Grid.Row="2"
                                        Grid.Column="6" />

                </smc:GridLayout>
                
                <smc:GridLayout x:Name="GrdLayout60"
                                Grid.Row="0"
                                RowCount="3"
                                ColumnCount="6"
                                ColumnWidths="120*,240,100,140,12,140"
                                HeightPerRow="25"
                                Grid.RowSpan="1">
                    <smc:GridLayout.Visibility>
                        <MultiBinding Converter="{StaticResource VisibilityConverter}"
                                                              ConverterParameter="MaNt0">
                            <Binding Path="Value" Source="{StaticResource Voucher_Ma_nt0}"/>
                        </MultiBinding>
                    </smc:GridLayout.Visibility>
                    <smc:NumericTextBox x:Name="txtT_t_Tien"
                                        IsEnabled="False"
                                        Grid.Row="0"
                                        Format="{Binding Path=Text, Source={StaticResource Voucher_Ma_nt0}, Mode=OneWay, Converter={StaticResource MaskNumeric}, ConverterParameter=M_IP_TIEN}"
                                        Grid.Column="3" />
                    <smc:NumericTextBox x:Name="txtT_t_thue"
                                        IsEnabled="False"
                                        Grid.Row="1"
                                        Format="{Binding Path=Text, Source={StaticResource Voucher_Ma_nt0}, Mode=OneWay, Converter={StaticResource MaskNumeric}, ConverterParameter=M_IP_TIEN}"
                                        Grid.Column="3" />
                    <smc:NumericTextBox x:Name="txtT_t_tt"
                                        IsEnabled="False"
                                        Format="{Binding Path=Text, Source={StaticResource Voucher_Ma_nt0}, Mode=OneWay, Converter={StaticResource MaskNumeric}, ConverterParameter=M_IP_TIEN}"
                                        Grid.Row="2"
                                        Grid.Column="3" />
                </smc:GridLayout>
                <smc:GridLayout x:Name="GrdLayout61"
                                Grid.Row="0"
                                RowCount="3"
                                ColumnCount="6"
                                ColumnWidths="120*,240,100,140,12,140"
                                HeightPerRow="25"
                                Grid.RowSpan="1">
                    <smc:GridLayout.Visibility>
                        <MultiBinding Converter="{StaticResource VisibilityConverter}"
                                                              ConverterParameter="NotMaNt0">
                            <Binding Path="Value" Source="{StaticResource Voucher_Ma_nt0}"/>
                        </MultiBinding>
                    </smc:GridLayout.Visibility>
                    <smc:NumericTextBox x:Name="txtT_t_Tien_nt"
                                        IsEnabled="False"
                                        Grid.Column="3"
                                        Format="{Binding Path=Text, Source={StaticResource Voucher_Ma_nt0}, Mode=OneWay, Converter={StaticResource MaskNumeric}, ConverterParameter=M_IP_TIEN_NT}"
                                        Grid.Row="0" />

                    <smc:NumericTextBox x:Name="txtT_t_thue_nt"
                                        IsEnabled="False"
                                        Grid.Row="1"
                                        Format="{Binding Path=Text, Source={StaticResource Voucher_Ma_nt0}, Mode=OneWay, Converter={StaticResource MaskNumeric}, ConverterParameter=M_IP_TIEN_NT}"                                        
                                        Grid.Column="3" />
                    <smc:NumericTextBox x:Name="txtT_t_tt_nt"
                                        IsEnabled="False"
                                        Format="{Binding Path=Text, Source={StaticResource Voucher_Ma_nt0}, Mode=OneWay, Converter={StaticResource MaskNumeric}, ConverterParameter=M_IP_TIEN_NT}"                                        
                                        Grid.Row="2"
                                        Grid.Column="3" />
                    <smc:NumericTextBox x:Name="txtT_t_Tien_Nt0"
                                        IsEnabled="False"
                                        Format="{Binding Path=Text, Source={StaticResource Voucher_Ma_nt0}, Mode=OneWay, Converter={StaticResource MaskNumeric}, ConverterParameter=M_IP_TIEN}"                                        
                                        Grid.Row="0"
                                        Grid.Column="5" />
                    <smc:NumericTextBox x:Name="txtT_t_thue_Nt0"
                                        IsEnabled="False"
                                        Format="{Binding Path=Text, Source={StaticResource Voucher_Ma_nt0}, Mode=OneWay, Converter={StaticResource MaskNumeric}, ConverterParameter=M_IP_TIEN}"
                                        Grid.Row="1"
                                        Grid.Column="6" />
                    <smc:NumericTextBox x:Name="txtT_t_tt_Nt0"
                                        IsEnabled="False"
                                        Format="{Binding Path=Text, Source={StaticResource Voucher_Ma_nt0}, Mode=OneWay, Converter={StaticResource MaskNumeric}, ConverterParameter=M_IP_TIEN}"                                        
                                        Grid.Row="2"
                                        Grid.Column="6" />

                </smc:GridLayout>
                <smc:GridLayout         Grid.Row="0"
                                        RowCount="3"
                                        ColumnCount="6"
                                        Name="GrdLayout50"
                                        ColumnWidths="120*,240,100,140,12,140"
                                        HeightPerRow="25"
                                        Grid.RowSpan="1">

                    <smc:GridLayout ColumnCount="2"
                                    ColumnWidths="18*,140"
                                    x:Name="GrdLayout22"
                                    RowCount="3"
                                    Grid.RowSpan="3"
                                    Grid.Column="1"
                                    d:LayoutOverrides="GridBox">
                        <Button Name="btnSoHD"
                                Content="Số hđ"
                                Grid.Row="0"
                                Grid.Column="0"
                                HorizontalAlignment="Left"
                                Width="75"
                                Click="btnSoHD_Click">
                            <Button.Visibility>
                                <MultiBinding Converter="{StaticResource VisibilityConverter}"
                                              ConverterParameter="KindBT;PB"
                                              Mode="OneWay">
                                    <Binding Path="Text" Source="{StaticResource Ma_GD_Value}"/>
                                </MultiBinding>
                            </Button.Visibility>
                        </Button>
                        <TextBlock Grid.Column="1"
                                   Grid.Row="0"
                                   x:Name="lblSo_ct_tt"
                                   Style="{StaticResource ContentTextStyle}"
                                   Text="{smc:BindingEx Path=so_ct_tt}" >
                             <TextBlock.Visibility>
                                <MultiBinding Converter="{StaticResource VisibilityConverter}"
                                              ConverterParameter="KindBT;PB"
                                              Mode="OneWay">
                                    <Binding Path="Text" Source="{StaticResource Ma_GD_Value}"/>
                                </MultiBinding>
                            </TextBlock.Visibility>
                        </TextBlock>
                        <TextBlock Grid.Column="0"
                                   Grid.Row="2"
                                   x:Name="tblhan_tt"
                                   Style="{StaticResource ContentTextStyle}"
                                   Text="Hạn tt" />
                        <smc:NumericTextBox Grid.Column="1"
                                            Grid.Row="2"
                                            Name="txthan_tt"
                                            TabIndex="570"
                                            PreviewKeyDown="txtHan_tt_PreviewKeyDown"
                                            GotFocus="txthan_tt_GotFocus"
                                            Format="#,0"
                                            Value="{smc:BindingEx Path=han_tt}">
                            <smc:NumericTextBox.Style>
                                <smc:MergedStylesExtension BasedOn="{StaticResource NumericTextBoxrEditModeEnable}"
                                                           MergeStyle="{StaticResource  NumericTextBoxStyle}" />

                            </smc:NumericTextBox.Style>
                        </smc:NumericTextBox>
                    </smc:GridLayout>
                    <smc:GridLayout   Grid.Row="0"
                                      Grid.RowSpan="3"
                                      Name="GrdLayout40"
                                      Margin="0,0,12,0"
                                      ColumnCount="2"
                                      ColumnWidths="25,*">
                        <!--Style="{StaticResource ContentTextStyle}"-->
                        <TextBox Grid.Column="0"
                                 Grid.Row="0"
                                 x:Name="tblGhi_chu"
                                 Text="Ghi chú"
                                 Height="25"
                                 Width="70"
                                 IsReadOnly="True"
                                 TextAlignment="Right"
                                 VerticalAlignment="Center">
                            <TextBox.LayoutTransform>
                                <RotateTransform Angle="-90" />
                            </TextBox.LayoutTransform>
                        </TextBox>
                        <TextBox x:Name="txtghi_chu"
                                 Grid.Column="1"
                                 Grid.Row="0"
                                 Height="Auto"
                                 Margin="0,2.5,0,2.5"
                                 IsTabStop="False"
                                 TabIndex="140"
                                 VerticalScrollBarVisibility="Auto"
                                 TextWrapping="Wrap"
                                 Text="{smc:BindingEx ghi_chu0}"
                                 Style="{StaticResource TextBoxEditModeEnable}"
                                 PreviewKeyDown="txtghi_chu_PreviewKeyDown" />
                    </smc:GridLayout>
                </smc:GridLayout>
            </smc:GridLayout>
        </GroupBox>
    </smc:GridLayout>
</smvc:FormTrans>
